import{ac as xt,a0 as Tt,a1 as Ct,a2 as v,at as It,ai as de,a5 as F,au as ft,aw as bt,aA as Dt,aD as Lt,aC as mt,a9 as gt,aa as pt,aH as Ot,ae as Pt,av as zt}from"./index.721574d5.js";import{E as St,n as K}from"./PDFButton.1170afc9.js";import"./LocalStorage.d5f1344c.js";import{a as x}from"./axios.37d53be1.js";const Rt={data(){return{filterId:"",filterStatus:null,statusOptions:[{label:"Aprobado",value:"Aprobado"},{label:"Rechazado",value:"Rechazado"},{label:"Pendiente",value:"Pendiente"}],filter:"",rows:[],columns:[{name:"status",label:"Status",field:"status"},{name:"idLiquidacion",label:"ID Liquidaci\xF3n",field:"idLiquidacion",sortable:!0},{name:"idCotizacion",label:"ID Cotizaci\xF3n",field:"idCotizacion",sortable:!0},{name:"salida",label:"Salida",field:"salida"},{name:"destino",label:"Destino",field:"destino"},{name:"nombrePrograma",label:"Nombre del Programa",field:"nombrePrograma"},{name:"hotel",label:"Hotel",field:"hotel"},{name:"totalPasajeros",label:"Total Pasajeros",field:"totalPasajeros"},{name:"precioBrutoTotal",label:"Precio Bruto Total",field:"precioBrutoTotal"},{name:"totalPrecioCliente",label:"Total Precio Cliente",field:"totalPrecioCliente"},{name:"fechaCreacion",label:"Fecha de Creaci\xF3n",field:m=>new Date(m.fechaCreacion).toLocaleDateString(),sortable:!0},{name:"acciones",label:"Acciones"}]}},computed:{filteredRows(){const m=this.filterId.toLowerCase();return this.rows.filter(b=>{const D=b.idCotizacion.toLowerCase().includes(m),J=this.filterStatus===null||b.status===this.filterStatus;return D&&J})}},methods:{chipColor(m){switch(m){case"Aprobado":return"green";case"Rechazado":return"red";case"Pendiente":return"orange";default:return"grey"}},verDetalles(m){this.$router.push({name:"LiquidacionDetalles",params:{idLiquidacion:m.idLiquidacion,liquidacionData:m}})},descargarLiquidacionN(m){m.idCotizacion.includes("-C")?this.descargarLiquidacionCano(m.idCotizacion,m.idLiquidacion):this.descargarLiquidacion(m.idCotizacion,m.idLiquidacion)},async descargarLiquidacion(m,b){try{let D=function(i,r,a,l=10){return r+a>ge-l?(i.addPage(),t.top):r},at=function(i){return i.map(r=>{const a=r.adultos,l=r.ni\u00F1os,c=`1x${a}`;return l>0?`${c} CHD`:c}).join(", ")},C=function(i){for(let r=0;r<=6;r++){const a=t.left+r*f;e.line(a,i,a,i+s)}e.line(t.left,i,u-t.right,i),e.line(t.left,i+s,u-t.right,i+s)};const[J,P,ee,S,Be]=await Promise.all([x.get(`https://backmultidestinos.onrender.com/habitacionCotizacion/${m}`),x.get(`https://backmultidestinos.onrender.com/cotizacion/${m}`),x.get(`https://backmultidestinos.onrender.com/ImpuestoCot/${m}`),x.get(`https://backmultidestinos.onrender.com/liquidacion/${b}`),x.get(`https://backmultidestinos.onrender.com/pasajero/${b}`)]);if(J.status!==200||P.status!==200){console.error("Error al obtener datos de habitacionCotizacion o cotizacion");return}const o=P.data[0],L=ee.data[0];console.log("impuesto",L);const y=J.data;console.log("habitacion",y);const ke=S.data;console.log("liquidacion",ke);const ue=Be.data;console.log("pasajero",ue);const fe=await x.get(`https://backmultidestinos.onrender.com/cliente/buscar/${o.cliente}`);console.log("clienteResponse",fe);const g=fe.data[0];console.log("clienteData",g);const me=g.tipoBase,W=await x.get(`https://backmultidestinos.onrender.com/user/${o.CreadorCotizacion}`),At=W.Data;console.log("vendedor",W.data.nombreCompleto);const Qe={hotel:o.hotel,nombrePrograma:o.nombrePrograma,destino:o.destino},he=await x.post("https://backmultidestinos.onrender.com/hoteles/buscar",Qe),Ge=o.incluye?o.incluye:he.data[0].incluye,Je=o.noIncluye?o.noIncluye:he.data[0].noIncluye,e=new St,t={top:10,bottom:10,left:10,right:10},u=e.internal.pageSize.width,ge=e.internal.pageSize.height,te=40,A={left:10,right:10,top:5,bottom:5},oe=await new Promise((i,r)=>{const a=new Image;a.src="https://i.ibb.co/1sFJ7dT/imgAzul.png",a.onload=()=>i(a),a.onerror=r}),Xe=oe.width/oe.height,Ze=u/4-A.left-A.right,q=Math.min(100,Ze),pe=q/Xe,Ke=t.top+(te-pe)/2,et=`PBX(601)7621133
CALLE 64 No. 11-37 LOC 301
EMAIL: MULTIDESTINOS_EXPRESS@YAHOO.COM`,Se=`Numero de cotizaci\xF3n: ${m}`;e.addImage(oe,"PNG",t.left+A.left,Ke,q,pe);const tt=u-t.left-t.right-q-A.left-A.right-10;e.setFontSize(10),e.text(e.splitTextToSize(et,tt),t.left+q+A.left+A.right,t.top+10);const ot=u-t.right-e.getTextWidth(Se)-A.right;e.setFontSize(12),e.setFont("Helvetica-Bold",12),e.text(Se,ot,t.top+10),e.setDrawColor(0),e.rect(t.left,t.top,u-t.left-t.right,te,"S"),e.setFontSize(10);const Ae=t.top+te+10;e.setFontSize(10),e.text("SOLICITUD DE RESERVA:",t.left,Ae-4),e.setFontSize(8);const ae=["FECHA SOLICITUD:","AGENCIA:","TEL\xC9FONO:","CONTACTO:","NIT:","VENDEDOR:"],Ee=[new Date(new Date(o.fechaCreacion).getTime()+new Date(o.fechaCreacion).getTimezoneOffset()*6e4).toLocaleDateString(),o.cliente.toString(),g.telefono?g.telefono.toString():"N/A","N/A",g.nit?g.nit.toString():"N/A",W.data.nombreCompleto?W.data.nombreCompleto.toString():"N/A"],Ne=6,xe=(u-t.left-t.right)/Ne;let T=t.left,n=Ae;for(let i=0;i<ae.length;i++){e.text(ae[i],T,n);const r=Ee[i]!==void 0?Ee[i]:"N/A",a=e.splitTextToSize(r,xe-2);e.text(a,T,n+5),T+=xe,((i+1)%Ne===0||i===ae.length-1)&&(n+=15,T=t.left)}const nt=at(y),Te=["NOCHES:","HOTEL:","PLAN:","DESTINO:","DIRECCION:","ACOMODACI\xD3N:"],ne=[o.noches?o.noches.toString():"N/A",o.hotel?o.hotel.toString():"N/A",o.plan?o.plan.toString():"N/A",o.destino?o.destino.toString():"N/A",o.direccion?o.direccion.toString():"N/A",nt.toString()];console.log("campso2",ne);const it=6,Ce=(u-t.left-t.right)/it;n+=1;for(let i=0;i<Te.length;i++){e.text(Te[i],T,n);const r=ne[i]!==void 0?ne[i]:"N/A",a=e.splitTextToSize(r,Ce-2);e.text(a,T,n+5),T+=Ce}n+=1,e.setFontSize(10),e.text("PASAJEROS: ",t.left,n+12),n+=20;const Ie=["NOMBRE","DOCUMENTO","F. NACIMIENTO","EDAD"],be=ue.map(i=>{const r=new Date(i.fechaNacimiento),a=new Date;let l=a.getFullYear()-r.getFullYear();const c=a.getMonth()-r.getMonth();return(c<0||c===0&&a.getDate()<r.getDate())&&l--,[i.nombre,i.numeroDocumento,r.toLocaleDateString(),l]}),De=(u-t.left-t.right)/Ie.length,lt=u-t.left-t.right,Le=10+8*be.length;e.rect(t.left,n,lt,Le,"S"),e.setFontSize(8),Ie.forEach((i,r)=>{e.text(i,t.left+5+r*De,n+5)}),n+=10,be.forEach((i,r)=>{i.forEach((a,l)=>{e.text(a.toString(),t.left+5+l*De,n+r*8)})}),n+=Le-15,n+=22,e.setFontSize(10),e.text("ITINERARIO: ",t.left,n-10);const Oe=["AEROLINEA","VUELO","FECHA","RUTA","CLASE","HR SALIDA","HR LLEGADA","RECORD"],w=[[o.aerolineaIda||"N/A",o.vueloIda||"N/A",o.fechaInicio?new Date(new Date(o.fechaInicio).getTime()+new Date(o.fechaInicio).getTimezoneOffset()*6e4).toLocaleDateString():"N/A",o.ruta1||"N/A",o.claseIda||"N/A",o.horaSalidaIda||"N/A",o.horaLlegadaIda||"N/A",o.recordIda||"N/A"]];o.aerolineaEscalaIda!=null&&(w.push([o.aerolineaEscalaIda||"N/A",o.vueloEscalaIda||"N/A",o.fechaInicio?new Date(new Date(o.fechaInicio).getTime()+new Date(o.fechaInicio).getTimezoneOffset()*6e4).toLocaleDateString():"N/A","Escala Ida",o.claseEscalaIda||"N/A",o.horaSalidaEscalaIda||"N/A",o.horaLlegadaEscalaIda||"N/A",""]),w.push([o.aerolineaEscalaVuelta||"N/A",o.vueloEscalaVuelta||"N/A",o.fechaFin?new Date(new Date(o.fechaFin).getTime()+new Date(o.fechaFin).getTimezoneOffset()*6e4).toLocaleDateString():"N/A","Escala Vuelta",o.claseEscalaVuelta||"N/A",o.horaSalidaEscalaVuelta||"N/A",o.horaLlegadaEscalaVuelta||"N/A",""])),w.push([o.aerolineaVuelta||"N/A",o.vueloVuelta||"N/A",o.fechaFin?new Date(new Date(o.fechaFin).getTime()+new Date(o.fechaFin).getTimezoneOffset()*6e4).toLocaleDateString():"N/A",o.ruta2||"N/A",o.claseVuelta||"N/A",o.horaSalidaVuelta||"N/A",o.horaLlegadaVuelta||"N/A",o.recordVuelta||"N/A"]);const Pe=(u-t.left-t.right)/Oe.length,st=u-t.left-t.right,ze=12+8*w.length;n+=5,e.rect(t.left,n-5,st,ze,"S"),e.setFontSize(8),Oe.forEach((i,r)=>{e.text(i,t.left+r*Pe,n)}),n+=5,w.forEach((i,r)=>{i.forEach((a,l)=>{e.text(a,t.left+l*Pe,n+(r+1)*8)})}),n+=ze-5;let p;const rt="Esta cotizaci\xF3n est\xE1 sujeta a cambio y disponibilidad al momento de reservar (Sin servicio confirmado)",$=n,Re=30;e.setDrawColor(0),e.rect(t.left,$,u-t.left-t.right,Re),e.setFontSize(12),e.text("OBSERVACIONES:",t.left+2,$+6),e.setFontSize(10),e.text(rt,t.left+2,$+15,{maxWidth:u-t.left-t.right-4}),n=$+Re;const U=n+10;e.setFontSize(8);const ct=`El pago de su plan se realizar\xE1 conforme a las siguientes condiciones:

Planes con inicio dentro de los 30 d\xEDas:  El pago total deber\xE1 efectuarse dentro de un d\xEDa h\xE1bil a partir de la fecha de env\xEDo de este documento.
Planes con inicio posterior a los 30 d\xEDas: El pago se realizar\xE1 en dos cuotas:
  * Primera cuota: 50% del valor total del plan, pagadero dentro de un d\xEDa h\xE1bil a partir de la fecha de env\xEDo de este documento.
  * Segunda cuota: 50% restante del valor total del plan, pagadero 30 d\xEDas antes de la fecha de inicio del plan.`,ve=e.splitTextToSize(ct,u-t.left-t.right-4);let _=18;ve.forEach(i=>{_+=e.getTextDimensions(i,{fontSize:8}).h}),n=D(e,n,_),e.setDrawColor(0),e.rect(t.left,U,u-t.left-t.right,_),e.setFontSize(12),e.text("PLAZO DE PAGO:",t.left+2,U+6),e.setFontSize(8),p=U+15,ve.forEach(i=>{e.text(i,t.left+2,p,{maxWidth:u-t.left-t.right-4}),p+=e.getTextDimensions(i,{fontSize:8}).h}),n=U+_;let Fe=!1;e.setFontSize(8);const we=Ge.split("\xBF");let ie=[];we.forEach(i=>{const r=e.splitTextToSize(i,u-t.left-t.right-4);ie=ie.concat(r)});let V=18;we.forEach(i=>{const r=e.splitTextToSize(i,u-t.left-t.right-4);for(let a=0;a<r.length;a++){const l=r[a];V+=e.getTextDimensions(l,{fontSize:8}).h,!l.endsWith(`
`)&&a<r.length-1&&(V+=e.getTextDimensions(" ",{fontSize:8}).h)}}),n=D(e,n,V),n===t.top&&(Fe=!0);const Y=n+10;e.setDrawColor(0),e.rect(t.left,Y,u-t.left-t.right,V),e.setFontSize(12),e.text("INCLUYE:",t.left+2,Y+6),e.setFontSize(8),p=Y+15,ie.forEach(i=>{e.text(i,t.left+2,p,{maxWidth:u-t.left-t.right-4}),p+=e.getTextDimensions(i,{fontSize:8}).h}),n=Y+V;const Ve=Je.split("\xBF");let le=[];Ve.forEach(i=>{const r=e.splitTextToSize(i,u-t.left-t.right-4);le=le.concat(r)});let M=18;Ve.forEach(i=>{const r=e.splitTextToSize(i,u-t.left-t.right-4);for(let a=0;a<r.length;a++){const l=r[a];M+=e.getTextDimensions(l,{fontSize:8}).h,!l.endsWith(`
`)&&a<r.length-1&&(M+=e.getTextDimensions(" ",{fontSize:8}).h)}}),n=D(e,n,M),Fe||(n=t.top);const k=n+10;e.setDrawColor(0),e.rect(t.left,k,u-t.left-t.right,M),e.setFontSize(12),e.text("NO INCLUYE:",t.left+2,k+6),e.setFontSize(8),p=k+15,le.forEach(i=>{e.text(i,t.left+2,p,{maxWidth:u-t.left-t.right-4}),p+=e.getTextDimensions(i,{fontSize:8}).h}),n=k+M,e.addPage(),n=t.top,e.setFontSize(10),e.text("LIQUIDACI\xD3N:",t.left,n),n+=5;const Q=n+5,d=2,s=6,f=(u-t.left-t.right)/6;e.setDrawColor(0);let Me=0;e.setFontSize(7);let O=0;y.forEach(i=>{const r=Q+O*s;C(r);const a=`Valor adul ${i.acomodacion}`;e.text(a,t.left+d,r+s/2,{baseline:"middle"});const l=Math.round(i.precioComisionableAdulto);e.text(l.toString(),t.left+f+d,r+s/2,{baseline:"middle"});const c=i.adultos;e.text(c.toString(),t.left+2*f+d,r+s/2,{baseline:"middle"});const h=Math.round(i.precioComisionableAdulto*i.adultos);if(e.text(h.toString(),t.left+3*f+d,r+s/2,{baseline:"middle"}),O===0){e.setFontSize(6);const N=me==="Comisi\xF3n"?"BASE COMISI\xD3N":"BASE DE DESCUENTO";e.text(N,t.left+4*f+d,r+s/2,{baseline:"middle"}),e.setFontSize(7)}let E=h;if(i.ni\u00F1os>0&&(E+=Math.round(i.precioComisionableNino*i.ni\u00F1os)),Me+=E,O++,i.ni\u00F1os>0){const N=Q+O*s;C(N);const z=`Valor child ${i.acomodacion}`;e.text(z,t.left+d,N+s/2,{baseline:"middle"});const I=Math.round(i.precioComisionableNino);e.text(I.toString(),t.left+f+d,N+s/2,{baseline:"middle"});const X=i.ni\u00F1os;e.text(X.toString(),t.left+2*f+d,N+s/2,{baseline:"middle"});const Z=Math.round(i.precioComisionableNino*i.ni\u00F1os);e.text(Z.toString(),t.left+3*f+d,N+s/2,{baseline:"middle"}),O++}}),e.text(Me.toString(),t.left+5*f+d,Q+s/2,{baseline:"middle"}),n=Q+O*s+10;const H=["TRANSPORTE NO COMISI","Q","YS","CO","TA","YS TA","TOTAL IMPUESTOS"],G=[o.otros,o.combus,o.iva,o.tasa,o.ta,o.ivaTa,o.precioTrans];if(o.suplemento>0&&(H.push("SUPLEMENTO"),G.push(o.suplemento)),o.extra1)if(o.extra1.includes("*")){let i=o.extra1.split("*"),r=i[0],a=i[1];H.push("Valor Extra","Valor Extra2"),G.push(r,a)}else{let i=o.extra1;H.push("Valor Extra"),G.push(i)}H.forEach((i,r)=>{const a=n+r*s;C(a),e.text(i,t.left+d,a+s/2,{baseline:"middle"});const l=o.totalPasajeros,c=G[r]||0,h=l!==0?Math.trunc(c/l):"";e.text(h.toString(),t.left+f+d,a+s/2,{baseline:"middle"});const E=l!==0?Math.trunc(l).toString():"";e.text(E,t.left+2*f+d,a+s/2,{baseline:"middle"});const N=c!==0?Math.trunc(c).toString():"";if(e.text(N,t.left+3*f+d,a+s/2,{baseline:"middle"}),i==="Q"){e.text("Porcentaje",t.left+4*f+d,a+s/2,{baseline:"middle"});const z=o.clientePorcentaje||0,I=Math.trunc(z).toString()+"%";e.text(I,t.left+5*f+d,a+s/2,{baseline:"middle"})}else if(i==="YS"){e.text("Valor Descuento",t.left+4*f+d,a+s/2,{baseline:"middle"});const z=o.valorDescuento||0,I=Math.trunc(z).toString();e.text(I,t.left+5*f+d,a+s/2,{baseline:"middle"}),me==="Comisi\xF3n"&&[{label:`IVA(${g.porcentajeIva}%) (-)`,value:o.ivaValor},{label:`RTE FUENTE(${g.rteFuente}%) (+)`,value:o.rteFuente},{label:`RTE ICA(${g.rteIca}%) (+)`,value:o.rteIca},{label:"Total Comisi\xF3n",value:o.totalComision}].forEach((Z,j)=>{const R=a+(j+1)*s;C(R),e.text(Z.label,t.left+4*f+d,R+s/2,{baseline:"middle"}),e.text(Z.value.toString(),t.left+5*f+d,R+s/2,{baseline:"middle"})})}}),n+=H.length*s,y.forEach(i=>{if(i.adultos>0){const r=n;C(r),e.text(`Valor total Adt ${i.acomodacion}`,t.left+d,r+s/2,{baseline:"middle"});const a=i.precioHabitacionAdulto||0,l=K(a).format("$0,0");e.text(l,t.left+3*f+d,r+s/2,{baseline:"middle"}),n+=s}if(i.ni\u00F1os>0){const r=n;C(r),e.text(`Valor total Chd ${i.acomodacion}`,t.left+d,r+s/2,{baseline:"middle"});const a=i.precioHabitacionNino||0,l=K(a).format("$0,0");e.text(l,t.left+3*f+d,r+s/2,{baseline:"middle"}),n+=s}}),e.setFontSize(8),n+=s,C(n),e.text("Valor total",t.left+d,n+s/2,{baseline:"middle"});const ye=o.precioBrutoTotal||0,dt=K(ye).format("$0,0");e.text(dt,t.left+3*f+d,n+s/2,{baseline:"middle"}),e.text("Precio a pagar",t.left+4*f+d,n+s/2-2,{baseline:"middle"}),e.text("a Multidestinos",t.left+4*f+d,n+s/2+2,{baseline:"middle"});const We=0,qe=parseFloat(o.totalPrecioCliente)||0,$e=We>0?qe+We:qe,Ue=K($e).format("$0,0");e.text(Ue,t.left+5*f+d,n+s/2,{baseline:"middle"}),n+=s+10;const He=t.left;let se=n+5;const re=190;let B=30;e.setFontSize(7),e.setLineWidth(.5),e.setFontSize(6);const je=5,ce="PARA CONFIRMACIONES SE DEBE ENVIAR DEPOSITO DEL 50% DEL VALOR DEL PLAN Y EL SALDO 30 DIAS ANTES DE LA SALIDA, SI LA FECHA DE VIAJES CERCANA SE DEBE CANCELAR EL 100%. LOS SERVICIOS DEJADOS DE TOMAR NO SON REMBOLSABLES. LA CANCELACI\xD3N CON 18 DIAS ANTES DE VIAJE LA PENALIDAD SERA DEL 100% DEL VALOR DEL PLAN, LOS TIQUETES NO SON REEMBOLSABLE, NI ENDOSABLES, PENALIDAD POR CAMBIO (FECHA, NOMBRE, HORA, RUTAS) 200.000. ESTAS POLITICAS ESTAN PUBLICADAS DE MANERA CLARA Y ESPECIFICA EN NUESTRA PAGINA WWW.MULTIDESTINOSEXPRESS.COM. *TARIFAS SUJETA A CAMBIO Y DISPONIBILIDAD SIN PREVIO AVISO*",_e=e.splitTextToSize(ce,re-10);B=20+_e.length*je,se+B>ge-t.bottom&&(e.addPage(),n=t.top),se=n,e.rect(He,n,re,B),e.text("Deposito y Condiciones de Pago",He+5,se+3),_e.forEach((i,r)=>{e.text(i,He+5,se+10+r*je)}),n+=B+5;const Ye=e.output("blob");return e.save(`cotizacion_${m}.pdf`),Ye}catch(D){console.error("Error al descargar cotizaci\xF3n:",D)}},async descargarLiquidacionCano(m,b){try{let D=function(a,l,c,h=10){return l+c>ge-h?(a.addPage(),t.top):l},at=function(a){return a.map(l=>{const c=l.adultos,h=l.ni\u00F1os,E=`1x${c}`;return h>0?`${E} CHD`:E}).join(", ")},C=function(a){for(let l=0;l<=6;l++){const c=t.left+l*f;e.line(c,a,c,a+s)}e.line(t.left,a,u-t.right,a),e.line(t.left,a+s,u-t.right,a+s)};const[J,P,ee,S,Be]=await Promise.all([x.get(`https://backmultidestinos.onrender.com/habitacionCotizacion/${m}`),x.get(`https://backmultidestinos.onrender.com/cotizacion/${m}`),x.get(`https://backmultidestinos.onrender.com/ImpuestoCot/${m}`),x.get(`https://backmultidestinos.onrender.com/liquidacion/${b}`),x.get(`https://backmultidestinos.onrender.com/pasajero/${b}`)]);if(J.status!==200||P.status!==200){console.error("Error al obtener datos de habitacionCotizacion o cotizacion");return}const o=P.data[0],L=ee.data[0];console.log("impuesto",L);const y=J.data;console.log("habitacion",y);const ke=S.data;console.log("liquidacion",ke);const ue=Be.data;console.log("pasajero",ue);const fe=await x.get(`https://backmultidestinos.onrender.com/cliente/buscar/${o.cliente}`);console.log("clienteResponse",fe);const g=fe.data[0];console.log("clienteData",g);const me=g.tipoBase,W=await x.get(`https://backmultidestinos.onrender.com/user/${o.CreadorCotizacion}`),At=W.Data;console.log("vendedor",W.data.nombreCompleto);const Qe={hotel:o.hotel,nombrePrograma:o.nombrePrograma,destino:o.destino},he=await x.post("https://backmultidestinos.onrender.com/hoteles/buscar",Qe),Ge=he.data[0].incluye,Je=he.data[0].noIncluye,e=new St,t={top:10,bottom:10,left:10,right:10},u=e.internal.pageSize.width,ge=e.internal.pageSize.height,te=40,A={left:10,right:10,top:5,bottom:5},oe=await new Promise((a,l)=>{const c=new Image;c.src="https://i.ibb.co/1sFJ7dT/imgAzul.png",c.onload=()=>a(c),c.onerror=l}),Xe=oe.width/oe.height,Ze=u/4-A.left-A.right,q=Math.min(100,Ze),pe=q/Xe,Ke=t.top+(te-pe)/2,et=`PBX(601)7621133
CALLE 64 No. 11-37 LOC 301
EMAIL: MULTIDESTINOS_EXPRESS@YAHOO.COM`,Se=`Numero de Liquidacion: ${b}`;e.addImage(oe,"PNG",t.left+A.left,Ke,q,pe);const tt=u-t.left-t.right-q-A.left-A.right-10;e.setFontSize(10),e.text(e.splitTextToSize(et,tt),t.left+q+A.left+A.right,t.top+10);const ot=u-t.right-e.getTextWidth(Se)-A.right;e.setFontSize(12),e.setFont("Helvetica-Bold",12),e.text(Se,ot,t.top+10),e.setDrawColor(0),e.rect(t.left,t.top,u-t.left-t.right,te,"S"),e.setFontSize(10);const Ae=t.top+te+10;e.setFontSize(10),e.text("SOLICITUD DE RESERVA:",t.left,Ae-4),e.setFontSize(8);const ae=["FECHA SOLICITUD:","AGENCIA:","TEL\xC9FONO:","CONTACTO:","NIT:","VENDEDOR:"],Ee=[new Date(o.fechaCreacion).toLocaleDateString(),o.cliente.toString(),g.telefono?g.telefono.toString():"N/A",g.nit?g.nit.toString():"N/A",g.nit?g.nit.toString():"N/A",W.data.nombreCompleto?W.data.nombreCompleto.toString():"N/A"],Ne=6,xe=(u-t.left-t.right)/Ne;let T=t.left,n=Ae;for(let a=0;a<ae.length;a++){e.text(ae[a],T,n);const l=Ee[a]!==void 0?Ee[a]:"N/A",c=e.splitTextToSize(l,xe-2);e.text(c,T,n+5),T+=xe,((a+1)%Ne===0||a===ae.length-1)&&(n+=15,T=t.left)}const nt=at(y),Te=["NOCHES:","HOTEL:","PLAN:","DESTINO:","DIRECCION:","ACOMODACI\xD3N:"],ne=[o.noches?o.noches.toString():"N/A",o.hotel?o.hotel.toString():"N/A",o.plan?o.plan.toString():"N/A",o.destino?o.destino.toString():"N/A",o.direccion?o.direccion.toString():"N/A",nt.toString()];console.log("campso2",ne);const it=6,Ce=(u-t.left-t.right)/it;n+=1;for(let a=0;a<Te.length;a++){e.text(Te[a],T,n);const l=ne[a]!==void 0?ne[a]:"N/A",c=e.splitTextToSize(l,Ce-2);e.text(c,T,n+5),T+=Ce}n+=1,e.setFontSize(10),e.text("PASAJEROS: ",t.left,n+12),n+=20;const Ie=["NOMBRE","DOCUMENTO","F. NACIMIENTO","EDAD"],be=ue.map(a=>{const l=new Date(a.fechaNacimiento),c=new Date;let h=c.getFullYear()-l.getFullYear();const E=c.getMonth()-l.getMonth();return(E<0||E===0&&c.getDate()<l.getDate())&&h--,[a.nombre,a.numeroDocumento,l.toLocaleDateString(),h]}),De=(u-t.left-t.right)/Ie.length,lt=u-t.left-t.right,Le=10+8*be.length;e.rect(t.left,n,lt,Le,"S"),e.setFontSize(8),Ie.forEach((a,l)=>{e.text(a,t.left+5+l*De,n+5)}),n+=10,be.forEach((a,l)=>{a.forEach((c,h)=>{e.text(c.toString(),t.left+5+h*De,n+l*8)})}),n+=Le-15,n+=1,e.setFontSize(10),e.text("ITINERARIO: ",t.left,n+12),n+=20;const Oe=["AEROLINEA","VUELO","FECHA","RUTA","CLASE","HR SALIDA","HR LLEGADA","RECORD"],w=[[o.aerolineaIda||"N/A",o.vueloIda||"N/A",o.fechaInicio?new Date(new Date(o.fechaInicio).getTime()+new Date(o.fechaInicio).getTimezoneOffset()*6e4).toLocaleDateString():"N/A",o.ruta1||"N/A",o.claseIda||"N/A",o.horaSalidaIda||"N/A",o.horaLlegadaIda||"N/A",o.recordIda||"N/A"]];o.aerolineaEscalaIda!=null&&(w.push([o.aerolineaEscalaIda||"N/A",o.vueloEscalaIda||"N/A",o.fechaInicio?new Date(new Date(o.fechaInicio).getTime()+new Date(o.fechaInicio).getTimezoneOffset()*6e4).toLocaleDateString():"N/A","Escala Ida",o.claseEscalaIda||"N/A",o.horaSalidaEscalaIda||"N/A",o.horaLlegadaEscalaIda||"N/A",""]),w.push([o.aerolineaEscalaVuelta||"N/A",o.vueloEscalaVuelta||"N/A",o.fechaFin?new Date(new Date(o.fechaFin).getTime()+new Date(o.fechaFin).getTimezoneOffset()*6e4).toLocaleDateString():"N/A","Escala Vuelta",o.claseEscalaVuelta||"N/A",o.horaSalidaEscalaVuelta||"N/A",o.horaLlegadaEscalaVuelta||"N/A",""])),w.push([o.aerolineaVuelta||"N/A",o.vueloVuelta||"N/A",o.fechaFin?new Date(new Date(o.fechaFin).getTime()+new Date(o.fechaFin).getTimezoneOffset()*6e4).toLocaleDateString():"N/A",o.ruta2||"N/A",o.claseVuelta||"N/A",o.horaSalidaVuelta||"N/A",o.horaLlegadaVuelta||"N/A",o.recordVuelta||"N/A"]);const Pe=(u-t.left-t.right)/Oe.length,st=u-t.left-t.right,ze=10+8*w.length;e.rect(t.left,n,st,ze,"S"),e.setFontSize(8),Oe.forEach((a,l)=>{e.text(a,t.left+l*Pe,n+5)}),n+=10,w.forEach((a,l)=>{a.forEach((c,h)=>{e.text(c,t.left+h*Pe,n+l*8)})}),n+=ze-8;let p;const rt="Esta cotizaci\xF3n est\xE1 sujeta a cambio y disponibilidad al momento de reservar (Sin servicio confirmado)",$=n,Re=30;e.setDrawColor(0),e.rect(t.left,$,u-t.left-t.right,Re),e.setFontSize(12),e.text("OBSERVACIONES:",t.left+2,$+6),e.setFontSize(10),e.text(rt,t.left+2,$+15,{maxWidth:u-t.left-t.right-4}),n=$+Re;const U=n+10;e.setFontSize(8);const ct=`El pago de su plan se realizar\xE1 conforme a las siguientes condiciones:

Planes con inicio dentro de los 30 d\xEDas:  El pago total deber\xE1 efectuarse dentro de un d\xEDa h\xE1bil a partir de la fecha de env\xEDo de este documento.
Planes con inicio posterior a los 30 d\xEDas: El pago se realizar\xE1 en dos cuotas:
  * Primera cuota: 50% del valor total del plan, pagadero dentro de un d\xEDa h\xE1bil a partir de la fecha de env\xEDo de este documento.
  * Segunda cuota: 50% restante del valor total del plan, pagadero 30 d\xEDas antes de la fecha de inicio del plan.`,ve=e.splitTextToSize(ct,u-t.left-t.right-4);let _=18;ve.forEach(a=>{_+=e.getTextDimensions(a,{fontSize:8}).h}),n=D(e,n,_),e.setDrawColor(0),e.rect(t.left,U,u-t.left-t.right,_),e.setFontSize(12),e.text("PLAZO DE PAGO:",t.left+2,U+6),e.setFontSize(8),p=U+15,ve.forEach(a=>{e.text(a,t.left+2,p,{maxWidth:u-t.left-t.right-4}),p+=e.getTextDimensions(a,{fontSize:8}).h}),n=U+_;let Fe=!1;e.setFontSize(8);const we=Ge.split("\xBF");let ie=[];we.forEach(a=>{const l=e.splitTextToSize(a,u-t.left-t.right-4);ie=ie.concat(l)});let V=18;we.forEach(a=>{const l=e.splitTextToSize(a,u-t.left-t.right-4);for(let c=0;c<l.length;c++){const h=l[c];V+=e.getTextDimensions(h,{fontSize:8}).h,!h.endsWith(`
`)&&c<l.length-1&&(V+=e.getTextDimensions(" ",{fontSize:8}).h)}}),n=D(e,n,V),n===t.top&&(Fe=!0);const Y=n+10;e.setDrawColor(0),e.rect(t.left,Y,u-t.left-t.right,V),e.setFontSize(12),e.text("INCLUYE:",t.left+2,Y+6),e.setFontSize(8),p=Y+15,ie.forEach(a=>{e.text(a,t.left+2,p,{maxWidth:u-t.left-t.right-4}),p+=e.getTextDimensions(a,{fontSize:8}).h}),n=Y+V;const Ve=Je.split("\xBF");let le=[];Ve.forEach(a=>{const l=e.splitTextToSize(a,u-t.left-t.right-4);le=le.concat(l)});let M=18;Ve.forEach(a=>{const l=e.splitTextToSize(a,u-t.left-t.right-4);for(let c=0;c<l.length;c++){const h=l[c];M+=e.getTextDimensions(h,{fontSize:8}).h,!h.endsWith(`
`)&&c<l.length-1&&(M+=e.getTextDimensions(" ",{fontSize:8}).h)}}),n=D(e,n,M),Fe||(n=t.top);const k=n+10;e.setDrawColor(0),e.rect(t.left,k,u-t.left-t.right,M),e.setFontSize(12),e.text("NO INCLUYE:",t.left+2,k+6),e.setFontSize(8),p=k+15,le.forEach(a=>{e.text(a,t.left+2,p,{maxWidth:u-t.left-t.right-4}),p+=e.getTextDimensions(a,{fontSize:8}).h}),n=k+M,e.addPage(),n=t.top,e.setFontSize(10),e.text("LIQUIDACI\xD3N:",t.left,n),n+=5;const Q=n+5,d=2,s=6,f=(u-t.left-t.right)/6;e.setDrawColor(0);let Me=0;e.setFontSize(7);let O=0;y.forEach(a=>{const l=Q+O*s;C(l);const c=`Valor adul ${a.acomodacion}`;e.text(c,t.left+d,l+s/2,{baseline:"middle"});const h=Math.round(a.precioComisionableAdulto);e.text(h.toString(),t.left+f+d,l+s/2,{baseline:"middle"});const E=a.adultos;e.text(E.toString(),t.left+2*f+d,l+s/2,{baseline:"middle"});const N=Math.round(a.precioComisionableAdulto*a.adultos);if(e.text(N.toString(),t.left+3*f+d,l+s/2,{baseline:"middle"}),O===0){e.setFontSize(6);const I=me==="Comisi\xF3n"?"BASE COMISI\xD3N":"BASE DE DESCUENTO";e.text(I,t.left+4*f+d,l+s/2,{baseline:"middle"}),e.setFontSize(7)}let z=N;if(a.ni\u00F1os>0&&(z+=Math.round(a.precioComisionableNino*a.ni\u00F1os)),Me+=z,O++,a.ni\u00F1os>0){const I=Q+O*s;C(I);const X=`Valor child ${a.acomodacion}`;e.text(X,t.left+d,I+s/2,{baseline:"middle"});const Z=Math.round(a.precioComisionableNino);e.text(Z.toString(),t.left+f+d,I+s/2,{baseline:"middle"});const j=a.ni\u00F1os;e.text(j.toString(),t.left+2*f+d,I+s/2,{baseline:"middle"});const R=Math.round(a.precioComisionableNino*a.ni\u00F1os);e.text(R.toString(),t.left+3*f+d,I+s/2,{baseline:"middle"}),O++}}),e.text(Me.toString(),t.left+5*f+d,Q+s/2,{baseline:"middle"}),n=Q+O*s+10;const H=["TRANSPORTE NO COMI","Q","YS","CO","TA","YS TA","defensaCivil","alcaldiaNacional","alcaldiaExtranjero","pqsNaturalesExtranjero","pqsNaturales25a65","pqsNaturales5a24","cormacarenaExtranjero","cormacarena5a11","cormacarena12a65"],G=[o.otros,o.combus,o.iva,o.tasa,o.ta,o.ivaTa,L.defensaCivil_Total,L.alcaldiaNacional_Total,L.alcaldiaExtranjero_Total,L.pqsNaturalesExtranjero_Total,L.pqsNaturales25a65_Total,L.pqsNaturales5a24_Total,L.cormacarenaExtranjero_Total,L.cormacarena5a11_Total,L.cormacarena12a65_Total,o.precioTrans],ye=["alcaldiaNacional","alcaldiaExtranjero","pqsNaturalesExtranjero","pqsNaturales25a65","pqsNaturales5a24","cormacarenaExtranjero","cormacarena5a11","cormacarena12a65"],dt={defensaCivil:"Defensa Civil",alcaldiaNacional:"Alcald\xEDa Nacional",alcaldiaExtranjero:"Alcald\xEDa Extranjero",pqsNaturalesExtranjero:"PQS. Naturales Extranjero",pqsNaturales25a65:"PQS. Naturales 25 a 65",pqsNaturales5a24:"PQS. Naturales 5 a 24",cormacarenaExtranjero:"Cormacarena Extranjero",cormacarena5a11:"Cormacarena 5 a 11",cormacarena12a65:"Cormacarena 12 a 65"};if(o.suplemento>0&&(H.push("SUPLEMENTO"),G.push(o.suplemento)),o.extra1)if(o.extra1.includes("*")){let a=o.extra1.split("*"),l=a[0],c=a[1];H.push("Valor Extra","Valor Extra2"),G.push(l,c)}else{let a=o.extra1;H.push("Valor Extra"),G.push(a)}H.forEach((a,l)=>{const c=n+l*s;C(c);const h=dt[a]||a;e.text(h,t.left+d,c+s/2,{baseline:"middle"});const E=o.totalPasajeros,N=G[l]||0;let z="";if(ye.includes(a)){const j=`${a}_numeroPersonas`,R=L[j]||0;z=R!==0?Math.trunc(N/R):""}else z=E!==0?Math.trunc(N/E):"";e.text(z.toString(),t.left+f+d,c+s/2,{baseline:"middle"});const I=E!==0?Math.trunc(E).toString():"";let X="";if(ye.includes(a)){const j=`${a}_numeroPersonas`;X=L[j]||""}else X=I;e.text(X,t.left+2*f+d,c+s/2,{baseline:"middle"});const Z=N!==0?Math.trunc(N).toString():"";if(e.text(Z,t.left+3*f+d,c+s/2,{baseline:"middle"}),a==="Q"){e.text("Porcentaje",t.left+4*f+d,c+s/2,{baseline:"middle"});const j=o.clientePorcentaje||0,R=Math.trunc(j).toString()+"%";e.text(R,t.left+5*f+d,c+s/2,{baseline:"middle"})}else if(a==="YS"){e.text("Valor Descuento",t.left+4*f+d,c+s/2,{baseline:"middle"});const j=o.valorDescuento||0,R=Math.trunc(j).toString();e.text(R,t.left+5*f+d,c+s/2,{baseline:"middle"}),me==="Comisi\xF3n"&&[{label:`IVA(${g.porcentajeIva}%) (-)`,value:o.ivaValor},{label:`RTE FUENTE(${g.rteFuente}%) (+)`,value:o.rteFuente},{label:`RTE ICA(${g.rteIca}%) (+)`,value:o.rteIca},{label:"Total Comisi\xF3n",value:o.totalComision}].forEach((ht,Nt)=>{const ut=c+(Nt+1)*s;C(ut),e.text(ht.label,t.left+4*f+d,ut+s/2,{baseline:"middle"}),e.text(ht.value.toString(),t.left+5*f+d,ut+s/2,{baseline:"middle"})})}}),n+=H.length*s,y.forEach(a=>{if(a.adultos>0){const l=n;C(l),e.text(`Valor total Adt ${a.acomodacion}`,t.left+d,l+s/2,{baseline:"middle"});const c=a.precioHabitacionAdulto||0,h=K(c).format("$0,0");e.text(h,t.left+3*f+d,l+s/2,{baseline:"middle"}),n+=s}if(a.ni\u00F1os>0){const l=n;C(l),e.text(`Valor total Chd ${a.acomodacion}`,t.left+d,l+s/2,{baseline:"middle"});const c=a.precioHabitacionNino||0,h=K(c).format("$0,0");e.text(h,t.left+3*f+d,l+s/2,{baseline:"middle"}),n+=s}}),e.setFontSize(8),n+=s,C(n),e.text("Valor total",t.left+d,n+s/2,{baseline:"middle"});const We=o.precioBrutoTotal||0,qe=K(We).format("$0,0");e.text(qe,t.left+3*f+d,n+s/2,{baseline:"middle"}),e.text("Precio a pagar",t.left+4*f+d,n+s/2-2,{baseline:"middle"}),e.text("a Multidestinos",t.left+4*f+d,n+s/2+2,{baseline:"middle"});const $e=parseFloat(o.suplemento)||0,Ue=parseFloat(o.totalPrecioCliente)||0,He=$e>0?Ue+$e:Ue,se=K(He).format("$0,0");e.text(se,t.left+5*f+d,n+s/2,{baseline:"middle"}),n+=s+10;const re=t.left;let B=n+5;const je=190;let ce=30;e.setFontSize(7),e.setLineWidth(.5);const _e="PARA CONFIRMACIONES SE DEBE ENVIAR DEPOSITO DEL 50% DEL VALOR DEL PLAN Y EL SALDO 30 DIAS ANTES DE LA SALIDA, SI LA FECHA DE VIAJES CERCANA SE DEBE CANCELAR EL 100%. LOS SERVICIOS DEJADOS DE TOMAR NO SON REMBOLSABLES. LA CANCELACI\xD3N CON 18 DIAS ANTES DE VIAJE LA PENALIDAD SERA DEL 100% DEL VALOR DEL PLAN, LOS TIQUETES NO SON REEMBOLSABLE, NI ENDOSABLES, PENALIDAD POR CAMBIO (FECHA, NOMBRE, HORA, RUTAS) 200.000. ESTAS POLITICAS ESTAN PUBLICADAS DE MANERA CLARA Y ESPECIFICA EN NUESTRA PAGINA WWW.MULTIDESTINOSEXPRESS.COM. *TARIFAS SUJETA A CAMBIO Y DISPONIBILIDAD SIN PREVIO AVISO*",Ye=e.splitTextToSize(_e,je-10);B+ce>ge-t.bottom&&(e.addPage(),n=t.top,B=n+5),e.text("Deposito y Condiciones de Pago",re+5,B+3),e.setFontSize(6);const i=5;ce=20+Ye.length*i,e.rect(re,B,je,ce),Ye.forEach((a,l)=>{e.text(a,re+5,B+10+l*i)}),n+=ce+5;const r=e.output("blob");return e.save(`cotizacion_${m}.pdf`),r}catch(D){console.error("Error al descargar cotizaci\xF3n:",D)}}},async mounted(){try{const m=await x.get("https://backmultidestinos.onrender.com/liquidacion");this.rows=m.data}catch(m){console.error("Error al obtener las liquidaciones:",m)}}},vt={class:"row q-col-gutter-md"},Ft={class:"col-12"},wt=de("div",{class:"text-h6"},"Liquidaciones",-1),Vt={class:"row"},Mt={class:"col-6"},Ht={class:"col-6"};function jt(m,b,D,J,P,ee){return Tt(),Ct(It,{padding:""},{default:v(()=>[de("div",vt,[de("div",Ft,[F(zt,null,{default:v(()=>[F(ft,null,{default:v(()=>[wt]),_:1}),F(ft,null,{default:v(()=>[de("div",Vt,[de("div",Mt,[F(bt,{modelValue:P.filterId,"onUpdate:modelValue":b[0]||(b[0]=S=>P.filterId=S),label:"Filtrar por ID de Cotizaci\xF3n",filled:"",dense:"",clearable:""},null,8,["modelValue"])]),de("div",Ht,[F(Dt,{modelValue:P.filterStatus,"onUpdate:modelValue":b[1]||(b[1]=S=>P.filterStatus=S),options:P.statusOptions,label:"Filtrar por Status",filled:"",dense:"",clearable:"","emit-value":"","map-options":""},null,8,["modelValue","options"])])])]),_:1}),F(ft,null,{default:v(()=>[F(Lt,{title:"Lista de Liquidaciones",rows:ee.filteredRows,columns:P.columns,"row-key":"id"},{"body-cell-tieneImpuestos":v(S=>[F(mt,{props:S},{default:v(()=>[gt(pt(S.row.impuestosLiq==="1"?"S\xED":"No"),1)]),_:2},1032,["props"])]),"body-cell-status":v(S=>[F(mt,{props:S},{default:v(()=>[F(Ot,{color:ee.chipColor(S.row.status),"text-color":"white"},{default:v(()=>[gt(pt(S.row.status),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-acciones":v(S=>[F(mt,{props:S},{default:v(()=>[F(Pt,{onClick:Be=>ee.descargarLiquidacionN(S.row),color:"primary",label:"Descargar Liquidacion"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),_:1})]),_:1})])])]),_:1})}var Ut=xt(Rt,[["render",jt]]);export{Ut as default};

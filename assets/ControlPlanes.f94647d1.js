import{ad as te,ax as v,bi as A,bj as W,bk as X,a0 as T,a1 as q,a2 as l,ak as Y,a5 as r,af as h,am as w,al as y,ay as _,az as D,an as d,aj as c,ao as j,aD as M,aE as H,aA as V,ag as Z,M as N,a3 as O,a4 as S,bl as B,a6 as k,a8 as I,a9 as b,ah as R,bg as Q,bm as $,bn as L,bo as ee,a7 as oe,aB as z,aC as K,aG as F,aq as J,be as G}from"./index.5b79f678.js";const ae={data(){return{opcionesAcomodacion:[{label:"Sencilla",value:"sencilla"},{label:"Doble",value:"doble"},{label:"Triple",value:"triple"},{label:"Cu\xE1druple",value:"cuadruple"},{label:"Qu\xEDntuple",value:"quintuple"},{label:"S\xE9xtuple",value:"sextuple"}],opcionesPertenece:["Bogota","Cali","Medellin","Porcion Terrestre","San Andres"],opcionesNoches:[{label:"1 noche",value:"1 noche"},{label:"2 noches",value:"2 noches"},{label:"3 noches",value:"3 noches"},{label:"4 noches",value:"4 noches"},{label:"5 noches",value:"5 noches"}],nuevoPlanPertenece:"",nuevoPlanDestino:"",nuevoPlanNombrePrograma:"",nuevosHoteles:[],nuevoHotelInput:"",nuevasNoches:[],nuevaNocheInput:"",nuevasAcomodaciones:[],nuevaAcomodacionInput:"",nuevoPlanPlan:"",mostrarModalEditar:!1,planEditando:null,perteneceEditar:"",destinoEditar:"",nombreProgramaEditar:"",hotelesEditar:[],planEditar:"",nochesEditar:[],acomodacionEditar:[],nuevoHotel:"",nuevaNoche:"",nuevaAcomodacion:"",pertenece:"",destino:"",nombrePrograma:"",hotel:"",plan:"",noches:"",baseComisionable:"",baseTiqueta:"",acomodacion:"",fechaBloqueo:"",vigenciaInicio:null,vigenciaFinal:null,incluye:"",noIncluye:"",notas:"",planEditandoId:null,planes:[],columnas:[{name:"pertenece",label:"Pertenece",align:"left",sortable:!0,field:a=>a.pertenece},{name:"destino",label:"Destino",align:"left",sortable:!0,field:a=>a.destino},{name:"nombrePrograma",label:"Nombre del Programa",align:"left",field:a=>a.nombrePrograma},{name:"hotel",label:"Hotel",align:"left",field:a=>a.hotel},{name:"plan",label:"Plan",align:"left",field:a=>a.plan},{name:"noches",label:"Noches",align:"left",field:a=>a.noches},{name:"acomodacion",label:"Acomodaci\xF3n",align:"left",field:a=>a.acomodacion},{name:"acciones",label:"Acciones",align:"center"}],columnasHoteles:[{name:"hotel",label:"Hotel",field:"hotel"},{name:"noches",label:"Noches",field:"noches"},{name:"tipoHabitacion",label:"Tipo de Habitaci\xF3n",field:"tipoHabitacion"}],mostrarModalAgregarTiquete:!1,nuevoTiqueteSalida:"",nuevoTiquetePertenece:"",nuevoTiqueteNeta:"",nuevoTiqueteTasas:"",nuevoTiqueteIva:"",nuevoTiqueteTotal:"",mostrarModalEditarTiquete:!1,tiqueteEditando:null,salidaEditar:"",perteneceTiqueteEditar:"",netaEditar:"",tasasEditar:"",ivaTiqueteEditar:"",totalTiqueteEditar:"",tiquetes:[],columnasTiquete:[{name:"salida",label:"Salida",field:"salida",sortable:!0},{name:"pertenece",label:"Pertenece",field:"pertenece",sortable:!0},{name:"neta",label:"Neta",field:"neta",sortable:!0},{name:"tasas",label:"Tasas",field:"tasas",sortable:!0},{name:"iva",label:"IVA",field:"iva",sortable:!0},{name:"total",label:"Total",field:"total",sortable:!0},{name:"acciones",label:"Acciones",align:"center"}],pagination:{rowsPerPage:10},mostrarModalAgregarTransporte:!1,nuevoTransportePertenece:"",nuevoTransporteDestino:"",nuevoTransporteNombrePrograma:"",nuevoTransporteCombus:"",nuevoTransporteTasa:"",nuevoTransporteIva:"",nuevoTransporteTa:"",nuevoTransporteIvaTa:"",nuevoTransporteOtros:"",nuevoTransporteTotal:"",nuevoTransportePorcionTerrestreBaja:"",nuevoTransportePorcionTerrestreAlta:"",mostrarModalEditarTransporte:!1,transporteEditando:null,perteneceTransporteEditar:"",destinoTransporteEditar:"",nombreProgramaTransporteEditar:"",combusEditar:"",tasaTransporteEditar:"",ivaTransporteEditar:"",taEditar:"",ivaTaEditar:"",otrosEditar:"",totalTransporteEditar:"",porcionTerrestreBajaEditar:"",porcionTerrestreAltaEditar:"",transportes:[],columnasTransporte:[{name:"pertenece",label:"Pertenece",field:"pertenece",sortable:!0},{name:"destino",label:"Destino",field:"destino",sortable:!0},{name:"combus",label:"Combustible",field:"combus",sortable:!0},{name:"tasa",label:"Tasa",field:"tasa",sortable:!0},{name:"iva",label:"IVA",field:"iva",sortable:!0},{name:"ta",label:"TA",field:"ta",sortable:!0},{name:"ivaTa",label:"IVA TA",field:"ivaTa",sortable:!0},{name:"otros",label:"Otros",field:"otros",sortable:!0},{name:"total",label:"Total",field:"total",sortable:!0},{name:"acciones",label:"Acciones",align:"center"}],procesando:!1,archivoExcel:null,columnasRequeridas:["id","pertenece","destino","nombrePrograma","hotel","plan","noches","baseComisionable","baseTiqueta","acomodacion"],mostrarModalImportar:!1,MostrarFormato:!1,descargando:!1,mostrarModalAgregar:!1}},computed:{formValidoEditar(){return this.perteneceEditar&&this.destinoEditar&&this.nombreProgramaEditar&&this.hotelesEditar.length>0&&this.planEditar&&this.nochesEditar.length>0&&this.acomodacionEditar.length>0}},mounted(){this.cargarPlanes(),this.cargarTiquetes(),this.cargarTransportes()},methods:{agregarHotelEditar(){this.nuevoHotel&&this.nuevoHotel.trim()!==""&&(console.log("M\xE9todo agregarHotelEditar ejecutado"),this.hotelesEditar.push(this.nuevoHotel.trim()),this.nuevoHotel="",this.$forceUpdate())},eliminarHotelEditar(a){const o=this.hotelesEditar.indexOf(a);o>-1&&this.hotelesEditar.splice(o,1)},agregarNocheEditar(){this.nuevaNoche&&this.nuevaNoche.trim()!==""&&(console.log("M\xE9todo agregarNocheEditar ejecutado"),this.nochesEditar.push(this.nuevaNoche.trim()),this.nuevaNoche="",this.$forceUpdate())},eliminarNocheEditar(a){const o=this.nochesEditar.indexOf(a);o>-1&&this.nochesEditar.splice(o,1)},agregarAcomodacionEditar(){this.nuevaAcomodacion&&this.nuevaAcomodacion.trim()!==""&&(console.log("M\xE9todo nuevaAcomodacion ejecutado"),this.acomodacionEditar.push(this.nuevaAcomodacion.trim()),this.nuevaAcomodacion="",this.$forceUpdate())},eliminarAcomodacionEditar(a){const o=this.acomodacionEditar.indexOf(a);o>-1&&this.acomodacionEditar.splice(o,1)},limpiarFormularioEditar(){this.planEditando=null,this.perteneceEditar="",this.destinoEditar="",this.nombreProgramaEditar="",this.hotelEditar="",this.planEditar="",this.nochesEditar="",this.acomodacionEditar="",this.incluyeEditar="",this.noIncluyeEditar=""},editarPlanSubmit(){console.log("hotelesEditar:",this.hotelesEditar),console.log("nochesEditar:",this.nochesEditar),console.log("acomodacionEditar:",this.acomodacionEditar);const a=this.hotelesEditar.join("*"),o=this.nochesEditar.join("*"),s=this.acomodacionEditar.join("*"),p={id:this.planEditando.id,pertenece:this.perteneceEditar,destino:this.destinoEditar,nombrePrograma:this.nombreProgramaEditar,hotel:a,plan:this.planEditar,noches:o,acomodacion:s,baseComisionable:this.planEditando.baseComisionable,baseTiqueta:this.planEditando.baseTiqueta,fechaBloqueo:this.planEditando.fechaBloqueo,vigenciaInicio:this.planEditando.vigenciaInicio,vigenciaFinal:this.planEditando.vigenciaFinal,incluye:this.planEditando.incluye,noIncluye:this.planEditando.noIncluye,notas:this.planEditando.notas};console.log("Datos que se enviar\xE1n al servidor:",p),fetch(`https://backmultidestinos.onrender.com/planes/${p.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}).then(t=>{if(!t.ok)throw new Error("Error al actualizar el plan");return t.json()}).then(t=>{console.log("Plan actualizado:",t);const i=this.planes.findIndex(e=>e.id===p.id);i!==-1&&(this.planes[i]=t),this.mostrarModalEditar=!1,this.limpiarFormularioEditar(),v.create({message:"Plan actualizado correctamente",color:"positive"})}).catch(t=>{console.error("Error al actualizar plan:",t),v.create({message:"Error al actualizar el plan. Por favor, int\xE9ntalo de nuevo m\xE1s tarde.",color:"negative"})})},editarPlan(a){console.log("Datos del plan recibido para editar:",a),this.planEditando=a,this.perteneceEditar=a.pertenece,this.destinoEditar=a.destino,this.nombreProgramaEditar=a.nombrePrograma,this.hotelEditar=a.hotel,this.planEditar=a.plan,this.nochesEditar=a.noches,this.acomodacionEditar=a.acomodacion,this.incluyeEditar=a.incluye,this.noIncluyeEditar=a.noIncluye,this.hotelesEditar=a.hotel?a.hotel.split("*").map(o=>o.trim()):[],this.nochesEditar=a.noches?a.noches.split("*").map(o=>o.trim()):[],this.acomodacionEditar=a.acomodacion?a.acomodacion.split("*").map(o=>o.trim()):[],this.mostrarModalEditar=!0},cargarPlanes(){fetch("https://backmultidestinos.onrender.com/planes").then(a=>{if(!a.ok)throw new Error("Error al obtener los planes desde la API");return a.json()}).then(a=>{this.planes=a}).catch(a=>{console.error("Error al cargar planes:",a),v.create({message:"Error al cargar los planes. Por favor, int\xE9ntalo de nuevo m\xE1s tarde.",color:"negative"})}),this.cargarHoteles()},cargarHoteles(){fetch("https://backmultidestinos.onrender.com/hoteles").then(a=>{if(!a.ok)throw new Error("Error al obtener los hoteles desde la API");return a.json()}).then(a=>{this.hoteles=a}).catch(a=>{console.error("Error al cargar hoteles:",a),v.create({message:"Error al cargar los hoteles. Por favor, int\xE9ntalo de nuevo m\xE1s tarde.",color:"negative"})})},verDetallesPlan(a){this.$router.push({name:"DetallesPlan",params:{id:a}})},submitForm(){},eliminarPlan(a){},agregarHotel(){this.nuevoHotel&&this.nuevoHotel.trim()!==""&&(this.$set(this.hoteles,this.hoteles.length,this.nuevoHotel.trim()),this.nuevoHotel="")},agregarNoche(){this.nuevaNoche&&this.nuevaNoche.trim()!==""&&(this.$set(this.noches,this.noches.length,this.nuevaNoche.trim()),this.nuevaNoche="")},agregarAcomodacion(){this.nuevaAcomodacion&&this.nuevaAcomodacion.trim()!==""&&(this.$set(this.acomodacion,this.acomodacion.length,this.nuevaAcomodacion.trim()),this.nuevaAcomodacion="")},agregarNuevoHotel(){this.nuevoHotelInput&&this.nuevoHotelInput.trim()!==""&&(this.nuevosHoteles.push(this.nuevoHotelInput.trim()),this.nuevoHotelInput="")},eliminarNuevoHotel(a){const o=this.nuevosHoteles.indexOf(a);o>-1&&this.nuevosHoteles.splice(o,1)},agregarNuevaNoche(){this.nuevaNocheInput&&this.nuevaNocheInput.trim()!==""&&(this.nuevasNoches.push(this.nuevaNocheInput.trim()),this.nuevaNocheInput="")},eliminarNuevaNoche(a){const o=this.nuevasNoches.indexOf(a);o>-1&&this.nuevasNoches.splice(o,1)},agregarNuevaAcomodacion(){this.nuevaAcomodacionInput&&this.nuevaAcomodacionInput.trim()!==""&&(this.nuevasAcomodaciones.push(this.nuevaAcomodacionInput.trim()),this.nuevaAcomodacionInput="")},eliminarNuevaAcomodacion(a){const o=this.nuevasAcomodaciones.indexOf(a);o>-1&&this.nuevasAcomodaciones.splice(o,1)},agregarPlanSubmit(){const a=this.nuevosHoteles.join("*"),o=this.nuevasNoches.join("*"),s=this.nuevasAcomodaciones.join("*"),p={pertenece:this.nuevoPlanPertenece,destino:this.nuevoPlanDestino,nombrePrograma:this.nuevoPlanNombrePrograma,hotel:a,plan:this.nuevoPlanPlan,noches:o,acomodacion:s,baseComisionable:this.baseComisionable||null,baseTiqueta:this.baseTiqueta||null,fechaBloqueo:this.fechaBloqueo||null,vigenciaInicio:this.vigenciaInicio||null,vigenciaFinal:this.vigenciaFinal||null,incluye:this.incluye||null,noIncluye:this.noIncluye||null,notas:this.notas||null};console.log("Datos que se enviar\xE1n al servidor:",p),fetch("https://backmultidestinos.onrender.com/planes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}).then(t=>{if(!t.ok)throw new Error("Error al agregar el plan");return t.json()}).then(t=>{console.log("Plan agregado:",t),this.planes.push(t),this.mostrarModalAgregar=!1,this.limpiarFormularioAgregar(),v.create({message:"Plan agregado correctamente",color:"positive"})}).catch(t=>{console.error("Error al agregar plan:",t),v.create({message:"Error al agregar el plan. Por favor, int\xE9ntalo de nuevo m\xE1s tarde.",color:"negative"})})},limpiarFormularioAgregar(){this.nuevoPlanPertenece="",this.nuevoPlanDestino="",this.nuevoPlanNombrePrograma="",this.nuevosHoteles=[],this.nuevoHotelInput="",this.nuevasNoches=[],this.nuevaNocheInput="",this.nuevasAcomodaciones=[],this.nuevaAcomodacionInput="",this.nuevoPlanPlan=""},cargarTiquetes(){fetch("https://backmultidestinos.onrender.com/tiquete").then(a=>{if(!a.ok)throw new Error("Error al obtener los tiquetes desde la API");return a.json()}).then(a=>{this.tiquetes=a}).catch(a=>{console.error("Error al cargar tiquetes:",a),v.create({message:"Error al cargar los tiquetes. Por favor, int\xE9ntalo de nuevo m\xE1s tarde.",color:"negative"})})},agregarTiqueteSubmit(){const a={salida:this.nuevoTiqueteSalida,pertenece:this.nuevoTiquetePertenece,neta:this.nuevoTiqueteNeta,tasas:this.nuevoTiqueteTasas,iva:this.nuevoTiqueteIva,total:this.nuevoTiqueteTotal};fetch("https://backmultidestinos.onrender.com/tiquete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(o=>{if(!o.ok)throw new Error("Error al agregar el tiquete");return o.json()}).then(o=>{console.log("Tiquete agregado:",o),this.tiquetes.push(o),this.mostrarModalAgregarTiquete=!1,this.limpiarFormularioTiquete(),v.create({message:"Tiquete agregado correctamente",color:"positive"})}).catch(o=>{console.error("Error al agregar tiquete:",o),v.create({message:"Error al agregar el tiquete. Por favor, int\xE9ntalo de nuevo m\xE1s tarde.",color:"negative"})})},limpiarFormularioTiquete(){this.nuevoTiqueteSalida="",this.nuevoTiquetePertenece="",this.nuevoTiqueteNeta="",this.nuevoTiqueteTasas="",this.nuevoTiqueteIva="",this.nuevoTiqueteTotal=""},editarTiquete(a){this.tiqueteEditando=a,this.salidaEditar=a.salida,this.perteneceTiqueteEditar=a.pertenece,this.netaEditar=a.neta,this.tasasEditar=a.tasas,this.ivaTiqueteEditar=a.iva,this.totalTiqueteEditar=a.total,this.mostrarModalEditarTiquete=!0},editarTiqueteSubmit(){const a={id:this.tiqueteEditando.id,salida:this.salidaEditar,pertenece:this.perteneceTiqueteEditar,neta:this.netaEditar,tasas:this.tasasEditar,iva:this.ivaTiqueteEditar,total:this.totalTiqueteEditar};fetch(`https://backmultidestinos.onrender.com/tiquete/${a.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(o=>{if(!o.ok)throw new Error("Error al actualizar el tiquete");return o.json()}).then(o=>{console.log("Tiquete actualizado:",o);const s=this.tiquetes.findIndex(p=>p.id===a.id);s!==-1&&(this.tiquetes[s]=o),this.mostrarModalEditarTiquete=!1,this.tiqueteEditando=null,v.create({message:"Tiquete actualizado correctamente",color:"positive"})}).catch(o=>{console.error("Error al actualizar el tiquete:",o),v.create({message:"Error al actualizar el tiquete. Por favor, int\xE9ntalo de nuevo m\xE1s tarde.",color:"negative"})})},eliminarTiquete(a){confirm("\xBFEst\xE1s seguro de que quieres eliminar este tiquete?")&&fetch(`https://backmultidestinos.onrender.com/tiquete/${a}`,{method:"DELETE"}).then(o=>{if(!o.ok)throw new Error("Error al eliminar el tiquete");return o.json()}).then(()=>{this.tiquetes=this.tiquetes.filter(o=>o.id!==a),v.create({message:"Tiquete eliminado correctamente",color:"positive"})}).catch(o=>{console.error("Error al eliminar el tiquete:",o),v.create({message:"Error al eliminar el tiquete. Por favor, int\xE9ntalo de nuevo m\xE1s tarde.",color:"negative"})})},cargarTransportes(){fetch("https://backmultidestinos.onrender.com/transporte").then(a=>{if(!a.ok)throw new Error("Error al obtener los transportes desde la API");return a.json()}).then(a=>{this.transportes=a}).catch(a=>{console.error("Error al cargar transportes:",a),v.create({message:"Error al cargar los transportes. Por favor, int\xE9ntalo de nuevo m\xE1s tarde.",color:"negative"})})},agregarTransporteSubmit(){const a={pertenece:this.nuevoTransportePertenece,destino:this.nuevoTransporteDestino,nombrePrograma:null,combus:this.nuevoTransporteCombus,tasa:this.nuevoTransporteTasa,iva:this.nuevoTransporteIva,ta:this.nuevoTransporteTa,ivaTa:this.nuevoTransporteIvaTa,otros:this.nuevoTransporteOtros,total:this.nuevoTransporteTotal,porcionTerrestreBaja:null,porcionTerrestreAlta:null};fetch("https://backmultidestinos.onrender.com/transporte",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(o=>{if(!o.ok)throw new Error("Error al agregar el transporte");return o.json()}).then(o=>{console.log("Transporte agregado:",o),this.transportes.push(o),this.mostrarModalAgregarTransporte=!1,this.limpiarFormularioTransporte(),v.create({message:"Transporte agregado correctamente",color:"positive"})}).catch(o=>{console.error("Error al agregar transporte:",o),v.create({message:"Error al agregar el transporte. Por favor, int\xE9ntalo de nuevo m\xE1s tarde.",color:"negative"})})},limpiarFormularioTransporte(){this.nuevoTransportePertenece="",this.nuevoTransporteDestino="",this.nuevoTransporteNombrePrograma="",this.nuevoTransporteCombus="",this.nuevoTransporteTasa="",this.nuevoTransporteIva="",this.nuevoTransporteTa="",this.nuevoTransporteIvaTa="",this.nuevoTransporteOtros="",this.nuevoTransporteTotal="",this.nuevoTransportePorcionTerrestreBaja="",this.nuevoTransportePorcionTerrestreAlta=""},editarTransporte(a){this.transporteEditando=a,this.perteneceTransporteEditar=a.pertenece,this.destinoTransporteEditar=a.destino,this.nombreProgramaTransporteEditar=null,this.combusEditar=a.combus,this.tasaTransporteEditar=a.tasa,this.ivaTransporteEditar=a.iva,this.taEditar=a.ta,this.ivaTaEditar=a.ivaTa,this.otrosEditar=a.otros,this.totalTransporteEditar=a.total,this.porcionTerrestreBajaEditar=null,this.porcionTerrestreAltaEditar=null,this.mostrarModalEditarTransporte=!0},editarTransporteSubmit(){const a={id:this.transporteEditando.id,pertenece:this.perteneceTransporteEditar,destino:this.destinoTransporteEditar,nombrePrograma:this.nombreProgramaTransporteEditar,combus:this.combusEditar,tasa:this.tasaTransporteEditar,iva:this.ivaTransporteEditar,ta:this.taEditar,ivaTa:this.ivaTaEditar,otros:this.otrosEditar,total:this.totalTransporteEditar,porcionTerrestreBaja:this.porcionTerrestreBajaEditar,porcionTerrestreAlta:this.porcionTerrestreAltaEditar};fetch(`https://backmultidestinos.onrender.com/transporte/${a.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(o=>{if(!o.ok)throw new Error("Error al actualizar el transporte");return o.json()}).then(o=>{console.log("Transporte actualizado:",o);const s=this.transportes.findIndex(p=>p.id===a.id);s!==-1&&(this.transportes[s]=o),this.mostrarModalEditarTransporte=!1,this.transporteEditando=null,v.create({message:"Transporte actualizado correctamente",color:"positive"})}).catch(o=>{console.error("Error al actualizar el transporte:",o),v.create({message:"Error al actualizar el transporte. Por favor, int\xE9ntalo de nuevo m\xE1s tarde.",color:"negative"})})},eliminarTransporte(a){confirm("\xBFEst\xE1s seguro de que quieres eliminar este transporte?")&&fetch(`https://backmultidestinos.onrender.com/transporte/${a}`,{method:"DELETE"}).then(o=>{if(!o.ok)throw new Error("Error al eliminar el transporte");return o.json()}).then(()=>{this.transportes=this.transportes.filter(o=>o.id!==a),v.create({message:"Transporte eliminado correctamente",color:"positive"})}).catch(o=>{console.error("Error al eliminar el transporte:",o),v.create({message:"Error al eliminar el transporte. Por favor, int\xE9ntalo de nuevo m\xE1s tarde.",color:"negative"})})},abrirModalFormato(){this.MostrarFormato=!0},async descargarExcel(a){try{this.descargando=!0;let o,s=[];if(a==="existente"){const m=await fetch("https://backmultidestinos.onrender.com/planes",{headers:{Accept:"application/json"}});if(!m.ok)throw new Error(`Error en la respuesta del servidor: ${m.status}`);s=await m.json(),o=["id",...this.columnasRequeridas]}else o=this.columnasRequeridas.filter(m=>m!=="id");const p=s.map(m=>o.reduce((P,f)=>(f==="id"?P[f]=m[f]||"":["baseComisionable","baseTiqueta","noches"].includes(f)?P[f]=m[f]||0:P[f]=m[f]||"",P),{}));a==="nuevo"&&p.push(o.reduce((m,C)=>(m[C]="",m),{}));const t=A.json_to_sheet(p),i=String.fromCharCode(64+o.length);t["!autofilter"]={ref:`A1:${i}1`},t["!cols"]=o.map(m=>m==="id"?{wch:10}:["nombrePrograma","hotel","plan"].includes(m)?{wch:30}:["baseComisionable","baseTiqueta","noches"].includes(m)?{wch:15}:{wch:20});const e=A.book_new();A.book_append_sheet(e,t,a==="existente"?"DatosExistentes":"NuevoFormato");const u=W(e,{bookType:"xlsx",type:"array",compression:!0}),g=new Blob([u],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),E=new Date().toISOString().split("T")[0],n=a==="existente"?`formato_planes_existentes_${E}.xlsx`:`formato_planes_nuevos_${E}.xlsx`,U=URL.createObjectURL(g),x=document.createElement("a");x.href=U,x.download=n,document.body.appendChild(x),x.click(),document.body.removeChild(x),setTimeout(()=>URL.revokeObjectURL(U),100),this.$q.notify({type:"positive",message:"Formato descargado exitosamente",position:"top",timeout:3e3}),this.MostrarFormato=!1}catch(o){console.error("Error al descargar el formato:",o),this.$q.notify({type:"negative",message:`Error al descargar el formato: ${o.message}`,position:"top",timeout:5e3})}finally{this.descargando=!1}},async leerArchivoExcel(a){return new Promise((o,s)=>{if(!a)return s(new Error("No se ha seleccionado un archivo."));if(a.type!=="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")return s(new Error("El archivo no es un archivo Excel v\xE1lido. Aseg\xFArate de seleccionar un archivo .xlsx."));const p=new FileReader;p.onload=t=>{try{const i=new Uint8Array(t.target.result),e=X(i,{type:"array"});if(!e.SheetNames||e.SheetNames.length===0)throw new Error("El archivo Excel est\xE1 vac\xEDo o no contiene hojas v\xE1lidas.");const u=e.Sheets[e.SheetNames[0]];let g=A.sheet_to_json(u,{raw:!1,defval:""});if(g.length===0)throw new Error("El archivo Excel no contiene datos v\xE1lidos.");let E=0;g=g.map(n=>(!n.id||isNaN(Number(n.id))?n.id=++E:(n.id=Number(n.id),E=Math.max(E,n.id)),{id:n.id,pertenece:String(n.pertenece||""),destino:String(n.destino||""),nombrePrograma:String(n.nombrePrograma||""),hotel:String(n.hotel||""),plan:String(n.plan||""),noches:n.noches?String(n.noches):"",baseComisionable:n.baseComisionable?Number(n.baseComisionable):0,baseTiqueta:n.baseTiqueta?Number(n.baseTiqueta):0,acomodacion:String(n.acomodacion||"")})),o(g)}catch(i){s(new Error("Error al procesar el archivo Excel: "+i.message))}},p.onerror=()=>{s(new Error("Error al leer el archivo. Verifica que el archivo no est\xE9 corrupto o vac\xEDo."))},p.readAsArrayBuffer(a)})},async importarDatosNuevo(){try{if(!this.archivoExcel)throw new Error("No se ha seleccionado un archivo Excel.");console.log("Archivo seleccionado:",this.archivoExcel),this.procesando=!0,console.log("Iniciando la importaci\xF3n de nuevos datos...");const a=await this.leerArchivoExcel(this.archivoExcel);if(a.length===0)throw new Error("El archivo no contiene datos v\xE1lidos para importar.");const o=a.map(s=>((!s.id||isNaN(s.id))&&(s.id=null),s));console.log("Datos procesados:",o),await this.guardarEnBaseDeDatos(o,"nuevo"),this.mostrarModalImportar=!1}catch(a){console.error("Error al importar datos:",a),this.$q.notify({type:"negative",message:`Error: ${a.message}`,position:"top",timeout:5e3})}finally{this.procesando=!1}},async importarDatosExistente(){try{if(!this.archivoExcel)throw new Error("No se ha seleccionado un archivo Excel.");console.log("Archivo seleccionado:",this.archivoExcel),this.procesando=!0,console.log("Iniciando la actualizaci\xF3n de datos...");const a=await this.leerArchivoExcel(this.archivoExcel);if(a.length===0)throw new Error("El archivo no contiene datos v\xE1lidos para actualizar.");console.log("Datos procesados:",a),await this.guardarEnBaseDeDatos(a,"actualizar"),this.mostrarModalImportar=!1}catch(a){console.error("Error al actualizar datos:",a),this.$q.notify({type:"negative",message:`Error: ${a.message}`,position:"top",timeout:5e3})}finally{this.procesando=!1}},async guardarEnBaseDeDatos(a,o){try{const s=await fetch("https://backmultidestinos.onrender.com/planes");if(!s.ok)throw new Error(`Error al obtener los datos. Estado: ${s.status}`);const p=await s.json(),t=a.map(u=>{const g=p.find(E=>E.id===u.id);return o==="nuevo"||!g?{...u,id:null}:u}),i=await fetch("http://localhost:8010/planes/procesar-lote",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planes:t})});if(!i.ok){const u=await i.json();throw new Error(`Error al procesar los datos: ${u.mensaje||i.statusText}`)}const e=await i.json();return this.$q.notify({type:"positive",message:"Accion realizada con exito",position:"top",timeout:3e3}),e}catch(s){throw console.error("Error al guardar los datos en la base de datos:",s),this.$q.notify({type:"negative",message:`Error al guardar los datos: ${s.message}`,position:"top",timeout:5e3}),s}},abrir_Modal_Formato(){this.MostrarFormato=!0},async descargar_Excel(a){try{this.descargando=!0;let o,s=[];if(a==="existente"){const m=await fetch("https://backmultidestinos.onrender.com/planes",{headers:{Accept:"application/json"}});if(!m.ok)throw new Error(`Error en la respuesta del servidor: ${m.status}`);s=await m.json(),o=["id",...this.columnasRequeridas]}else o=this.columnasRequeridas.filter(m=>m!=="id");const p=s.map(m=>o.reduce((P,f)=>(f==="id"?P[f]=m[f]||"":["baseComisionable","baseTiqueta","noches"].includes(f)?P[f]=m[f]||0:P[f]=m[f]||"",P),{}));a==="nuevo"&&p.push(o.reduce((m,C)=>(m[C]="",m),{}));const t=A.json_to_sheet(p),i=String.fromCharCode(64+o.length);t["!autofilter"]={ref:`A1:${i}1`},t["!cols"]=o.map(m=>m==="id"?{wch:10}:["nombrePrograma","hotel","plan"].includes(m)?{wch:30}:["baseComisionable","baseTiqueta","noches"].includes(m)?{wch:15}:{wch:20});const e=A.book_new();A.book_append_sheet(e,t,a==="existente"?"DatosExistentes":"NuevoFormato");const u=W(e,{bookType:"xlsx",type:"array",compression:!0}),g=new Blob([u],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),E=new Date().toISOString().split("T")[0],n=a==="existente"?`formato_planes_existentes_${E}.xlsx`:`formato_planes_nuevos_${E}.xlsx`,U=URL.createObjectURL(g),x=document.createElement("a");x.href=U,x.download=n,document.body.appendChild(x),x.click(),document.body.removeChild(x),setTimeout(()=>URL.revokeObjectURL(U),100),this.$q.notify({type:"positive",message:"Formato descargado exitosamente",position:"top",timeout:3e3}),this.MostrarFormato=!1}catch(o){console.error("Error al descargar el formato:",o),this.$q.notify({type:"negative",message:`Error al descargar el formato: ${o.message}`,position:"top",timeout:5e3})}finally{this.descargando=!1}},async leer_Archivo_Excel(a){return new Promise((o,s)=>{if(!a)return s(new Error("No se ha seleccionado un archivo."));if(a.type!=="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")return s(new Error("El archivo no es un archivo Excel v\xE1lido. Aseg\xFArate de seleccionar un archivo .xlsx."));const p=new FileReader;p.onload=t=>{try{const i=new Uint8Array(t.target.result),e=X(i,{type:"array"});if(!e.SheetNames||e.SheetNames.length===0)throw new Error("El archivo Excel est\xE1 vac\xEDo o no contiene hojas v\xE1lidas.");const u=e.Sheets[e.SheetNames[0]];let g=A.sheet_to_json(u,{raw:!1,defval:""});if(g.length===0)throw new Error("El archivo Excel no contiene datos v\xE1lidos.");let E=0;g=g.map(n=>(!n.id||isNaN(Number(n.id))?n.id=++E:(n.id=Number(n.id),E=Math.max(E,n.id)),{id:n.id,pertenece:String(n.pertenece||""),destino:String(n.destino||""),nombrePrograma:String(n.nombrePrograma||""),hotel:String(n.hotel||""),plan:String(n.plan||""),noches:n.noches?String(n.noches):"",baseComisionable:n.baseComisionable?Number(n.baseComisionable):0,baseTiqueta:n.baseTiqueta?Number(n.baseTiqueta):0,acomodacion:String(n.acomodacion||"")})),o(g)}catch(i){s(new Error("Error al procesar el archivo Excel: "+i.message))}},p.onerror=()=>{s(new Error("Error al leer el archivo. Verifica que el archivo no est\xE9 corrupto o vac\xEDo."))},p.readAsArrayBuffer(a)})},async importar_Nuevo(){try{if(!this.archivoExcel)throw new Error("No se ha seleccionado un archivo Excel.");console.log("Archivo seleccionado:",this.archivoExcel),this.procesando=!0,console.log("Iniciando la importaci\xF3n de nuevos datos...");const a=await this.leerArchivoExcel(this.archivoExcel);if(a.length===0)throw new Error("El archivo no contiene datos v\xE1lidos para importar.");const o=a.map(s=>((!s.id||isNaN(s.id))&&(s.id=null),s));console.log("Datos procesados:",o),await this.guardarEnBaseDeDatos(o,"nuevo"),this.mostrarModalImportar=!1}catch(a){console.error("Error al importar datos:",a),this.$q.notify({type:"negative",message:`Error: ${a.message}`,position:"top",timeout:5e3})}finally{this.procesando=!1}},async importarDatosExistentes(){try{if(!this.archivoExcel)throw new Error("No se ha seleccionado un archivo Excel.");console.log("Archivo seleccionado:",this.archivoExcel),this.procesando=!0,console.log("Iniciando la actualizaci\xF3n de datos...");const a=await this.leerArchivoExcel(this.archivoExcel);if(a.length===0)throw new Error("El archivo no contiene datos v\xE1lidos para actualizar.");console.log("Datos procesados:",a),await this.guardarEnBaseDeDatos(a,"actualizar"),this.mostrarModalImportar=!1}catch(a){console.error("Error al actualizar datos:",a),this.$q.notify({type:"negative",message:`Error: ${a.message}`,position:"top",timeout:5e3})}finally{this.procesando=!1}},async guardarDatoss(a,o){try{const s=await fetch("https://backmultidestinos.onrender.com/planes");if(!s.ok)throw new Error(`Error al obtener los datos. Estado: ${s.status}`);const p=await s.json(),t=a.map(u=>{const g=p.find(E=>E.id===u.id);return o==="nuevo"||!g?{...u,id:null}:u}),i=await fetch("http://localhost:8010/planes/procesar-lote",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planes:t})});if(!i.ok){const u=await i.json();throw new Error(`Error al procesar los datos: ${u.mensaje||i.statusText}`)}const e=await i.json();return this.$q.notify({type:"positive",message:"Accion realizada con exito",position:"top",timeout:3e3}),e}catch(s){throw console.error("Error al guardar los datos en la base de datos:",s),this.$q.notify({type:"negative",message:`Error al guardar los datos: ${s.message}`,position:"top",timeout:5e3}),s}}}},re=c("h6",{class:"q-mt-lg"},"Planes",-1),le={class:"q-mb-md col-12"},se=c("label",{class:"q-mb-sm"},"Hoteles",-1),ie={class:"row q-gutter-sm items-center"},ne={class:"row q-col-gutter-sm"},de={class:"q-mb-md col-12"},ue=c("label",{for:"nochesSelect",class:"q-mb-sm"},"Noches",-1),ce={class:"q-mb-md col-12"},me=c("label",{for:"acomodacionSelect",class:"q-mb-sm"},"Acomodaci\xF3n",-1),pe={class:"row justify-end q-mt-md"},he=c("div",{class:"text-h6 text-weight-bold"},"Seleccionar Formato",-1),ve=c("div",{class:"text-subtitle1 text-grey-7 q-mt-xs"},"\xBFQu\xE9 tipo de formato necesitas?",-1),be={class:"text-h6 flex items-center"},ge={class:"q-pa-md"},Ee={class:"chips-container"},fe={class:"chips-container"},Te={class:"chips-container"},ye={class:"q-mb-md col-12"},qe=c("label",{class:"q-mb-sm"},"Hoteles",-1),xe={class:"row q-gutter-sm items-center"},we={class:"row q-col-gutter-sm"},Ve={class:"q-mb-md col-12"},Pe=c("label",{for:"nochesSelect",class:"q-mb-sm"},"Noches",-1),Ae={class:"q-mb-md col-12"},Ne=c("label",{for:"acomodacionSelect",class:"q-mb-sm"},"Acomodaci\xF3n",-1),Se={class:"row justify-end q-mt-md"},ke=c("h6",{class:"q-mt-lg"},"Tiquete (Suplemento)",-1),Ie={class:"row justify-end q-mt-md"},Ce={class:"row justify-end q-mt-md"},_e={class:"row justify-end q-mt-md"},De={class:"row justify-end q-mt-md"},ze=c("h6",{class:"q-mt-lg"},"Transportes",-1),Ue=c("div",{class:"text-h6 text-weight-bold"},"Seleccionar Formato",-1),je=c("div",{class:"text-subtitle1 text-grey-7 q-mt-xs"},"\xBFQu\xE9 tipo de formato necesitas?",-1),Me={class:"text-h6 flex items-center"},He={class:"q-pa-md"};function Fe(a,o,s,p,t,i){return T(),q(Y,{class:"q-pa-md"},{default:l(()=>[re,r(h,{onClick:o[0]||(o[0]=e=>t.mostrarModalAgregar=!0),label:"Agregar Plan",class:"q-mb-md q-mr-sm",color:"primary"}),r(V,{modelValue:t.mostrarModalAgregar,"onUpdate:modelValue":o[8]||(o[8]=e=>t.mostrarModalAgregar=e),"content-css":"max-width: 500px;"},{default:l(()=>[r(w,null,{default:l(()=>[r(y,{class:"row items-center q-pb-none"},{default:l(()=>[r(_,{onSubmit:i.agregarPlanSubmit,class:"q-gutter-md"},{default:l(()=>[r(D,{label:"Pertenece",modelValue:t.nuevoPlanPertenece,"onUpdate:modelValue":o[1]||(o[1]=e=>t.nuevoPlanPertenece=e),options:t.opcionesPertenece,style:{width:"100%"},rules:[e=>!!e||"El campo Pertenece es obligatorio"],"emit-value":"","map-options":""},null,8,["modelValue","options","rules"]),r(d,{label:"Destino",modelValue:t.nuevoPlanDestino,"onUpdate:modelValue":o[2]||(o[2]=e=>t.nuevoPlanDestino=e),rules:[e=>!!e||"El campo Destino es obligatorio"],"lazy-rules":"",style:{width:"100%"}},null,8,["modelValue","rules"]),r(d,{label:"Nombre del Programa",modelValue:t.nuevoPlanNombrePrograma,"onUpdate:modelValue":o[3]||(o[3]=e=>t.nuevoPlanNombrePrograma=e),rules:[e=>!!e||"El campo Nombre del Programa es obligatorio"],"lazy-rules":"",style:{width:"100%"}},null,8,["modelValue","rules"]),c("div",le,[se,c("div",ie,[(T(!0),j(H,null,M(t.nuevosHoteles,e=>(T(),q(F,{key:e,removable:"",onRemove:u=>i.eliminarNuevoHotel(e),label:e,class:"q-ma-xs",color:"primary","text-color":"white"},null,8,["onRemove","label"]))),128))]),c("div",ne,[r(d,{modelValue:t.nuevoHotelInput,"onUpdate:modelValue":o[4]||(o[4]=e=>t.nuevoHotelInput=e),placeholder:"Agregar hotel",dense:"",outlined:"",class:"col-grow",style:{"padding-top":"15px"}},null,8,["modelValue"]),r(h,{onClick:i.agregarNuevoHotel,label:"Agregar",color:"primary"},null,8,["onClick"])])]),c("div",de,[ue,r(D,{multiple:"",modelValue:t.nuevasNoches,"onUpdate:modelValue":o[5]||(o[5]=e=>t.nuevasNoches=e),options:t.opcionesNoches,style:{width:"100%"},"emit-value":"","map-options":"","option-value":"value","option-label":"label","input-debounce":"0"},null,8,["modelValue","options"])]),c("div",ce,[me,r(D,{multiple:"",modelValue:t.nuevasAcomodaciones,"onUpdate:modelValue":o[6]||(o[6]=e=>t.nuevasAcomodaciones=e),options:t.opcionesAcomodacion,style:{width:"100%"},"emit-value":"","map-options":"","option-value":"value","option-label":"label","input-debounce":"0"},null,8,["modelValue","options"])]),r(d,{label:"Plan",modelValue:t.nuevoPlanPlan,"onUpdate:modelValue":o[7]||(o[7]=e=>t.nuevoPlanPlan=e),rules:[e=>!!e||"El campo Plan es obligatorio"],"lazy-rules":"",style:{width:"100%"}},null,8,["modelValue","rules"]),c("div",pe,[r(h,{type:"submit",label:"Agregar Plan",color:"primary"})])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(h,{onClick:i.abrirModalFormato,label:"Descargar Formato",class:"q-mb-md q-mr-sm",color:"primary",icon:"download"},null,8,["onClick"]),r(V,{modelValue:t.MostrarFormato,"onUpdate:modelValue":o[11]||(o[11]=e=>t.MostrarFormato=e),persistent:""},{default:l(()=>[r(w,{class:"q-pa-lg",style:{"border-radius":"12px","max-width":"500px","box-shadow":"0 8px 24px rgba(0, 0, 0, 0.3)"}},{default:l(()=>[r(y,{class:"text-center"},{default:l(()=>[he,ve]),_:1}),r(y,{class:"q-gutter-y-md"},{default:l(()=>[r(Z,{bordered:"",separator:""},{default:l(()=>[N((T(),q(O,{clickable:"",class:"hover-effect",onClick:o[9]||(o[9]=e=>i.descargarExcel("nuevo"))},{default:l(()=>[r(S,{avatar:""},{default:l(()=>[r(B,{size:"48px",class:"bg-primary text-white"},{default:l(()=>[r(k,{name:"cloud_download",size:"28px"})]),_:1})]),_:1}),r(S,null,{default:l(()=>[r(I,{class:"text-bold"},{default:l(()=>[b("Planes Nuevos")]),_:1}),r(I,{caption:""},{default:l(()=>[b("Formato para crear nuevos registros")]),_:1})]),_:1})]),_:1})),[[J]]),N((T(),q(O,{clickable:"",class:"hover-effect selected-item",onClick:o[10]||(o[10]=e=>i.descargarExcel("existente"))},{default:l(()=>[r(S,{avatar:""},{default:l(()=>[r(B,{size:"48px",class:"bg-blue-3 text-primary"},{default:l(()=>[r(k,{name:"assignment",size:"28px"})]),_:1})]),_:1}),r(S,null,{default:l(()=>[r(I,{class:"text-bold"},{default:l(()=>[b("Actualizaci\xF3n")]),_:1}),r(I,{caption:""},{default:l(()=>[b("Formato con datos existentes")]),_:1})]),_:1})]),_:1})),[[J]])]),_:1})]),_:1}),r(R),r(Q,{align:"center",class:"q-mt-md"},{default:l(()=>[N(r(h,{label:"Cancelar",color:"grey-8",flat:"",class:"full-width q-pa-md text-bold"},null,512),[[G]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(h,{onClick:o[12]||(o[12]=e=>t.mostrarModalImportar=!0),label:"Importar Datos",class:"q-mb-md",color:"positive",icon:"upload_file"}),r(V,{modelValue:t.mostrarModalImportar,"onUpdate:modelValue":o[14]||(o[14]=e=>t.mostrarModalImportar=e),persistent:"","transition-show":"scale","transition-hide":"fade"},{default:l(()=>[r(w,{style:{"min-width":"420px","border-radius":"16px","box-shadow":"0 10px 25px rgba(0, 0, 0, 0.3)"}},{default:l(()=>[r(y,{class:"bg-positive text-white"},{default:l(()=>[c("div",be,[r(k,{name:"upload_file",size:"md",class:"q-mr-sm"}),b(" Importar Datos ")])]),_:1}),r(y,{class:"q-pa-md"},{default:l(()=>[r(R,{class:"q-my-md",color:"positive"}),c("div",ge,[r($,{modelValue:t.archivoExcel,"onUpdate:modelValue":o[13]||(o[13]=e=>t.archivoExcel=e),label:"Seleccionar archivo Excel",accept:".xlsx",onRejected:a.onRejected,filled:"",color:"positive",counter:"","bottom-slots":"",class:"animated-input"},{append:l(()=>[r(k,{name:"cloud_upload",size:"md",class:"text-white"})]),hint:l(()=>[b(" Solo archivos Excel (.xlsx) ")]),_:1},8,["modelValue","onRejected"])])]),_:1}),r(Q,{align:"right",class:"q-pa-md q-gutter-md"},{default:l(()=>[N(r(h,{flat:"",label:"Cancelar",color:"grey-8",disable:t.procesando,class:"rounded-borders animated-btn"},null,8,["disable"]),[[G]]),r(h,{label:"Importar Datos Nuevos",color:"positive",onClick:i.importarDatosNuevo,loading:t.procesando,disable:!t.archivoExcel,icon:"file_upload",class:"rounded-borders animated-btn"},{loading:l(()=>[r(L,{color:"white"})]),_:1},8,["onClick","loading","disable"]),r(h,{label:"Actualizar Datos",color:"primary",onClick:i.importarDatosExistente,loading:t.procesando,disable:!t.archivoExcel,icon:"refresh",class:"rounded-borders animated-btn"},{loading:l(()=>[r(L,{color:"white"})]),_:1},8,["onClick","loading","disable"])]),_:1}),t.procesando?(T(),q(ee,{key:0,indeterminate:"",color:"positive",class:"q-mt-sm"})):oe("",!0)]),_:1})]),_:1},8,["modelValue"]),r(K,{rows:t.planes,columns:t.columnas,"row-key":"id",pagination:{rowsPerPage:5},class:"q-mt-md"},{"body-cell-hotel":l(e=>[r(z,{props:e},{default:l(()=>[c("div",Ee,[(T(!0),j(H,null,M(e.row.hotel.split("*"),u=>(T(),q(F,{key:u,label:u.trim(),class:"q-mb-xs",outline:""},null,8,["label"]))),128))])]),_:2},1032,["props"])]),"body-cell-noches":l(e=>[r(z,{props:e},{default:l(()=>[c("div",fe,[(T(!0),j(H,null,M(e.row.noches?e.row.noches.split("*"):[],u=>(T(),q(F,{key:u,label:u.trim(),class:"q-mb-xs",outline:""},null,8,["label"]))),128))])]),_:2},1032,["props"])]),"body-cell-acomodacion":l(e=>[r(z,{props:e},{default:l(()=>[c("div",Te,[(T(!0),j(H,null,M(e.row.acomodacion.split("*"),u=>(T(),q(F,{key:u,label:u.trim(),class:"q-mb-xs",outline:""},null,8,["label"]))),128))])]),_:2},1032,["props"])]),"body-cell-acciones":l(e=>[r(z,{props:e},{default:l(()=>[r(h,{dense:"",color:"primary",onClick:u=>i.editarPlan(e.row),class:"q-mx-xs"},{default:l(()=>[b("Editar")]),_:2},1032,["onClick"]),r(h,{dense:"",color:"info",onClick:u=>i.verDetallesPlan(e.row.id),class:"q-mx-xs"},{default:l(()=>[b(" Ver Detalles ")]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"]),r(V,{modelValue:t.mostrarModalEditar,"onUpdate:modelValue":o[22]||(o[22]=e=>t.mostrarModalEditar=e),"content-css":"max-width: 500px;"},{default:l(()=>[r(w,null,{default:l(()=>[r(y,{class:"row items-center q-pb-none"},{default:l(()=>[r(_,{onSubmit:i.editarPlanSubmit,class:"q-gutter-md"},{default:l(()=>[r(D,{label:"Pertenece",modelValue:t.perteneceEditar,"onUpdate:modelValue":o[15]||(o[15]=e=>t.perteneceEditar=e),options:t.opcionesPertenece,style:{width:"100%"},rules:[e=>!!e||"El campo Pertenece es obligatorio"],"emit-value":"","map-options":""},null,8,["modelValue","options","rules"]),r(d,{label:"Destino",modelValue:t.destinoEditar,"onUpdate:modelValue":o[16]||(o[16]=e=>t.destinoEditar=e),rules:[e=>!!e||"El campo Destino es obligatorio"],"lazy-rules":"",style:{width:"100%"}},null,8,["modelValue","rules"]),r(d,{label:"Nombre del Programa",modelValue:t.nombreProgramaEditar,"onUpdate:modelValue":o[17]||(o[17]=e=>t.nombreProgramaEditar=e),rules:[e=>!!e||"El campo Nombre del Programa es obligatorio"],"lazy-rules":"",style:{width:"100%"}},null,8,["modelValue","rules"]),c("div",ye,[qe,c("div",xe,[(T(!0),j(H,null,M(t.hotelesEditar,e=>(T(),q(F,{key:e,removable:"",onRemove:u=>i.eliminarHotelEditar(e),label:e,class:"q-ma-xs",color:"primary","text-color":"white"},null,8,["onRemove","label"]))),128))]),c("div",we,[r(d,{modelValue:t.nuevoHotel,"onUpdate:modelValue":o[18]||(o[18]=e=>t.nuevoHotel=e),placeholder:"Agregar hotel",dense:"",outlined:"",class:"col-grow",style:{"padding-top":"15px"}},null,8,["modelValue"]),r(h,{onClick:i.agregarHotelEditar,label:"Agregar",color:"primary"},null,8,["onClick"])])]),c("div",Ve,[Pe,r(D,{multiple:"",modelValue:t.nochesEditar,"onUpdate:modelValue":o[19]||(o[19]=e=>t.nochesEditar=e),options:t.opcionesNoches,style:{width:"100%"},"emit-value":"","map-options":"","option-value":"value","option-label":"label","input-debounce":"0"},null,8,["modelValue","options"])]),c("div",Ae,[Ne,r(D,{multiple:"",modelValue:t.acomodacionEditar,"onUpdate:modelValue":o[20]||(o[20]=e=>t.acomodacionEditar=e),options:t.opcionesAcomodacion,style:{width:"100%"},"emit-value":"","map-options":"","option-value":"value","option-label":"label","input-debounce":"0"},null,8,["modelValue","options"])]),r(d,{label:"Plan",modelValue:t.planEditar,"onUpdate:modelValue":o[21]||(o[21]=e=>t.planEditar=e),rules:[e=>!!e||"El campo Plan es obligatorio"],"lazy-rules":"",style:{width:"100%"}},null,8,["modelValue","rules"]),c("div",Se,[r(h,{type:"submit",label:"Guardar Cambios",color:"primary"})])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(Y,{class:"q-pa-md"},{default:l(()=>[ke,r(h,{onClick:o[23]||(o[23]=e=>t.mostrarModalAgregarTiquete=!0),label:"Agregar Tiquete",class:"q-mb-md",color:"primary"}),r(V,{modelValue:t.mostrarModalAgregarTiquete,"onUpdate:modelValue":o[30]||(o[30]=e=>t.mostrarModalAgregarTiquete=e),"content-css":"max-width: 500px;"},{default:l(()=>[r(w,null,{default:l(()=>[r(y,{class:"row items-center q-pb-none"},{default:l(()=>[r(_,{onSubmit:i.agregarTiqueteSubmit,class:"q-gutter-md"},{default:l(()=>[r(d,{label:"Salida",modelValue:t.nuevoTiqueteSalida,"onUpdate:modelValue":o[24]||(o[24]=e=>t.nuevoTiqueteSalida=e),rules:[e=>!!e||"El campo Salida es obligatorio"],"lazy-rules":"",style:{width:"100%"}},null,8,["modelValue","rules"]),r(d,{label:"Pertenece",modelValue:t.nuevoTiquetePertenece,"onUpdate:modelValue":o[25]||(o[25]=e=>t.nuevoTiquetePertenece=e),rules:[e=>!!e||"El campo Pertenece es obligatorio"],"lazy-rules":"",style:{width:"100%"}},null,8,["modelValue","rules"]),r(d,{label:"Neta",modelValue:t.nuevoTiqueteNeta,"onUpdate:modelValue":o[26]||(o[26]=e=>t.nuevoTiqueteNeta=e),rules:[e=>!!e||"El campo Neta es obligatorio"],"lazy-rules":"",style:{width:"100%"}},null,8,["modelValue","rules"]),r(d,{label:"Tasas",modelValue:t.nuevoTiqueteTasas,"onUpdate:modelValue":o[27]||(o[27]=e=>t.nuevoTiqueteTasas=e),rules:[e=>!!e||"El campo Tasas es obligatorio"],"lazy-rules":"",style:{width:"100%"}},null,8,["modelValue","rules"]),r(d,{label:"IVA",modelValue:t.nuevoTiqueteIva,"onUpdate:modelValue":o[28]||(o[28]=e=>t.nuevoTiqueteIva=e),rules:[e=>!!e||"El campo IVA es obligatorio"],"lazy-rules":"",style:{width:"100%"}},null,8,["modelValue","rules"]),r(d,{label:"Total",modelValue:t.nuevoTiqueteTotal,"onUpdate:modelValue":o[29]||(o[29]=e=>t.nuevoTiqueteTotal=e),rules:[e=>!!e||"El campo Total es obligatorio"],"lazy-rules":"",style:{width:"100%"}},null,8,["modelValue","rules"]),c("div",Ie,[r(h,{type:"submit",label:"Agregar Tiquete",color:"primary"})])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(V,{modelValue:t.mostrarModalEditarTiquete,"onUpdate:modelValue":o[37]||(o[37]=e=>t.mostrarModalEditarTiquete=e),"content-css":"max-width: 400px;"},{default:l(()=>[r(w,null,{default:l(()=>[r(y,{class:"row items-center q-pa-md"},{default:l(()=>[r(_,{onSubmit:i.editarTiqueteSubmit},{default:l(()=>[r(d,{label:"Salida",modelValue:t.salidaEditar,"onUpdate:modelValue":o[31]||(o[31]=e=>t.salidaEditar=e),rules:[e=>!!e||"El campo Salida es obligatorio"]},null,8,["modelValue","rules"]),r(d,{label:"Pertenece",modelValue:t.perteneceTiqueteEditar,"onUpdate:modelValue":o[32]||(o[32]=e=>t.perteneceTiqueteEditar=e),rules:[e=>!!e||"El campo Pertenece es obligatorio"]},null,8,["modelValue","rules"]),r(d,{label:"Neta",modelValue:t.netaEditar,"onUpdate:modelValue":o[33]||(o[33]=e=>t.netaEditar=e),rules:[e=>!!e||"El campo Neta es obligatorio"]},null,8,["modelValue","rules"]),r(d,{label:"Tasas",modelValue:t.tasasEditar,"onUpdate:modelValue":o[34]||(o[34]=e=>t.tasasEditar=e),rules:[e=>!!e||"El campo Tasas es obligatorio"]},null,8,["modelValue","rules"]),r(d,{label:"IVA",modelValue:t.ivaTiqueteEditar,"onUpdate:modelValue":o[35]||(o[35]=e=>t.ivaTiqueteEditar=e),rules:[e=>!!e||"El campo IVA es obligatorio"]},null,8,["modelValue","rules"]),r(d,{label:"Total",modelValue:t.totalTiqueteEditar,"onUpdate:modelValue":o[36]||(o[36]=e=>t.totalTiqueteEditar=e),rules:[e=>!!e||"El campo Total es obligatorio"]},null,8,["modelValue","rules"]),c("div",Ce,[r(h,{type:"submit",label:"Guardar Cambios",color:"primary"})])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(K,{rows:t.tiquetes,columns:t.columnasTiquete,"row-key":"id",pagination:t.pagination,class:"q-mt-md"},{"body-cell-acciones":l(e=>[r(z,{props:e},{default:l(()=>[r(h,{dense:"",color:"primary",onClick:u=>i.editarTiquete(e.row),class:"q-mx-xs"},{default:l(()=>[b("Editar")]),_:2},1032,["onClick"]),r(h,{dense:"",color:"negative",onClick:u=>i.eliminarTiquete(e.row.id),class:"q-mx-xs"},{default:l(()=>[b("Eliminar")]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"]),r(V,{modelValue:t.mostrarModalAgregarTransporte,"onUpdate:modelValue":o[47]||(o[47]=e=>t.mostrarModalAgregarTransporte=e),"content-css":"max-width: 500px;"},{default:l(()=>[r(w,null,{default:l(()=>[r(y,{class:"row items-center q-pb-none"},{default:l(()=>[r(_,{onSubmit:i.agregarTransporteSubmit,class:"q-gutter-md"},{default:l(()=>[r(d,{label:"Pertenece",modelValue:t.nuevoTransportePertenece,"onUpdate:modelValue":o[38]||(o[38]=e=>t.nuevoTransportePertenece=e),rules:[e=>!!e||"El campo Pertenece es obligatorio"],"lazy-rules":"",style:{width:"100%"}},null,8,["modelValue","rules"]),r(d,{label:"Destino",modelValue:t.nuevoTransporteDestino,"onUpdate:modelValue":o[39]||(o[39]=e=>t.nuevoTransporteDestino=e),rules:[e=>!!e||"El campo Destino es obligatorio"],"lazy-rules":"",style:{width:"100%"}},null,8,["modelValue","rules"]),r(d,{label:"Combustible",modelValue:t.nuevoTransporteCombus,"onUpdate:modelValue":o[40]||(o[40]=e=>t.nuevoTransporteCombus=e),rules:[e=>!!e||"El campo Combustible es obligatorio"],"lazy-rules":"",style:{width:"100%"}},null,8,["modelValue","rules"]),r(d,{label:"Tasa",modelValue:t.nuevoTransporteTasa,"onUpdate:modelValue":o[41]||(o[41]=e=>t.nuevoTransporteTasa=e),rules:[e=>!!e||"El campo Tasa es obligatorio"],"lazy-rules":"",style:{width:"100%"}},null,8,["modelValue","rules"]),r(d,{label:"IVA",modelValue:t.nuevoTransporteIva,"onUpdate:modelValue":o[42]||(o[42]=e=>t.nuevoTransporteIva=e),rules:[e=>!!e||"El campo IVA es obligatorio"],"lazy-rules":"",style:{width:"100%"}},null,8,["modelValue","rules"]),r(d,{label:"TA",modelValue:t.nuevoTransporteTa,"onUpdate:modelValue":o[43]||(o[43]=e=>t.nuevoTransporteTa=e),rules:[e=>!!e||"El campo TA es obligatorio"],"lazy-rules":"",style:{width:"100%"}},null,8,["modelValue","rules"]),r(d,{label:"IVA TA",modelValue:t.nuevoTransporteIvaTa,"onUpdate:modelValue":o[44]||(o[44]=e=>t.nuevoTransporteIvaTa=e),rules:[e=>!!e||"El campo IVA TA es obligatorio"],"lazy-rules":"",style:{width:"100%"}},null,8,["modelValue","rules"]),r(d,{label:"Otros",modelValue:t.nuevoTransporteOtros,"onUpdate:modelValue":o[45]||(o[45]=e=>t.nuevoTransporteOtros=e),rules:[e=>!!e||"El campo Otros es obligatorio"],"lazy-rules":"",style:{width:"100%"}},null,8,["modelValue","rules"]),r(d,{label:"Total",modelValue:t.nuevoTransporteTotal,"onUpdate:modelValue":o[46]||(o[46]=e=>t.nuevoTransporteTotal=e),rules:[e=>!!e||"El campo Total es obligatorio"],"lazy-rules":"",style:{width:"100%"}},null,8,["modelValue","rules"]),c("div",_e,[r(h,{type:"submit",label:"Agregar Transporte",color:"primary"})])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(V,{modelValue:t.mostrarModalEditarTransporte,"onUpdate:modelValue":o[57]||(o[57]=e=>t.mostrarModalEditarTransporte=e),"content-css":"max-width: 500px;"},{default:l(()=>[r(w,null,{default:l(()=>[r(y,{class:"row items-center q-pa-md"},{default:l(()=>[r(_,{onSubmit:i.editarTransporteSubmit,class:"q-gutter-md"},{default:l(()=>[r(d,{label:"Pertenece",modelValue:t.perteneceTransporteEditar,"onUpdate:modelValue":o[48]||(o[48]=e=>t.perteneceTransporteEditar=e),rules:[e=>!!e||"El campo Pertenece es obligatorio"],"lazy-rules":"",style:{width:"100%"}},null,8,["modelValue","rules"]),r(d,{label:"Destino",modelValue:t.destinoTransporteEditar,"onUpdate:modelValue":o[49]||(o[49]=e=>t.destinoTransporteEditar=e),rules:[e=>!!e||"El campo Destino es obligatorio"],"lazy-rules":"",style:{width:"100%"}},null,8,["modelValue","rules"]),r(d,{label:"Combustible",modelValue:t.combusEditar,"onUpdate:modelValue":o[50]||(o[50]=e=>t.combusEditar=e),rules:[e=>!!e||"El campo Combustible es obligatorio"],"lazy-rules":"",style:{width:"100%"}},null,8,["modelValue","rules"]),r(d,{label:"Tasa",modelValue:t.tasaTransporteEditar,"onUpdate:modelValue":o[51]||(o[51]=e=>t.tasaTransporteEditar=e),rules:[e=>!!e||"El campo Tasa es obligatorio"],"lazy-rules":"",style:{width:"100%"}},null,8,["modelValue","rules"]),r(d,{label:"IVA",modelValue:t.ivaTransporteEditar,"onUpdate:modelValue":o[52]||(o[52]=e=>t.ivaTransporteEditar=e),rules:[e=>!!e||"El campo IVA es obligatorio"],"lazy-rules":"",style:{width:"100%"}},null,8,["modelValue","rules"]),r(d,{label:"TA",modelValue:t.taEditar,"onUpdate:modelValue":o[53]||(o[53]=e=>t.taEditar=e),rules:[e=>!!e||"El campo TA es obligatorio"],"lazy-rules":"",style:{width:"100%"}},null,8,["modelValue","rules"]),r(d,{label:"IVA TA",modelValue:t.ivaTaEditar,"onUpdate:modelValue":o[54]||(o[54]=e=>t.ivaTaEditar=e),rules:[e=>!!e||"El campo IVA TA es obligatorio"],"lazy-rules":"",style:{width:"100%"}},null,8,["modelValue","rules"]),r(d,{label:"Otros",modelValue:t.otrosEditar,"onUpdate:modelValue":o[55]||(o[55]=e=>t.otrosEditar=e),rules:[e=>!!e||"El campo Otros es obligatorio"],"lazy-rules":"",style:{width:"100%"}},null,8,["modelValue","rules"]),r(d,{label:"Total",modelValue:t.totalTransporteEditar,"onUpdate:modelValue":o[56]||(o[56]=e=>t.totalTransporteEditar=e),rules:[e=>!!e||"El campo Total es obligatorio"],"lazy-rules":"",style:{width:"100%"}},null,8,["modelValue","rules"]),c("div",De,[r(h,{type:"submit",label:"Guardar Cambios",color:"primary"})])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),ze,r(h,{onClick:o[58]||(o[58]=e=>t.mostrarModalAgregarTransporte=!0),label:"Agregar Transporte",class:"q-mb-md q-mr-sm",color:"primary"}),r(V,{modelValue:t.MostrarFormato,"onUpdate:modelValue":o[61]||(o[61]=e=>t.MostrarFormato=e),persistent:""},{default:l(()=>[r(w,{class:"q-pa-lg",style:{"border-radius":"12px","max-width":"500px","box-shadow":"0 8px 24px rgba(0, 0, 0, 0.3)"}},{default:l(()=>[r(y,{class:"text-center"},{default:l(()=>[Ue,je]),_:1}),r(y,{class:"q-gutter-y-md"},{default:l(()=>[r(Z,{bordered:"",separator:""},{default:l(()=>[N((T(),q(O,{clickable:"",class:"hover-effect",onClick:o[59]||(o[59]=e=>i.descargarExcel("nuevo"))},{default:l(()=>[r(S,{avatar:""},{default:l(()=>[r(B,{size:"48px",class:"bg-primary text-white"},{default:l(()=>[r(k,{name:"cloud_download",size:"28px"})]),_:1})]),_:1}),r(S,null,{default:l(()=>[r(I,{class:"text-bold"},{default:l(()=>[b("Planes Nuevos")]),_:1}),r(I,{caption:""},{default:l(()=>[b("Formato para crear nuevos registros")]),_:1})]),_:1})]),_:1})),[[J]]),N((T(),q(O,{clickable:"",class:"hover-effect selected-item",onClick:o[60]||(o[60]=e=>i.descargarExcel("existente"))},{default:l(()=>[r(S,{avatar:""},{default:l(()=>[r(B,{size:"48px",class:"bg-blue-3 text-primary"},{default:l(()=>[r(k,{name:"assignment",size:"28px"})]),_:1})]),_:1}),r(S,null,{default:l(()=>[r(I,{class:"text-bold"},{default:l(()=>[b("Actualizaci\xF3n")]),_:1}),r(I,{caption:""},{default:l(()=>[b("Formato con datos existentes")]),_:1})]),_:1})]),_:1})),[[J]])]),_:1})]),_:1}),r(R),r(Q,{align:"center",class:"q-mt-md"},{default:l(()=>[N(r(h,{label:"Cancelar",color:"grey-8",flat:"",class:"full-width q-pa-md text-bold"},null,512),[[G]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(V,{modelValue:t.mostrarModalImportar,"onUpdate:modelValue":o[63]||(o[63]=e=>t.mostrarModalImportar=e),persistent:"","transition-show":"scale","transition-hide":"fade"},{default:l(()=>[r(w,{style:{"min-width":"420px","border-radius":"16px","box-shadow":"0 10px 25px rgba(0, 0, 0, 0.3)"}},{default:l(()=>[r(y,{class:"bg-positive text-white"},{default:l(()=>[c("div",Me,[r(k,{name:"upload_file",size:"md",class:"q-mr-sm"}),b(" Importar Datos ")])]),_:1}),r(y,{class:"q-pa-md"},{default:l(()=>[r(R,{class:"q-my-md",color:"positive"}),c("div",He,[r($,{modelValue:t.archivoExcel,"onUpdate:modelValue":o[62]||(o[62]=e=>t.archivoExcel=e),label:"Seleccionar archivo Excel",accept:".xlsx",onRejected:a.onRejected,filled:"",color:"positive",counter:"","bottom-slots":"",class:"animated-input"},{append:l(()=>[r(k,{name:"cloud_upload",size:"md",class:"text-white"})]),hint:l(()=>[b(" Solo archivos Excel (.xlsx) ")]),_:1},8,["modelValue","onRejected"])])]),_:1}),r(Q,{align:"right",class:"q-pa-md q-gutter-md"},{default:l(()=>[N(r(h,{flat:"",label:"Cancelar",color:"grey-8",disable:t.procesando,class:"rounded-borders animated-btn"},null,8,["disable"]),[[G]]),r(h,{label:"Importar Datos Nuevos",color:"positive",onClick:i.importarDatosNuevo,loading:t.procesando,disable:!t.archivoExcel,icon:"file_upload",class:"rounded-borders animated-btn"},{loading:l(()=>[r(L,{color:"white"})]),_:1},8,["onClick","loading","disable"]),r(h,{label:"Actualizar Datos",color:"primary",onClick:i.importarDatosExistente,loading:t.procesando,disable:!t.archivoExcel,icon:"refresh",class:"rounded-borders animated-btn"},{loading:l(()=>[r(L,{color:"white"})]),_:1},8,["onClick","loading","disable"])]),_:1}),t.procesando?(T(),q(ee,{key:0,indeterminate:"",color:"positive",class:"q-mt-sm"})):oe("",!0)]),_:1})]),_:1},8,["modelValue"]),r(K,{rows:t.transportes,columns:t.columnasTransporte,"row-key":"id",pagination:t.pagination,class:"q-mt-md"},{"body-cell-acciones":l(e=>[r(z,{props:e},{default:l(()=>[r(h,{dense:"",color:"primary",onClick:u=>i.editarTransporte(e.row),class:"q-mx-xs"},{default:l(()=>[b("Editar")]),_:2},1032,["onClick"]),r(h,{dense:"",color:"negative",onClick:u=>i.eliminarTransporte(e.row.id),class:"q-mx-xs"},{default:l(()=>[b("Eliminar")]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"])]),_:1})]),_:1})}var Be=te(ae,[["render",Fe]]);export{Be as default};

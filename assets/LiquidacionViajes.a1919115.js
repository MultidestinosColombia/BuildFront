import{c as kt,E as Mt,aK as Vt,F as Bt,aO as qt,a as le,h as De,aU as Ut,g as jt,bh as Yt,bi as $t,r as Qt,G as Gt,w as Jt,bj as _t,bk as Xt,ao as Kt,ay as At,a8 as Ae,a2 as Zt,aA as ea,a3 as ta,a4 as $e,a5 as at,a6 as Y,au as aa,a9 as X,a7 as B,ae as ce,ai as oa,ag as He,av as Pe,ax as It,aC as Ht,aa as Qe,ah as na,aw as yt,aY as ia,bl as ra,az as la,aE as sa,aF as da,aX as Lt,aI as ca,N as Rt,aG as ua,aD as fa,bm as ha,aH as Wt}from"./index.c27b22cd.js";import{Q as bt}from"./QTooltip.c446164e.js";import{Q as zt}from"./QSpace.22f7e2e5.js";import{Q as ga}from"./QTr.895849c2.js";import{Q as ma}from"./QBadge.5b9e24cb.js";import{c as Ft,E as Ot,n as Te}from"./PDFButton.ed2f9faa.js";import{a as se}from"./axios.37d53be1.js";var pa=kt({name:"QInnerLoading",props:{...Mt,...Vt,showing:Boolean,color:String,size:{type:[String,Number],default:42},label:String,labelClass:String,labelStyle:[String,Array,Object]},setup(v,{slots:K}){const ie=jt(),re=Bt(v,ie.proxy.$q),{transitionProps:J,transitionStyle:G}=qt(v),te=le(()=>"q-inner-loading q--avoid-card-border absolute-full column flex-center"+(re.value===!0?" q-inner-loading--dark":"")),I=le(()=>"q-inner-loading__label"+(v.labelClass!==void 0?` ${v.labelClass}`:""));function i(){const h=[De(Yt,{size:v.size,color:v.color})];return v.label!==void 0&&h.push(De("div",{class:I.value,style:v.labelStyle},[v.label])),h}function F(){return v.showing===!0?De("div",{class:te.value,style:G.value},K.default!==void 0?K.default():i()):null}return()=>De(Ut,J.value,F)}});function Ct(v,K){return[!0,!1].includes(v)?v:K}var va=kt({name:"QPagination",props:{...Mt,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:v=>(typeof v=="string"?parseInt(v,10):v)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:v=>v===""||$t.includes(v)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(v,{emit:K}){const{proxy:ie}=jt(),{$q:re}=ie,J=Bt(v,re),G=le(()=>parseInt(v.min,10)),te=le(()=>parseInt(v.max,10)),I=le(()=>parseInt(v.maxPages,10)),i=le(()=>l.value+" / "+te.value),F=le(()=>Ct(v.boundaryLinks,v.input)),h=le(()=>Ct(v.boundaryNumbers,!v.input)),N=le(()=>Ct(v.directionLinks,v.input)),C=le(()=>Ct(v.ellipses,!v.input)),P=Qt(null),l=le({get:()=>v.modelValue,set:A=>{if(A=parseInt(A,10),v.disable||isNaN(A))return;const x=Gt(A,G.value,te.value);v.modelValue!==x&&K("update:modelValue",x)}});Jt(()=>`${G.value}|${te.value}`,()=>{l.value=v.modelValue});const T=le(()=>"q-pagination row no-wrap items-center"+(v.disable===!0?" disabled":"")),b=le(()=>v.gutter in _t?`${_t[v.gutter]}px`:v.gutter||null),m=le(()=>b.value!==null?`--q-pagination-gutter-parent:-${b.value};--q-pagination-gutter-child:${b.value}`:null),d=le(()=>{const A=[v.iconFirst||re.iconSet.pagination.first,v.iconPrev||re.iconSet.pagination.prev,v.iconNext||re.iconSet.pagination.next,v.iconLast||re.iconSet.pagination.last];return re.lang.rtl===!0?A.reverse():A}),n=le(()=>({"aria-disabled":v.disable===!0?"true":"false",role:"navigation"})),r=le(()=>Xt(v,"flat")),p=le(()=>({[r.value]:!0,round:v.round,rounded:v.rounded,padding:v.padding,color:v.color,textColor:v.textColor,size:v.size,ripple:v.ripple!==null?v.ripple:!0})),t=le(()=>{const A={[r.value]:!1};return v.activeDesign!==""&&(A[v.activeDesign]=!0),A}),e=le(()=>({...t.value,color:v.activeColor||v.color,textColor:v.activeTextColor||v.textColor})),s=le(()=>{let A=Math.max(I.value,1+(C.value?2:0)+(h.value?2:0));const x={pgFrom:G.value,pgTo:te.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(te.value).length)}em`}};return I.value&&A<te.value-G.value+1&&(A=1+Math.floor(A/2)*2,x.pgFrom=Math.max(G.value,Math.min(te.value-A+1,v.modelValue-Math.floor(A/2))),x.pgTo=Math.min(te.value,x.pgFrom+A-1),h.value&&(x.boundaryStart=!0,x.pgFrom++),C.value&&x.pgFrom>G.value+(h.value?1:0)&&(x.ellipsesStart=!0,x.pgFrom++),h.value&&(x.boundaryEnd=!0,x.pgTo--),C.value&&x.pgTo<te.value-(h.value?1:0)&&(x.ellipsesEnd=!0,x.pgTo--)),x});function a(A){l.value=A}function o(A){l.value=l.value+A}const f=le(()=>{function A(){l.value=P.value,P.value=null}return{"onUpdate:modelValue":x=>{P.value=x},onKeyup:x=>{Kt(x,13)===!0&&A()},onBlur:A}});function c(A,x,j){const S={"aria-label":x,"aria-current":"false",...p.value,...A};return j===!0&&Object.assign(S,{"aria-current":"true",...e.value}),x!==void 0&&(v.toFn!==void 0?S.to=v.toFn(x):S.onClick=()=>{a(x)}),De(Ae,S)}return Object.assign(ie,{set:a,setByOffset:o}),()=>{const A=[],x=[];let j;if(F.value===!0&&(A.push(c({key:"bls",disable:v.disable||v.modelValue<=G.value,icon:d.value[0]},G.value)),x.unshift(c({key:"ble",disable:v.disable||v.modelValue>=te.value,icon:d.value[3]},te.value))),N.value===!0&&(A.push(c({key:"bdp",disable:v.disable||v.modelValue<=G.value,icon:d.value[1]},v.modelValue-1)),x.unshift(c({key:"bdn",disable:v.disable||v.modelValue>=te.value,icon:d.value[2]},v.modelValue+1))),v.input!==!0){j=[];const{pgFrom:S,pgTo:u,marginalStyle:w}=s.value;if(s.value.boundaryStart===!0){const y=G.value===v.modelValue;A.push(c({key:"bns",style:w,disable:v.disable,label:G.value},G.value,y))}if(s.value.boundaryEnd===!0){const y=te.value===v.modelValue;x.unshift(c({key:"bne",style:w,disable:v.disable,label:te.value},te.value,y))}s.value.ellipsesStart===!0&&A.push(c({key:"bes",style:w,disable:v.disable,label:"\u2026",ripple:!1},S-1)),s.value.ellipsesEnd===!0&&x.unshift(c({key:"bee",style:w,disable:v.disable,label:"\u2026",ripple:!1},u+1));for(let y=S;y<=u;y++)j.push(c({key:`bpg${y}`,style:w,disable:v.disable,label:y},y,y===v.modelValue))}return De("div",{class:T.value,...n.value},[De("div",{class:"q-pagination__content row no-wrap items-center",style:m.value},[...A,v.input===!0?De(At,{class:"inline",style:{width:`${i.value.length/1.5}em`},type:"number",dense:!0,value:P.value,disable:v.disable,dark:J.value,borderless:!0,inputClass:v.inputClass,inputStyle:v.inputStyle,placeholder:i.value,min:G.value,max:te.value,...f.value}):De("div",{class:"q-pagination__middle row justify-center"},j),...x])])}}}),Sa={exports:{}};/*!
 * 
 *               jsPDF AutoTable plugin v3.8.2
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(v,K){(function(re,J){v.exports=J(function(){try{return require("jspdf")}catch{}}())})(typeof globalThis!="undefined"?globalThis:typeof Ft!="undefined"?Ft:typeof window!="undefined"?window:typeof self!="undefined"?self:Ft,function(ie){return function(){var re={172:function(I,i){var F=this&&this.__extends||function(){var C=function(P,l){return C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,b){T.__proto__=b}||function(T,b){for(var m in b)Object.prototype.hasOwnProperty.call(b,m)&&(T[m]=b[m])},C(P,l)};return function(P,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");C(P,l);function T(){this.constructor=P}P.prototype=l===null?Object.create(l):(T.prototype=l.prototype,new T)}}();Object.defineProperty(i,"__esModule",{value:!0}),i.CellHookData=i.HookData=void 0;var h=function(){function C(P,l,T){this.table=l,this.pageNumber=l.pageNumber,this.pageCount=this.pageNumber,this.settings=l.settings,this.cursor=T,this.doc=P.getDocument()}return C}();i.HookData=h;var N=function(C){F(P,C);function P(l,T,b,m,d,n){var r=C.call(this,l,T,n)||this;return r.cell=b,r.row=m,r.column=d,r.section=m.section,r}return P}(h);i.CellHookData=N},340:function(I,i,F){Object.defineProperty(i,"__esModule",{value:!0});var h=F(4),N=F(136),C=F(744),P=F(776),l=F(664),T=F(972);function b(m){m.API.autoTable=function(){for(var d=[],n=0;n<arguments.length;n++)d[n]=arguments[n];var r;d.length===1?r=d[0]:(console.error("Use of deprecated autoTable initiation"),r=d[2]||{},r.columns=d[0],r.body=d[1]);var p=(0,P.parseInput)(this,r),t=(0,T.createTable)(this,p);return(0,l.drawTable)(this,t),this},m.API.lastAutoTable=!1,m.API.previousAutoTable=!1,m.API.autoTable.previous=!1,m.API.autoTableText=function(d,n,r,p){(0,N.default)(d,n,r,p,this)},m.API.autoTableSetDefaults=function(d){return C.DocHandler.setDefaults(d,this),this},m.autoTableSetDefaults=function(d,n){C.DocHandler.setDefaults(d,n)},m.API.autoTableHtmlToJson=function(d,n){var r;if(n===void 0&&(n=!1),typeof window=="undefined")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var p=new C.DocHandler(this),t=(0,h.parseHtml)(p,d,window,n,!1),e=t.head,s=t.body,a=((r=e[0])===null||r===void 0?void 0:r.map(function(o){return o.content}))||[];return{columns:a,rows:s,data:s}},m.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var d=this.lastAutoTable;return d&&d.finalY?d.finalY:0},m.API.autoTableAddPageContent=function(d){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),m.API.autoTable.globalDefaults||(m.API.autoTable.globalDefaults={}),m.API.autoTable.globalDefaults.addPageContent=d,this},m.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}i.default=b},136:function(I,i){Object.defineProperty(i,"__esModule",{value:!0});function F(h,N,C,P,l){P=P||{};var T=1.15,b=l.internal.scaleFactor,m=l.internal.getFontSize()/b,d=l.getLineHeightFactor?l.getLineHeightFactor():T,n=m*d,r=/\r\n|\r|\n/g,p="",t=1;if((P.valign==="middle"||P.valign==="bottom"||P.halign==="center"||P.halign==="right")&&(p=typeof h=="string"?h.split(r):h,t=p.length||1),C+=m*(2-T),P.valign==="middle"?C-=t/2*n:P.valign==="bottom"&&(C-=t*n),P.halign==="center"||P.halign==="right"){var e=m;if(P.halign==="center"&&(e*=.5),p&&t>=1){for(var s=0;s<p.length;s++)l.text(p[s],N-l.getStringUnitWidth(p[s])*e,C),C+=n;return l}N-=l.getStringUnitWidth(h)*e}return P.halign==="justify"?l.text(h,N,C,{maxWidth:P.maxWidth||100,align:"justify"}):l.text(h,N,C),l}i.default=F},420:function(I,i){Object.defineProperty(i,"__esModule",{value:!0}),i.getPageAvailableWidth=i.parseSpacing=i.getFillStyle=i.addTableBorder=i.getStringWidth=void 0;function F(l,T,b){b.applyStyles(T,!0);var m=Array.isArray(l)?l:[l],d=m.map(function(n){return b.getTextWidth(n)}).reduce(function(n,r){return Math.max(n,r)},0);return d}i.getStringWidth=F;function h(l,T,b,m){var d=T.settings.tableLineWidth,n=T.settings.tableLineColor;l.applyStyles({lineWidth:d,lineColor:n});var r=N(d,!1);r&&l.rect(b.x,b.y,T.getWidth(l.pageSize().width),m.y-b.y,r)}i.addTableBorder=h;function N(l,T){var b=l>0,m=T||T===0;return b&&m?"DF":b?"S":m?"F":null}i.getFillStyle=N;function C(l,T){var b,m,d,n;if(l=l||T,Array.isArray(l)){if(l.length>=4)return{top:l[0],right:l[1],bottom:l[2],left:l[3]};if(l.length===3)return{top:l[0],right:l[1],bottom:l[2],left:l[1]};if(l.length===2)return{top:l[0],right:l[1],bottom:l[0],left:l[1]};l.length===1?l=l[0]:l=T}return typeof l=="object"?(typeof l.vertical=="number"&&(l.top=l.vertical,l.bottom=l.vertical),typeof l.horizontal=="number"&&(l.right=l.horizontal,l.left=l.horizontal),{left:(b=l.left)!==null&&b!==void 0?b:T,top:(m=l.top)!==null&&m!==void 0?m:T,right:(d=l.right)!==null&&d!==void 0?d:T,bottom:(n=l.bottom)!==null&&n!==void 0?n:T}):(typeof l!="number"&&(l=T),{top:l,right:l,bottom:l,left:l})}i.parseSpacing=C;function P(l,T){var b=C(T.settings.margin,0);return l.pageSize().width-(b.left+b.right)}i.getPageAvailableWidth=P},796:function(I,i){var F=this&&this.__extends||function(){var P=function(l,T){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,m){b.__proto__=m}||function(b,m){for(var d in m)Object.prototype.hasOwnProperty.call(m,d)&&(b[d]=m[d])},P(l,T)};return function(l,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");P(l,T);function b(){this.constructor=l}l.prototype=T===null?Object.create(T):(b.prototype=T.prototype,new b)}}();Object.defineProperty(i,"__esModule",{value:!0}),i.getTheme=i.defaultStyles=i.HtmlRowInput=void 0;var h=function(P){F(l,P);function l(T){var b=P.call(this)||this;return b._element=T,b}return l}(Array);i.HtmlRowInput=h;function N(P){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/P,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}i.defaultStyles=N;function C(P){var l={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return l[P]}i.getTheme=C},903:function(I,i,F){Object.defineProperty(i,"__esModule",{value:!0}),i.parseCss=void 0;var h=F(420);function N(b,m,d,n,r){var p={},t=1.3333333333333333,e=P(m,function(y){return r.getComputedStyle(y).backgroundColor});e!=null&&(p.fillColor=e);var s=P(m,function(y){return r.getComputedStyle(y).color});s!=null&&(p.textColor=s);var a=T(n,d);a&&(p.cellPadding=a);var o="borderTopColor",f=t*d,c=n.borderTopWidth;if(n.borderBottomWidth===c&&n.borderRightWidth===c&&n.borderLeftWidth===c){var A=(parseFloat(c)||0)/f;A&&(p.lineWidth=A)}else p.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},p.lineWidth.top||(p.lineWidth.right?o="borderRightColor":p.lineWidth.bottom?o="borderBottomColor":p.lineWidth.left&&(o="borderLeftColor"));console.log(p.lineWidth);var x=P(m,function(y){return r.getComputedStyle(y)[o]});x!=null&&(p.lineColor=x);var j=["left","right","center","justify"];j.indexOf(n.textAlign)!==-1&&(p.halign=n.textAlign),j=["middle","bottom","top"],j.indexOf(n.verticalAlign)!==-1&&(p.valign=n.verticalAlign);var S=parseInt(n.fontSize||"");isNaN(S)||(p.fontSize=S/t);var u=C(n);u&&(p.fontStyle=u);var w=(n.fontFamily||"").toLowerCase();return b.indexOf(w)!==-1&&(p.font=w),p}i.parseCss=N;function C(b){var m="";return(b.fontWeight==="bold"||b.fontWeight==="bolder"||parseInt(b.fontWeight)>=700)&&(m="bold"),(b.fontStyle==="italic"||b.fontStyle==="oblique")&&(m+="italic"),m}function P(b,m){var d=l(b,m);if(!d)return null;var n=d.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var r=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],p=parseInt(n[4]);return p===0||isNaN(r[0])||isNaN(r[1])||isNaN(r[2])?null:r}function l(b,m){var d=m(b);return d==="rgba(0, 0, 0, 0)"||d==="transparent"||d==="initial"||d==="inherit"?b.parentElement==null?null:l(b.parentElement,m):d}function T(b,m){var d=[b.paddingTop,b.paddingRight,b.paddingBottom,b.paddingLeft],n=96/(72/m),r=(parseInt(b.lineHeight)-parseInt(b.fontSize))/m/2,p=d.map(function(e){return parseInt(e||"0")/n}),t=(0,h.parseSpacing)(p,0);return r>t.top&&(t.top=r),r>t.bottom&&(t.bottom=r),t}},744:function(I,i){Object.defineProperty(i,"__esModule",{value:!0}),i.DocHandler=void 0;var F={},h=function(){function N(C){this.jsPDFDocument=C,this.userStyles={textColor:C.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:C.internal.getFontSize(),fontStyle:C.internal.getFont().fontStyle,font:C.internal.getFont().fontName,lineWidth:C.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:C.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return N.setDefaults=function(C,P){P===void 0&&(P=null),P?P.__autoTableDocumentDefaults=C:F=C},N.unifyColor=function(C){return Array.isArray(C)?C:typeof C=="number"?[C,C,C]:typeof C=="string"?[C]:null},N.prototype.applyStyles=function(C,P){var l,T,b;P===void 0&&(P=!1),C.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(C.fontStyle);var m=this.jsPDFDocument.internal.getFont(),d=m.fontStyle,n=m.fontName;if(C.font&&(n=C.font),C.fontStyle){d=C.fontStyle;var r=this.getFontList()[n];r&&r.indexOf(d)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(r[0]),d=r[0])}if(this.jsPDFDocument.setFont(n,d),C.fontSize&&this.jsPDFDocument.setFontSize(C.fontSize),!P){var p=N.unifyColor(C.fillColor);p&&(l=this.jsPDFDocument).setFillColor.apply(l,p),p=N.unifyColor(C.textColor),p&&(T=this.jsPDFDocument).setTextColor.apply(T,p),p=N.unifyColor(C.lineColor),p&&(b=this.jsPDFDocument).setDrawColor.apply(b,p),typeof C.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(C.lineWidth)}},N.prototype.splitTextToSize=function(C,P,l){return this.jsPDFDocument.splitTextToSize(C,P,l)},N.prototype.rect=function(C,P,l,T,b){return this.jsPDFDocument.rect(C,P,l,T,b)},N.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},N.prototype.getTextWidth=function(C){return this.jsPDFDocument.getTextWidth(C)},N.prototype.getDocument=function(){return this.jsPDFDocument},N.prototype.setPage=function(C){this.jsPDFDocument.setPage(C)},N.prototype.addPage=function(){return this.jsPDFDocument.addPage()},N.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},N.prototype.getGlobalOptions=function(){return F||{}},N.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},N.prototype.pageSize=function(){var C=this.jsPDFDocument.internal.pageSize;return C.width==null&&(C={width:C.getWidth(),height:C.getHeight()}),C},N.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},N.prototype.getLineHeightFactor=function(){var C=this.jsPDFDocument;return C.getLineHeightFactor?C.getLineHeightFactor():1.15},N.prototype.getLineHeight=function(C){return C/this.scaleFactor()*this.getLineHeightFactor()},N.prototype.pageNumber=function(){var C=this.jsPDFDocument.internal.getCurrentPageInfo();return C?C.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},N}();i.DocHandler=h},4:function(I,i,F){Object.defineProperty(i,"__esModule",{value:!0}),i.parseHtml=void 0;var h=F(903),N=F(796);function C(T,b,m,d,n){var r,p;d===void 0&&(d=!1),n===void 0&&(n=!1);var t;typeof b=="string"?t=m.document.querySelector(b):t=b;var e=Object.keys(T.getFontList()),s=T.scaleFactor(),a=[],o=[],f=[];if(!t)return console.error("Html table could not be found with input: ",b),{head:a,body:o,foot:f};for(var c=0;c<t.rows.length;c++){var A=t.rows[c],x=(p=(r=A==null?void 0:A.parentElement)===null||r===void 0?void 0:r.tagName)===null||p===void 0?void 0:p.toLowerCase(),j=P(e,s,m,A,d,n);!j||(x==="thead"?a.push(j):x==="tfoot"?f.push(j):o.push(j))}return{head:a,body:o,foot:f}}i.parseHtml=C;function P(T,b,m,d,n,r){for(var p=new N.HtmlRowInput(d),t=0;t<d.cells.length;t++){var e=d.cells[t],s=m.getComputedStyle(e);if(n||s.display!=="none"){var a=void 0;r&&(a=(0,h.parseCss)(T,e,b,s,m)),p.push({rowSpan:e.rowSpan,colSpan:e.colSpan,styles:a,_element:e,content:l(e)})}}var o=m.getComputedStyle(d);if(p.length>0&&(n||o.display!=="none"))return p}function l(T){var b=T.cloneNode(!0);return b.innerHTML=b.innerHTML.replace(/\n/g,"").replace(/ +/g," "),b.innerHTML=b.innerHTML.split(/<br.*?>/).map(function(m){return m.trim()}).join(`
`),b.innerText||b.textContent||""}},776:function(I,i,F){Object.defineProperty(i,"__esModule",{value:!0}),i.parseInput=void 0;var h=F(4),N=F(356),C=F(420),P=F(744),l=F(792);function T(t,e){var s=new P.DocHandler(t),a=s.getDocumentOptions(),o=s.getGlobalOptions();(0,l.default)(s,o,a,e);var f=(0,N.assign)({},o,a,e),c;typeof window!="undefined"&&(c=window);var A=b(o,a,e),x=m(o,a,e),j=d(s,f),S=r(s,f,c);return{id:e.tableId,content:S,hooks:x,styles:A,settings:j}}i.parseInput=T;function b(t,e,s){for(var a={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},o=function(x){if(x==="columnStyles"){var j=t[x],S=e[x],u=s[x];a.columnStyles=(0,N.assign)({},j,S,u)}else{var w=[t,e,s],y=w.map(function(H){return H[x]||{}});a[x]=(0,N.assign)({},y[0],y[1],y[2])}},f=0,c=Object.keys(a);f<c.length;f++){var A=c[f];o(A)}return a}function m(t,e,s){for(var a=[t,e,s],o={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},f=0,c=a;f<c.length;f++){var A=c[f];A.didParseCell&&o.didParseCell.push(A.didParseCell),A.willDrawCell&&o.willDrawCell.push(A.willDrawCell),A.didDrawCell&&o.didDrawCell.push(A.didDrawCell),A.willDrawPage&&o.willDrawPage.push(A.willDrawPage),A.didDrawPage&&o.didDrawPage.push(A.didDrawPage)}return o}function d(t,e){var s,a,o,f,c,A,x,j,S,u,w,y,H=(0,C.parseSpacing)(e.margin,40/t.scaleFactor()),_=(s=n(t,e.startY))!==null&&s!==void 0?s:H.top,R;e.showFoot===!0?R="everyPage":e.showFoot===!1?R="never":R=(a=e.showFoot)!==null&&a!==void 0?a:"everyPage";var k;e.showHead===!0?k="everyPage":e.showHead===!1?k="never":k=(o=e.showHead)!==null&&o!==void 0?o:"everyPage";var $=(f=e.useCss)!==null&&f!==void 0?f:!1,q=e.theme||($?"plain":"striped"),M=!!e.horizontalPageBreak,oe=(c=e.horizontalPageBreakRepeat)!==null&&c!==void 0?c:null;return{includeHiddenHtml:(A=e.includeHiddenHtml)!==null&&A!==void 0?A:!1,useCss:$,theme:q,startY:_,margin:H,pageBreak:(x=e.pageBreak)!==null&&x!==void 0?x:"auto",rowPageBreak:(j=e.rowPageBreak)!==null&&j!==void 0?j:"auto",tableWidth:(S=e.tableWidth)!==null&&S!==void 0?S:"auto",showHead:k,showFoot:R,tableLineWidth:(u=e.tableLineWidth)!==null&&u!==void 0?u:0,tableLineColor:(w=e.tableLineColor)!==null&&w!==void 0?w:200,horizontalPageBreak:M,horizontalPageBreakRepeat:oe,horizontalPageBreakBehaviour:(y=e.horizontalPageBreakBehaviour)!==null&&y!==void 0?y:"afterAllRows"}}function n(t,e){var s=t.getLastAutoTable(),a=t.scaleFactor(),o=t.pageNumber(),f=!1;if(s&&s.startPageNumber){var c=s.startPageNumber+s.pageNumber-1;f=c===o}return typeof e=="number"?e:(e==null||e===!1)&&f&&(s==null?void 0:s.finalY)!=null?s.finalY+20/a:null}function r(t,e,s){var a=e.head||[],o=e.body||[],f=e.foot||[];if(e.html){var c=e.includeHiddenHtml;if(s){var A=(0,h.parseHtml)(t,e.html,s,c,e.useCss)||{};a=A.head||a,o=A.body||a,f=A.foot||a}else console.error("Cannot parse html in non browser environment")}var x=e.columns||p(a,o,f);return{columns:x,head:a,body:o,foot:f}}function p(t,e,s){var a=t[0]||e[0]||s[0]||[],o=[];return Object.keys(a).filter(function(f){return f!=="_element"}).forEach(function(f){var c=1,A;Array.isArray(a)?A=a[parseInt(f)]:A=a[f],typeof A=="object"&&!Array.isArray(A)&&(c=(A==null?void 0:A.colSpan)||1);for(var x=0;x<c;x++){var j=void 0;Array.isArray(a)?j=o.length:j=f+(x>0?"_".concat(x):"");var S={dataKey:j};o.push(S)}}),o}},792:function(I,i){Object.defineProperty(i,"__esModule",{value:!0});function F(N,C,P,l){for(var T=function(n){n&&typeof n!="object"&&console.error("The options parameter should be of type object, is: "+typeof n),typeof n.extendWidth!="undefined"&&(n.tableWidth=n.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof n.margins!="undefined"&&(typeof n.margin=="undefined"&&(n.margin=n.margins),console.error("Use of deprecated option: margins, use margin instead.")),n.startY&&typeof n.startY!="number"&&(console.error("Invalid value for startY option",n.startY),delete n.startY),!n.didDrawPage&&(n.afterPageContent||n.beforePageContent||n.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),n.didDrawPage=function(f){N.applyStyles(N.userStyles),n.beforePageContent&&n.beforePageContent(f),N.applyStyles(N.userStyles),n.afterPageContent&&n.afterPageContent(f),N.applyStyles(N.userStyles),n.afterPageAdd&&f.pageNumber>1&&f.afterPageAdd(f),N.applyStyles(N.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(f){n[f]&&console.error('The "'.concat(f,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(f){var c=f[0],A=f[1];n[A]&&(console.error("Use of deprecated option ".concat(A,". Use ").concat(c," instead")),n[c]=n[A])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(f){var c=typeof f=="string"?f:f[0],A=typeof f=="string"?f:f[1];typeof n[c]!="undefined"&&(typeof n.styles[A]=="undefined"&&(n.styles[A]=n[c]),console.error("Use of deprecated option: "+c+", use the style "+A+" instead."))});for(var r=0,p=["styles","bodyStyles","headStyles","footStyles"];r<p.length;r++){var t=p[r];h(n[t]||{})}for(var e=n.columnStyles||{},s=0,a=Object.keys(e);s<a.length;s++){var o=a[s];h(e[o]||{})}},b=0,m=[C,P,l];b<m.length;b++){var d=m[b];T(d)}}i.default=F;function h(N){N.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),N.minCellHeight||(N.minCellHeight=N.rowHeight)):N.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),N.cellWidth||(N.cellWidth=N.columnWidth))}},260:function(I,i,F){Object.defineProperty(i,"__esModule",{value:!0}),i.Column=i.Cell=i.Row=i.Table=void 0;var h=F(796),N=F(172),C=F(420),P=function(){function m(d,n){this.pageNumber=1,this.pageCount=1,this.id=d.id,this.settings=d.settings,this.styles=d.styles,this.hooks=d.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return m.prototype.getHeadHeight=function(d){return this.head.reduce(function(n,r){return n+r.getMaxCellHeight(d)},0)},m.prototype.getFootHeight=function(d){return this.foot.reduce(function(n,r){return n+r.getMaxCellHeight(d)},0)},m.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},m.prototype.callCellHooks=function(d,n,r,p,t,e){for(var s=0,a=n;s<a.length;s++){var o=a[s],f=new N.CellHookData(d,this,r,p,t,e),c=o(f)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],c)return!1}return!0},m.prototype.callEndPageHooks=function(d,n){d.applyStyles(d.userStyles);for(var r=0,p=this.hooks.didDrawPage;r<p.length;r++){var t=p[r];t(new N.HookData(d,this,n))}},m.prototype.callWillDrawPageHooks=function(d,n){for(var r=0,p=this.hooks.willDrawPage;r<p.length;r++){var t=p[r];t(new N.HookData(d,this,n))}},m.prototype.getWidth=function(d){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(p,t){return p+t.wrappedWidth},0);return n}else{var r=this.settings.margin;return d-r.left-r.right}},m}();i.Table=P;var l=function(){function m(d,n,r,p,t){t===void 0&&(t=!1),this.height=0,this.raw=d,d instanceof h.HtmlRowInput&&(this.raw=d._element,this.element=d._element),this.index=n,this.section=r,this.cells=p,this.spansMultiplePages=t}return m.prototype.getMaxCellHeight=function(d){var n=this;return d.reduce(function(r,p){var t;return Math.max(r,((t=n.cells[p.index])===null||t===void 0?void 0:t.height)||0)},0)},m.prototype.hasRowSpan=function(d){var n=this;return d.filter(function(r){var p=n.cells[r.index];return p?p.rowSpan>1:!1}).length>0},m.prototype.canEntireRowFit=function(d,n){return this.getMaxCellHeight(n)<=d},m.prototype.getMinimumRowHeight=function(d,n){var r=this;return d.reduce(function(p,t){var e=r.cells[t.index];if(!e)return 0;var s=n.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),o=a+s;return o>p?o:p},0)},m}();i.Row=l;var T=function(){function m(d,n,r){var p,t;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=r,this.raw=d;var e=d;d!=null&&typeof d=="object"&&!Array.isArray(d)?(this.rowSpan=d.rowSpan||1,this.colSpan=d.colSpan||1,e=(t=(p=d.content)!==null&&p!==void 0?p:d.title)!==null&&t!==void 0?t:d,d._element&&(this.raw=d._element)):(this.rowSpan=1,this.colSpan=1);var s=e!=null?""+e:"",a=/\r\n|\r|\n/g;this.text=s.split(a)}return m.prototype.getTextPos=function(){var d;if(this.styles.valign==="top")d=this.y+this.padding("top");else if(this.styles.valign==="bottom")d=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");d=this.y+n/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var p=this.width-this.padding("horizontal");r=this.x+p/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:d}},m.prototype.getContentHeight=function(d,n){n===void 0&&(n=1.15);var r=Array.isArray(this.text)?this.text.length:1,p=this.styles.fontSize/d*n,t=r*p+this.padding("vertical");return Math.max(t,this.styles.minCellHeight)},m.prototype.padding=function(d){var n=(0,C.parseSpacing)(this.styles.cellPadding,0);return d==="vertical"?n.top+n.bottom:d==="horizontal"?n.left+n.right:n[d]},m}();i.Cell=T;var b=function(){function m(d,n,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=d,this.raw=n,this.index=r}return m.prototype.getMaxCustomCellWidth=function(d){for(var n=0,r=0,p=d.allRows();r<p.length;r++){var t=p[r],e=t.cells[this.index];e&&typeof e.styles.cellWidth=="number"&&(n=Math.max(n,e.styles.cellWidth))}return n},m}();i.Column=b},356:function(I,i){Object.defineProperty(i,"__esModule",{value:!0}),i.assign=void 0;function F(h,N,C,P,l){if(h==null)throw new TypeError("Cannot convert undefined or null to object");for(var T=Object(h),b=1;b<arguments.length;b++){var m=arguments[b];if(m!=null)for(var d in m)Object.prototype.hasOwnProperty.call(m,d)&&(T[d]=m[d])}return T}i.assign=F},972:function(I,i,F){Object.defineProperty(i,"__esModule",{value:!0}),i.createTable=void 0;var h=F(744),N=F(260),C=F(324),P=F(796),l=F(356);function T(t,e){var s=new h.DocHandler(t),a=b(e,s.scaleFactor()),o=new N.Table(e,a);return(0,C.calculateWidths)(s,o),s.applyStyles(s.userStyles),o}i.createTable=T;function b(t,e){var s=t.content,a=r(s.columns);if(s.head.length===0){var o=d(a,"head");o&&s.head.push(o)}if(s.foot.length===0){var o=d(a,"foot");o&&s.foot.push(o)}var f=t.settings.theme,c=t.styles;return{columns:a,head:m("head",s.head,a,c,f,e),body:m("body",s.body,a,c,f,e),foot:m("foot",s.foot,a,c,f,e)}}function m(t,e,s,a,o,f){var c={},A=e.map(function(x,j){for(var S=0,u={},w=0,y=0,H=0,_=s;H<_.length;H++){var R=_[H];if(c[R.index]==null||c[R.index].left===0)if(y===0){var k=void 0;Array.isArray(x)?k=x[R.index-w-S]:k=x[R.dataKey];var $={};typeof k=="object"&&!Array.isArray(k)&&($=(k==null?void 0:k.styles)||{});var q=p(t,R,j,o,a,f,$),M=new N.Cell(k,q,t);u[R.dataKey]=M,u[R.index]=M,y=M.colSpan-1,c[R.index]={left:M.rowSpan-1,times:y}}else y--,w++;else c[R.index].left--,y=c[R.index].times,S++}return new N.Row(x,j,t,u)});return A}function d(t,e){var s={};return t.forEach(function(a){if(a.raw!=null){var o=n(e,a.raw);o!=null&&(s[a.dataKey]=o)}}),Object.keys(s).length>0?s:null}function n(t,e){if(t==="head"){if(typeof e=="object")return e.header||e.title||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function r(t){return t.map(function(e,s){var a,o,f;return typeof e=="object"?f=(o=(a=e.dataKey)!==null&&a!==void 0?a:e.key)!==null&&o!==void 0?o:s:f=s,new N.Column(f,e,s)})}function p(t,e,s,a,o,f,c){var A=(0,P.getTheme)(a),x;t==="head"?x=o.headStyles:t==="body"?x=o.bodyStyles:t==="foot"&&(x=o.footStyles);var j=(0,l.assign)({},A.table,A[t],o.styles,x),S=o.columnStyles[e.dataKey]||o.columnStyles[e.index]||{},u=t==="body"?S:{},w=t==="body"&&s%2===0?(0,l.assign)({},A.alternateRow,o.alternateRowStyles):{},y=(0,P.defaultStyles)(f),H=(0,l.assign)({},y,j,w,u);return(0,l.assign)(H,c)}},664:function(I,i,F){Object.defineProperty(i,"__esModule",{value:!0}),i.addPage=i.drawTable=void 0;var h=F(420),N=F(260),C=F(744),P=F(356),l=F(136),T=F(224);function b(S,u){var w=u.settings,y=w.startY,H=w.margin,_={x:H.left,y},R=u.getHeadHeight(u.columns)+u.getFootHeight(u.columns),k=y+H.bottom+R;if(w.pageBreak==="avoid"){var $=u.body,q=$.reduce(function(L,ge){return L+ge.height},0);k+=q}var M=new C.DocHandler(S);(w.pageBreak==="always"||w.startY!=null&&k>M.pageSize().height)&&(j(M),_.y=H.top),u.callWillDrawPageHooks(M,_);var oe=(0,P.assign)({},_);u.startPageNumber=M.pageNumber(),w.horizontalPageBreak?m(M,u,oe,_):(M.applyStyles(M.userStyles),(w.showHead==="firstPage"||w.showHead==="everyPage")&&u.head.forEach(function(L){return o(M,u,L,_,u.columns)}),M.applyStyles(M.userStyles),u.body.forEach(function(L,ge){var de=ge===u.body.length-1;a(M,u,L,de,oe,_,u.columns)}),M.applyStyles(M.userStyles),(w.showFoot==="lastPage"||w.showFoot==="everyPage")&&u.foot.forEach(function(L){return o(M,u,L,_,u.columns)})),(0,h.addTableBorder)(M,u,oe,_),u.callEndPageHooks(M,_),u.finalY=_.y,S.lastAutoTable=u,S.previousAutoTable=u,S.autoTable&&(S.autoTable.previous=u),M.applyStyles(M.userStyles)}i.drawTable=b;function m(S,u,w,y){var H=(0,T.calculateAllColumnsCanFitInPage)(S,u),_=u.settings;if(_.horizontalPageBreakBehaviour==="afterAllRows")H.forEach(function(q,M){S.applyStyles(S.userStyles),M>0?x(S,u,w,y,q.columns,!0):d(S,u,y,q.columns),n(S,u,w,y,q.columns),p(S,u,y,q.columns)});else for(var R=-1,k=H[0],$=function(){var q=R;if(k){S.applyStyles(S.userStyles);var M=k.columns;R>=0?x(S,u,w,y,M,!0):d(S,u,y,M),q=r(S,u,R+1,y,M),p(S,u,y,M)}var oe=q-R;H.slice(1).forEach(function(L){S.applyStyles(S.userStyles),x(S,u,w,y,L.columns,!0),r(S,u,R+1,y,L.columns,oe),p(S,u,y,L.columns)}),R=q};R<u.body.length-1;)$()}function d(S,u,w,y){var H=u.settings;S.applyStyles(S.userStyles),(H.showHead==="firstPage"||H.showHead==="everyPage")&&u.head.forEach(function(_){return o(S,u,_,w,y)})}function n(S,u,w,y,H){S.applyStyles(S.userStyles),u.body.forEach(function(_,R){var k=R===u.body.length-1;a(S,u,_,k,w,y,H)})}function r(S,u,w,y,H,_){S.applyStyles(S.userStyles),_=_!=null?_:u.body.length;var R=Math.min(w+_,u.body.length),k=-1;return u.body.slice(w,R).forEach(function($,q){var M=w+q===u.body.length-1,oe=A(S,u,M,y);$.canEntireRowFit(oe,H)&&(o(S,u,$,y,H),k=w+q)}),k}function p(S,u,w,y){var H=u.settings;S.applyStyles(S.userStyles),(H.showFoot==="lastPage"||H.showFoot==="everyPage")&&u.foot.forEach(function(_){return o(S,u,_,w,y)})}function t(S,u,w){var y=w.getLineHeight(S.styles.fontSize),H=S.padding("vertical"),_=Math.floor((u-H)/y);return Math.max(0,_)}function e(S,u,w,y){var H={};S.spansMultiplePages=!0,S.height=0;for(var _=0,R=0,k=w.columns;R<k.length;R++){var $=k[R],q=S.cells[$.index];if(!!q){Array.isArray(q.text)||(q.text=[q.text]);var M=new N.Cell(q.raw,q.styles,q.section);M=(0,P.assign)(M,q),M.text=[];var oe=t(q,u,y);q.text.length>oe&&(M.text=q.text.splice(oe,q.text.length));var L=y.scaleFactor(),ge=y.getLineHeightFactor();q.contentHeight=q.getContentHeight(L,ge),q.contentHeight>=u&&(q.contentHeight=u,M.styles.minCellHeight-=u),q.contentHeight>S.height&&(S.height=q.contentHeight),M.contentHeight=M.getContentHeight(L,ge),M.contentHeight>_&&(_=M.contentHeight),H[$.index]=M}}var de=new N.Row(S.raw,-1,S.section,H,!0);de.height=_;for(var z=0,Ne=w.columns;z<Ne.length;z++){var $=Ne[z],M=de.cells[$.index];M&&(M.height=de.height);var q=S.cells[$.index];q&&(q.height=S.height)}return de}function s(S,u,w,y){var H=S.pageSize().height,_=y.settings.margin,R=_.top+_.bottom,k=H-R;u.section==="body"&&(k-=y.getHeadHeight(y.columns)+y.getFootHeight(y.columns));var $=u.getMinimumRowHeight(y.columns,S),q=$<w;if($>k)return console.error("Will not be able to print row ".concat(u.index," correctly since it's minimum height is larger than page height")),!0;if(!q)return!1;var M=u.hasRowSpan(y.columns),oe=u.getMaxCellHeight(y.columns)>k;return oe?(M&&console.error("The content of row ".concat(u.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(M||y.settings.rowPageBreak==="avoid")}function a(S,u,w,y,H,_,R){var k=A(S,u,y,_);if(w.canEntireRowFit(k,R))o(S,u,w,_,R);else if(s(S,w,k,u)){var $=e(w,k,u,S);o(S,u,w,_,R),x(S,u,H,_,R),a(S,u,$,y,H,_,R)}else x(S,u,H,_,R),a(S,u,w,y,H,_,R)}function o(S,u,w,y,H){y.x=u.settings.margin.left;for(var _=0,R=H;_<R.length;_++){var k=R[_],$=w.cells[k.index];if(!$){y.x+=k.width;continue}S.applyStyles($.styles),$.x=y.x,$.y=y.y;var q=u.callCellHooks(S,u.hooks.willDrawCell,$,w,k,y);if(q===!1){y.x+=k.width;continue}f(S,$,y);var M=$.getTextPos();(0,l.default)($.text,M.x,M.y,{halign:$.styles.halign,valign:$.styles.valign,maxWidth:Math.ceil($.width-$.padding("left")-$.padding("right"))},S.getDocument()),u.callCellHooks(S,u.hooks.didDrawCell,$,w,k,y),y.x+=k.width}y.y+=w.height}function f(S,u,w){var y=u.styles;if(S.getDocument().setFillColor(S.getDocument().getFillColor()),typeof y.lineWidth=="number"){var H=(0,h.getFillStyle)(y.lineWidth,y.fillColor);H&&S.rect(u.x,w.y,u.width,u.height,H)}else typeof y.lineWidth=="object"&&(y.fillColor&&S.rect(u.x,w.y,u.width,u.height,"F"),c(S,u,w,y.lineWidth))}function c(S,u,w,y){var H,_,R,k;y.top&&(H=w.x,_=w.y,R=w.x+u.width,k=w.y,y.right&&(R+=.5*y.right),y.left&&(H-=.5*y.left),$(y.top,H,_,R,k)),y.bottom&&(H=w.x,_=w.y+u.height,R=w.x+u.width,k=w.y+u.height,y.right&&(R+=.5*y.right),y.left&&(H-=.5*y.left),$(y.bottom,H,_,R,k)),y.left&&(H=w.x,_=w.y,R=w.x,k=w.y+u.height,y.top&&(_-=.5*y.top),y.bottom&&(k+=.5*y.bottom),$(y.left,H,_,R,k)),y.right&&(H=w.x+u.width,_=w.y,R=w.x+u.width,k=w.y+u.height,y.top&&(_-=.5*y.top),y.bottom&&(k+=.5*y.bottom),$(y.right,H,_,R,k));function $(q,M,oe,L,ge){S.getDocument().setLineWidth(q),S.getDocument().line(M,oe,L,ge,"S")}}function A(S,u,w,y){var H=u.settings.margin.bottom,_=u.settings.showFoot;return(_==="everyPage"||_==="lastPage"&&w)&&(H+=u.getFootHeight(u.columns)),S.pageSize().height-y.y-H}function x(S,u,w,y,H,_){H===void 0&&(H=[]),_===void 0&&(_=!1),S.applyStyles(S.userStyles),u.settings.showFoot==="everyPage"&&!_&&u.foot.forEach(function(k){return o(S,u,k,y,H)}),u.callEndPageHooks(S,y);var R=u.settings.margin;(0,h.addTableBorder)(S,u,w,y),j(S),u.pageNumber++,u.pageCount++,y.x=R.left,y.y=R.top,w.y=R.top,u.callWillDrawPageHooks(S,y),u.settings.showHead==="everyPage"&&(u.head.forEach(function(k){return o(S,u,k,y,H)}),S.applyStyles(S.userStyles))}i.addPage=x;function j(S){var u=S.pageNumber();S.setPage(u+1);var w=S.pageNumber();return w===u?(S.addPage(),!0):!1}},224:function(I,i,F){Object.defineProperty(i,"__esModule",{value:!0}),i.calculateAllColumnsCanFitInPage=void 0;var h=F(420);function N(P,l,T){var b;T===void 0&&(T={});var m=(0,h.getPageAvailableWidth)(P,l),d=new Map,n=[],r=[],p=[];l.settings.horizontalPageBreakRepeat,Array.isArray(l.settings.horizontalPageBreakRepeat)?p=l.settings.horizontalPageBreakRepeat:(typeof l.settings.horizontalPageBreakRepeat=="string"||typeof l.settings.horizontalPageBreakRepeat=="number")&&(p=[l.settings.horizontalPageBreakRepeat]),p.forEach(function(a){var o=l.columns.find(function(f){return f.dataKey===a||f.index===a});o&&!d.has(o.index)&&(d.set(o.index,!0),n.push(o.index),r.push(l.columns[o.index]),m-=o.wrappedWidth)});for(var t=!0,e=(b=T==null?void 0:T.start)!==null&&b!==void 0?b:0;e<l.columns.length;){if(d.has(e)){e++;continue}var s=l.columns[e].wrappedWidth;if(t||m>=s)t=!1,n.push(e),r.push(l.columns[e]),m-=s;else break;e++}return{colIndexes:n,columns:r,lastIndex:e-1}}function C(P,l){for(var T=[],b=0;b<l.columns.length;b++){var m=N(P,l,{start:b});m.columns.length&&(T.push(m),b=m.lastIndex)}return T}i.calculateAllColumnsCanFitInPage=C},324:function(I,i,F){Object.defineProperty(i,"__esModule",{value:!0}),i.ellipsize=i.resizeColumns=i.calculateWidths=void 0;var h=F(420);function N(n,r){C(n,r);var p=[],t=0;r.columns.forEach(function(s){var a=s.getMaxCustomCellWidth(r);a?s.width=a:(s.width=s.wrappedWidth,p.push(s)),t+=s.width});var e=r.getWidth(n.pageSize().width)-t;e&&(e=P(p,e,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),e&&(e=P(p,e,function(s){return s.minWidth})),e=Math.abs(e),!r.settings.horizontalPageBreak&&e>.1/n.scaleFactor()&&(e=e<1?e:Math.round(e),console.warn("Of the table content, ".concat(e," units width could not fit page"))),T(r),b(r,n),l(r)}i.calculateWidths=N;function C(n,r){var p=n.scaleFactor(),t=r.settings.horizontalPageBreak,e=(0,h.getPageAvailableWidth)(n,r);r.allRows().forEach(function(s){for(var a=0,o=r.columns;a<o.length;a++){var f=o[a],c=s.cells[f.index];if(!!c){var A=r.hooks.didParseCell;r.callCellHooks(n,A,c,s,f,null);var x=c.padding("horizontal");c.contentWidth=(0,h.getStringWidth)(c.text,c.styles,n)+x;var j=(0,h.getStringWidth)(c.text.join(" ").split(/\s+/),c.styles,n);if(c.minReadableWidth=j+c.padding("horizontal"),typeof c.styles.cellWidth=="number")c.minWidth=c.styles.cellWidth,c.wrappedWidth=c.styles.cellWidth;else if(c.styles.cellWidth==="wrap"||t===!0)c.contentWidth>e?(c.minWidth=e,c.wrappedWidth=e):(c.minWidth=c.contentWidth,c.wrappedWidth=c.contentWidth);else{var S=10/p;c.minWidth=c.styles.minCellWidth||S,c.wrappedWidth=c.contentWidth,c.minWidth>c.wrappedWidth&&(c.wrappedWidth=c.minWidth)}}}}),r.allRows().forEach(function(s){for(var a=0,o=r.columns;a<o.length;a++){var f=o[a],c=s.cells[f.index];if(c&&c.colSpan===1)f.wrappedWidth=Math.max(f.wrappedWidth,c.wrappedWidth),f.minWidth=Math.max(f.minWidth,c.minWidth),f.minReadableWidth=Math.max(f.minReadableWidth,c.minReadableWidth);else{var A=r.styles.columnStyles[f.dataKey]||r.styles.columnStyles[f.index]||{},x=A.cellWidth||A.minCellWidth;x&&typeof x=="number"&&(f.minWidth=x,f.wrappedWidth=x)}c&&(c.colSpan>1&&!f.minWidth&&(f.minWidth=c.minWidth),c.colSpan>1&&!f.wrappedWidth&&(f.wrappedWidth=c.minWidth))}})}function P(n,r,p){for(var t=r,e=n.reduce(function(S,u){return S+u.wrappedWidth},0),s=0;s<n.length;s++){var a=n[s],o=a.wrappedWidth/e,f=t*o,c=a.width+f,A=p(a),x=c<A?A:c;r-=x-a.width,a.width=x}if(r=Math.round(r*1e10)/1e10,r){var j=n.filter(function(S){return r<0?S.width>p(S):!0});j.length&&(r=P(j,r,p))}return r}i.resizeColumns=P;function l(n){for(var r={},p=1,t=n.allRows(),e=0;e<t.length;e++)for(var s=t[e],a=0,o=n.columns;a<o.length;a++){var f=o[a],c=r[f.index];if(p>1)p--,delete s.cells[f.index];else if(c)c.cell.height+=s.height,p=c.cell.colSpan,delete s.cells[f.index],c.left--,c.left<=1&&delete r[f.index];else{var A=s.cells[f.index];if(!A)continue;if(A.height=s.height,A.rowSpan>1){var x=t.length-e,j=A.rowSpan>x?x:A.rowSpan;r[f.index]={cell:A,left:j,row:s}}}}}function T(n){for(var r=n.allRows(),p=0;p<r.length;p++)for(var t=r[p],e=null,s=0,a=0,o=0;o<n.columns.length;o++){var f=n.columns[o];if(a-=1,a>1&&n.columns[o+1])s+=f.width,delete t.cells[f.index];else if(e){var c=e;delete t.cells[f.index],e=null,c.width=f.width+s}else{var c=t.cells[f.index];if(!c)continue;if(a=c.colSpan,s=0,c.colSpan>1){e=c,s+=f.width;continue}c.width=f.width+s}}}function b(n,r){for(var p={count:0,height:0},t=0,e=n.allRows();t<e.length;t++){for(var s=e[t],a=0,o=n.columns;a<o.length;a++){var f=o[a],c=s.cells[f.index];if(!!c){r.applyStyles(c.styles,!0);var A=c.width-c.padding("horizontal");if(c.styles.overflow==="linebreak")c.text=r.splitTextToSize(c.text,A+1/r.scaleFactor(),{fontSize:c.styles.fontSize});else if(c.styles.overflow==="ellipsize")c.text=m(c.text,A,c.styles,r,"...");else if(c.styles.overflow==="hidden")c.text=m(c.text,A,c.styles,r,"");else if(typeof c.styles.overflow=="function"){var x=c.styles.overflow(c.text,A);typeof x=="string"?c.text=[x]:c.text=x}c.contentHeight=c.getContentHeight(r.scaleFactor(),r.getLineHeightFactor());var j=c.contentHeight/c.rowSpan;c.rowSpan>1&&p.count*p.height<j*c.rowSpan?p={height:j,count:c.rowSpan}:p&&p.count>0&&p.height>j&&(j=p.height),j>s.height&&(s.height=j)}}p.count--}}function m(n,r,p,t,e){return n.map(function(s){return d(s,r,p,t,e)})}i.ellipsize=m;function d(n,r,p,t,e){var s=1e4*t.scaleFactor();if(r=Math.ceil(r*s)/s,r>=(0,h.getStringWidth)(n,p,t))return n;for(;r<(0,h.getStringWidth)(n+e,p,t)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+e}},964:function(I){if(typeof ie=="undefined"){var i=new Error("Cannot find module 'undefined'");throw i.code="MODULE_NOT_FOUND",i}I.exports=ie}},J={};function G(I){var i=J[I];if(i!==void 0)return i.exports;var F=J[I]={exports:{}};return re[I].call(F.exports,F,F.exports,G),F.exports}var te={};return function(){var I=te;Object.defineProperty(I,"__esModule",{value:!0}),I.Cell=I.Column=I.Row=I.Table=I.CellHookData=I.__drawTable=I.__createTable=I.applyPlugin=void 0;var i=G(340),F=G(776),h=G(664),N=G(972),C=G(260);Object.defineProperty(I,"Table",{enumerable:!0,get:function(){return C.Table}});var P=G(172);Object.defineProperty(I,"CellHookData",{enumerable:!0,get:function(){return P.CellHookData}});var l=G(260);Object.defineProperty(I,"Cell",{enumerable:!0,get:function(){return l.Cell}}),Object.defineProperty(I,"Column",{enumerable:!0,get:function(){return l.Column}}),Object.defineProperty(I,"Row",{enumerable:!0,get:function(){return l.Row}});function T(r){(0,i.default)(r)}I.applyPlugin=T;function b(r,p){var t=(0,F.parseInput)(r,p),e=(0,N.createTable)(r,t);(0,h.drawTable)(r,e)}function m(r,p){var t=(0,F.parseInput)(r,p);return(0,N.createTable)(r,t)}I.__createTable=m;function d(r,p){(0,h.drawTable)(r,p)}I.__drawTable=d;try{var n=G(964);n.jsPDF&&(n=n.jsPDF),T(n)}catch{}I.default=b}(),te}()})})(Sa);const ya={data(){return{mostrarDialogo:!1,facturaOtroNombre:!1,loading:!1,nombreFactura:"",liquidacionSeleccionada:null,filterId:"",filterStatus:null,globalFilter:"",statusOptions:[{label:"Aprobado",value:"Aprobado"},{label:"Rechazado",value:"Rechazado"},{label:"Pendiente",value:"Pendiente"}],filter:"",rows:[],columns:[{name:"status",label:"Status",field:"status"},{name:"idLiquidacion",label:"ID Liquidaci\xF3n",field:"idLiquidacion",sortable:!0},{name:"idCotizacion",label:"ID Cotizaci\xF3n",field:"idCotizacion",sortable:!0},{name:"salida",label:"Salida",field:"salida"},{name:"destino",label:"Destino",field:"destino"},{name:"nombrePrograma",label:"Nombre del Programa",field:"nombrePrograma"},{name:"hotel",label:"Hotel",field:"hotel"},{name:"totalPasajeros",label:"Total Pasajeros",field:"totalPasajeros"},{name:"precioBrutoTotal",label:"Precio Bruto Total",field:"precioBrutoTotal"},{name:"totalPrecioCliente",label:"Total Precio Cliente",field:"totalPrecioCliente"},{name:"fechaCreacion",label:"Fecha de Creaci\xF3n",field:v=>new Date(v.fechaCreacion).toLocaleDateString(),sortable:!0},{name:"acciones",label:"Acciones"}]}},computed:{filteredRows(){const v=(this.filterId||"").toLowerCase();return this.rows.filter(K=>{const ie=K.idCotizacion.toLowerCase().includes(v),re=this.filterStatus===null||K.status===this.filterStatus;return ie&&re})},countPendientes(){return this.rows.filter(v=>v.status==="Pendiente").length}},methods:{mostrarDialogoFactura(v){this.liquidacionSeleccionada=v,this.mostrarDialogo=!0},async procesarDescarga(){this.mostrarDialogo=!1;try{await se.put(`https://backmultidestinos.onrender.com/liquidacion/${this.liquidacionSeleccionada.idLiquidacion}`,{facturaPara:this.nombreFactura?this.nombreFactura:null})}catch(v){console.error("Error al actualizar la liquidaci\xF3n:",v),ea.create({message:"Error al actualizar la liquidaci\xF3n.",color:"negative"});return}this.liquidacionSeleccionada.idCotizacion.includes("-C")?this.descargarLiquidacionCano(this.liquidacionSeleccionada.idCotizacion,this.liquidacionSeleccionada.idLiquidacion):this.descargarLiquidacion(this.liquidacionSeleccionada.idCotizacion,this.liquidacionSeleccionada.idLiquidacion),this.nombreFactura=""},chipColor(v){switch(v){case"Aprobado":return"green";case"Rechazado":return"red";case"Pendiente":return"orange";default:return"grey"}},verDetalles(v){this.$router.push({name:"LiquidacionDetalles",params:{idLiquidacion:v.idLiquidacion,liquidacionData:v}})},descargarLiquidacionN(v){v.idCotizacion.includes("-C")?this.descargarLiquidacionCano(v.idCotizacion,v.idLiquidacion):this.descargarLiquidacion(v.idCotizacion,v.idLiquidacion)},async descargarLiquidacion(v,K){var ie,re;try{let J=function(g,D,O,Z=10){return D+O>c-Z?(g.addPage(),o.top):D},Ne=function(g){return g.map(D=>{const O=D.adultos,Z=D.ni\u00F1os,ne=`1x${O}`;return Z>0?`${ne} CHD`:ne}).join(", ")},me=function(g){for(let D=0;D<=6;D++){const O=o.left+D*ae;a.line(O,g,O,g+U)}a.line(o.left,g,f-o.right,g),a.line(o.left,g+U,f-o.right,g+U)};const[G,te,I,i,F]=await Promise.all([se.get(`https://backmultidestinos.onrender.com/habitacionCotizacion/${v}`),se.get(`https://backmultidestinos.onrender.com/cotizacion/${v}`),se.get(`https://backmultidestinos.onrender.com/ImpuestoCot/${v}`),se.get(`https://backmultidestinos.onrender.com/liquidacion/${K}`),se.get(`https://backmultidestinos.onrender.com/pasajero/${K}`)]);if(G.status!==200||te.status!==200){console.error("Error al obtener datos de habitacionCotizacion o cotizacion");return}const h=te.data[0],N=I.data[0];console.log("impuesto",N);const C=G.data;console.log("habitacion",C);const P=i.data;console.log("liquidacion",P);const l=P[0].telefono;console.log(l);const T=F.data;console.log("pasajero",T);const b=await se.get(`https://backmultidestinos.onrender.com/cliente/buscar/${h.cliente}`);console.log("clienteResponse",b);const m=b.data[0];console.log("clienteData",m);const d=(ie=m==null?void 0:m.tipoBase)!=null?ie:"Valor por defecto",n=await se.get(`https://backmultidestinos.onrender.com/user/${h.CreadorCotizacion}`),r=n.Data;console.log("vendedor",n.data.nombreCompleto);const p={hotel:h.hotel,nombrePrograma:h.nombrePrograma,destino:h.destino},t=await se.post("https://backmultidestinos.onrender.com/hoteles/buscar",p),e=h.incluye?h.incluye:t.data[0].incluye,s=h.noIncluye?h.noIncluye:t.data[0].noIncluye,a=new Ot,o={top:10,bottom:10,left:10,right:10},f=a.internal.pageSize.width,c=a.internal.pageSize.height,A=40,x={left:10,right:10,top:5,bottom:5},j=await new Promise((g,D)=>{const O=new Image;O.src="https://i.ibb.co/1sFJ7dT/imgAzul.png",O.onload=()=>g(O),O.onerror=D}),S=j.width/j.height,u=f/4-x.left-x.right,w=Math.min(100,u),y=w/S,H=o.top+(A-y)/2,_=`PBX(601)7621133
CALLE 64 No. 11-37 LOC 301
EMAIL: MULTIDESTINOS_EXPRESS@YAHOO.COM`,R=`Numero de cotizaci\xF3n: ${v}`;a.addImage(j,"PNG",o.left+x.left,H,w,y);const k=f-o.left-o.right-w-x.left-x.right-10;a.setFontSize(10),a.text(a.splitTextToSize(_,k),o.left+w+x.left+x.right,o.top+10);const $=f-o.right-a.getTextWidth(R)-x.right;a.setFontSize(12),a.setFont("Helvetica-Bold",12),a.text(R,$,o.top+10),a.setDrawColor(0),a.rect(o.left,o.top,f-o.left-o.right,A,"S"),a.setFontSize(10);const q=o.top+A+10;a.setFontSize(10),a.text("SOLICITUD DE RESERVA:",o.left,q-4),a.setFontSize(8);const M=["FECHA SOLICITUD:","AGENCIA:","TEL\xC9FONO:","CONTACTO:","NIT:","VENDEDOR:"],oe=[new Date(new Date(h.fechaCreacion).getTime()+new Date(h.fechaCreacion).getTimezoneOffset()*6e4).toLocaleDateString(),h.cliente.toString(),m!=null&&m.telefono?m.telefono.toString():"N/A","N/A",m!=null&&m.nit?m.nit.toString():"N/A",n.data.nombreCompleto?n.data.nombreCompleto.toString():"N/A"],L=6,ge=(f-o.left-o.right)/L;let de=o.left,z=q;for(let g=0;g<M.length;g++){a.text(M[g],de,z);const D=oe[g]!==void 0?oe[g]:"N/A",O=a.splitTextToSize(D,ge-2);a.text(O,de,z+5),de+=ge,((g+1)%L===0||g===M.length-1)&&(z+=15,de=o.left)}const xt=Ne(C),ot=["NOCHES:","HOTEL:","PLAN:","DESTINO:","DIRECCION:","ACOMODACI\xD3N:"],Ge=[h.noches?h.noches.toString():"N/A",h.hotel?h.hotel.toString():"N/A",h.plan?h.plan.toString():"N/A",h.destino?h.destino.toString():"N/A",h.direccion?h.direccion.toString():"N/A",xt.toString()];console.log("campso2",Ge);const ht=6,nt=(f-o.left-o.right)/ht;z+=1;for(let g=0;g<ot.length;g++){a.text(ot[g],de,z);const D=Ge[g]!==void 0?Ge[g]:"N/A",O=a.splitTextToSize(D,nt-2);a.text(O,de,z+5),de+=nt}z+=1,a.setFontSize(10),a.text("PASAJEROS: ",o.left,z+12),z+=20;const gt=["NOMBRE","DOCUMENTO","F. NACIMIENTO","EDAD","TELEFONO RESERVA"],it=T.map(g=>{const D=new Date(g.fechaNacimiento),O=new Date;let Z=O.getFullYear()-D.getFullYear();const ne=O.getMonth()-D.getMonth();return(ne<0||ne===0&&O.getDate()<D.getDate())&&Z--,[g.nombre,g.numeroDocumento,D.toLocaleDateString(),Z,P[0].telefono?P[0].telefono.toString():"N/A"]}),rt=(f-o.left-o.right)/gt.length,Re=f-o.left-o.right,lt=10+8*it.length;a.rect(o.left,z,Re,lt,"S"),a.setFontSize(8),gt.forEach((g,D)=>{a.text(g,o.left+5+D*rt,z+5)}),z+=10,it.forEach((g,D)=>{g.forEach((O,Z)=>{a.text(O.toString(),o.left+5+Z*rt,z+D*8)})}),z+=lt-15,z+=22,a.setFontSize(10),a.text("ITINERARIO: ",o.left,z-10);const mt=["AEROLINEA","VUELO","FECHA","RUTA","CLASE","HR SALIDA","HR LLEGADA","RECORD"],Ie=[[h.aerolineaIda||"N/A",h.vueloIda||"N/A",h.fechaInicio?new Date(new Date(h.fechaInicio).getTime()+new Date(h.fechaInicio).getTimezoneOffset()*6e4).toLocaleDateString():"N/A",h.ruta1||"N/A",h.claseIda||"N/A",h.horaSalidaIda||"N/A",h.horaLlegadaIda||"N/A",h.recordIda||"N/A"]];h.aerolineaEscalaIda!=null&&(Ie.push([h.aerolineaEscalaIda||"N/A",h.vueloEscalaIda||"N/A",h.fechaInicio?new Date(new Date(h.fechaInicio).getTime()+new Date(h.fechaInicio).getTimezoneOffset()*6e4).toLocaleDateString():"N/A","Escala Ida",h.claseEscalaIda||"N/A",h.horaSalidaEscalaIda||"N/A",h.horaLlegadaEscalaIda||"N/A",""]),Ie.push([h.aerolineaEscalaVuelta||"N/A",h.vueloEscalaVuelta||"N/A",h.fechaFin?new Date(new Date(h.fechaFin).getTime()+new Date(h.fechaFin).getTimezoneOffset()*6e4).toLocaleDateString():"N/A","Escala Vuelta",h.claseEscalaVuelta||"N/A",h.horaSalidaEscalaVuelta||"N/A",h.horaLlegadaEscalaVuelta||"N/A",""])),Ie.push([h.aerolineaVuelta||"N/A",h.vueloVuelta||"N/A",h.fechaFin?new Date(new Date(h.fechaFin).getTime()+new Date(h.fechaFin).getTimezoneOffset()*6e4).toLocaleDateString():"N/A",h.ruta2||"N/A",h.claseVuelta||"N/A",h.horaSalidaVuelta||"N/A",h.horaLlegadaVuelta||"N/A",h.recordVuelta||"N/A"]);const ve=(f-o.left-o.right)/mt.length,wt=f-o.left-o.right,We=12+8*Ie.length;z+=5,a.rect(o.left,z-5,wt,We,"S"),a.setFontSize(8),mt.forEach((g,D)=>{a.text(g,o.left+D*ve,z)}),z+=5,Ie.forEach((g,D)=>{g.forEach((O,Z)=>{a.text(O,o.left+Z*ve,z+(D+1)*8)})}),z+=We-5;let Se;const Je="Esta cotizaci\xF3n est\xE1 sujeta a cambio y disponibilidad al momento de reservar (Sin servicio confirmado)",Xe=z,st=30;a.setDrawColor(0),a.rect(o.left,Xe,f-o.left-o.right,st),a.setFontSize(12),a.text("OBSERVACIONES:",o.left+2,Xe+6),a.setFontSize(10),a.text(Je,o.left+2,Xe+15,{maxWidth:f-o.left-o.right-4}),z=Xe+st;const xe=z+10;a.setFontSize(8);const pt=`El pago de su plan se realizar\xE1 conforme a las siguientes condiciones:

Planes con inicio dentro de los 30 d\xEDas:  El pago total deber\xE1 efectuarse dentro de un d\xEDa h\xE1bil a partir de la fecha de env\xEDo de este documento.
Planes con inicio posterior a los 30 d\xEDas: El pago se realizar\xE1 en dos cuotas:
  * Primera cuota: 50% del valor total del plan, pagadero dentro de un d\xEDa h\xE1bil a partir de la fecha de env\xEDo de este documento.
  * Segunda cuota: 50% restante del valor total del plan, pagadero 30 d\xEDas antes de la fecha de inicio del plan.`,dt=a.splitTextToSize(pt,f-o.left-o.right-4);let Le=18;dt.forEach(g=>{Le+=a.getTextDimensions(g,{fontSize:8}).h}),z=J(a,z,Le),a.setDrawColor(0),a.rect(o.left,xe,f-o.left-o.right,Le),a.setFontSize(12),a.text("PLAZO DE PAGO:",o.left+2,xe+6),a.setFontSize(8),Se=xe+15,dt.forEach(g=>{a.text(g,o.left+2,Se,{maxWidth:f-o.left-o.right-4}),Se+=a.getTextDimensions(g,{fontSize:8}).h}),z=xe+Le;let ze=!1;a.setFontSize(8);const ke=e.split("\xBF");let Ke=[];ke.forEach(g=>{const D=a.splitTextToSize(g,f-o.left-o.right-4);Ke=Ke.concat(D)});let we=18;ke.forEach(g=>{const D=a.splitTextToSize(g,f-o.left-o.right-4);for(let O=0;O<D.length;O++){const Z=D[O];we+=a.getTextDimensions(Z,{fontSize:8}).h,!Z.endsWith(`
`)&&O<D.length-1&&(we+=a.getTextDimensions(" ",{fontSize:8}).h)}}),z=J(a,z,we),z===o.top&&(ze=!0);const be=z+10;a.setDrawColor(0),a.rect(o.left,be,f-o.left-o.right,we),a.setFontSize(12),a.text("INCLUYE:",o.left+2,be+6),a.setFontSize(8),Se=be+15,Ke.forEach(g=>{a.text(g,o.left+2,Se,{maxWidth:f-o.left-o.right-4}),Se+=a.getTextDimensions(g,{fontSize:8}).h}),z=be+we;const Me=s.split("\xBF");let Fe=[];Me.forEach(g=>{const D=a.splitTextToSize(g,f-o.left-o.right-4);Fe=Fe.concat(D)});let ee=18;Me.forEach(g=>{const D=a.splitTextToSize(g,f-o.left-o.right-4);for(let O=0;O<D.length;O++){const Z=D[O];ee+=a.getTextDimensions(Z,{fontSize:8}).h,!Z.endsWith(`
`)&&O<D.length-1&&(ee+=a.getTextDimensions(" ",{fontSize:8}).h)}}),z=J(a,z,ee),ze||(z=o.top);const Q=z+10;a.setDrawColor(0),a.rect(o.left,Q,f-o.left-o.right,ee),a.setFontSize(12),a.text("NO INCLUYE:",o.left+2,Q+6),a.setFontSize(8),Se=Q+15,Fe.forEach(g=>{a.text(g,o.left+2,Se,{maxWidth:f-o.left-o.right-4}),Se+=a.getTextDimensions(g,{fontSize:8}).h}),z=Q+ee,a.addPage(),z=o.top,a.setFontSize(10),a.text("LIQUIDACI\xD3N:",o.left,z),z+=5;const ct=z+5,V=2,U=6,ae=(f-o.left-o.right)/6;a.setDrawColor(0);let Be=0;a.setFontSize(7);let Ee=0;C.forEach(g=>{const D=ct+Ee*U;me(D);const O=`Valor adul ${g.acomodacion}`;a.text(O,o.left+V,D+U/2,{baseline:"middle"});const Z=Math.round(g.precioComisionableAdulto);a.text(Z.toString(),o.left+ae+V,D+U/2,{baseline:"middle"});const ne=g.adultos;a.text(ne.toString(),o.left+2*ae+V,D+U/2,{baseline:"middle"});const fe=Math.round(g.precioComisionableAdulto*g.adultos);if(a.text(fe.toString(),o.left+3*ae+V,D+U/2,{baseline:"middle"}),Ee===0){a.setFontSize(6);const pe=d==="Comisi\xF3n"?"BASE COMISI\xD3N":"BASE COMISION";a.text(pe,o.left+4*ae+V,D+U/2,{baseline:"middle"}),a.setFontSize(7)}let Ce=fe;if(g.ni\u00F1os>0&&(Ce+=Math.round(g.precioComisionableNino*g.ni\u00F1os)),Be+=Ce,Ee++,g.ni\u00F1os>0){const pe=ct+Ee*U;me(pe);const ue=`Valor child ${g.acomodacion}`;a.text(ue,o.left+V,pe+U/2,{baseline:"middle"});const he=Math.round(g.precioComisionableNino);a.text(he.toString(),o.left+ae+V,pe+U/2,{baseline:"middle"});const Dt=g.ni\u00F1os;a.text(Dt.toString(),o.left+2*ae+V,pe+U/2,{baseline:"middle"});const Ue=Math.round(g.precioComisionableNino*g.ni\u00F1os);a.text(Ue.toString(),o.left+3*ae+V,pe+U/2,{baseline:"middle"}),Ee++}}),a.text(Be.toString(),o.left+5*ae+V,ct+U/2,{baseline:"middle"}),z=ct+Ee*U+10;const je=["TRANSPORTE NO COMISI","Q","YS","CO","TA","YS TA","TOTAL IMPUESTOS"],Ze=[h.otros,h.combus,h.iva,h.tasa,h.ta,h.ivaTa,h.precioTrans];if(h.suplemento>0&&(je.push("SUPLEMENTO"),Ze.push(h.suplemento)),h.extra1)if(h.extra1.includes("*")){let g=h.extra1.split("*"),D=g[0],O=g[1];je.push("Valor Extra","Valor Extra2"),Ze.push(D,O)}else{let g=h.extra1;je.push("Valor Extra"),Ze.push(g)}je.forEach((g,D)=>{const O=z+D*U;me(O),a.text(g,o.left+V,O+U/2,{baseline:"middle"});const Z=h.totalPasajeros,ne=Ze[D]||0,fe=Z!==0?Math.trunc(ne/Z):"";a.text(fe.toString(),o.left+ae+V,O+U/2,{baseline:"middle"});const Ce=Z!==0?Math.trunc(Z).toString():"";a.text(Ce,o.left+2*ae+V,O+U/2,{baseline:"middle"});const pe=ne!==0?Math.trunc(ne).toString():"";if(a.text(pe,o.left+3*ae+V,O+U/2,{baseline:"middle"}),g==="Q"){a.text("COMISION",o.left+4*ae+V,O+U/2,{baseline:"middle"});const ue=h.clientePorcentaje||0,he=Math.trunc(ue).toString()+"%";a.text(he,o.left+5*ae+V,O+U/2,{baseline:"middle"})}else if(g==="YS"){a.text("Valor Descuento",o.left+4*ae+V,O+U/2,{baseline:"middle"});const ue=h.valorDescuento||0,he=Math.trunc(ue).toString();a.text(he,o.left+5*ae+V,O+U/2,{baseline:"middle"}),d==="Comisi\xF3n"&&[{label:`IVA(${m.porcentajeIva}%) (-)`,value:h.ivaValor},{label:`RTE FUENTE(${m.rteFuente}%) (+)`,value:h.rteFuente},{label:`RTE ICA(${m.rteIca}%) (+)`,value:h.rteIca},{label:"Total Comisi\xF3n",value:h.totalComision}].forEach((Ue,Nt)=>{const Ye=O+(Nt+1)*U;me(Ye),a.text(Ue.label,o.left+4*ae+V,Ye+U/2,{baseline:"middle"}),a.text(Ue.value.toString(),o.left+5*ae+V,Ye+U/2,{baseline:"middle"})})}}),z+=je.length*U,C.forEach(g=>{if(g.adultos>0){const D=z;me(D),a.text(`Valor total Adt ${g.acomodacion}`,o.left+V,D+U/2,{baseline:"middle"});const O=g.precioHabitacionAdulto||0,Z=Te(O).format("$0,0");a.text(Z,o.left+3*ae+V,D+U/2,{baseline:"middle"}),z+=U}if(g.ni\u00F1os>0){const D=z;me(D),a.text(`Valor total Chd ${g.acomodacion}`,o.left+V,D+U/2,{baseline:"middle"});const O=g.precioHabitacionNino||0,Z=Te(O).format("$0,0");a.text(Z,o.left+3*ae+V,D+U/2,{baseline:"middle"}),z+=U}}),a.setFontSize(8),z+=U,me(z),a.text("Valor total",o.left+V,z+U/2,{baseline:"middle"});const Pt=h.precioBrutoTotal||0,vt=Te(Pt).format("$0,0");a.text(vt,o.left+3*ae+V,z+U/2,{baseline:"middle"}),a.text("Precio a pagar",o.left+4*ae+V,z+U/2-2,{baseline:"middle"}),a.text("a Multidestinos",o.left+4*ae+V,z+U/2+2,{baseline:"middle"});const ut=0,St=parseFloat(h.totalPrecioCliente)||0,Tt=ut>0?St+ut:St,Ve=Te(Tt).format("$0,0");a.text(Ve,o.left+5*ae+V,z+U/2,{baseline:"middle"}),z+=U+10;const ye=o.left;let Oe=z+5;const qe=190;let et=30;a.setFontSize(7),a.setLineWidth(.5),a.setFontSize(6);const _e=5,tt="PARA CONFIRMACIONES SE DEBE ENVIAR DEPOSITO DEL 50% DEL VALOR DEL PLAN Y EL SALDO 30 DIAS ANTES DE LA SALIDA, SI LA FECHA DE VIAJES CERCANA SE DEBE CANCELAR EL 100%. LOS SERVICIOS DEJADOS DE TOMAR NO SON REMBOLSABLES. LA CANCELACI\xD3N CON 18 DIAS ANTES DE VIAJE LA PENALIDAD SERA DEL 100% DEL VALOR DEL PLAN, LOS TIQUETES NO SON REEMBOLSABLE, NI ENDOSABLES, PENALIDAD POR CAMBIO (FECHA, NOMBRE, HORA, RUTAS) 200.000. ESTAS POLITICAS ESTAN PUBLICADAS DE MANERA CLARA Y ESPECIFICA EN NUESTRA PAGINA WWW.MULTIDESTINOSEXPRESS.COM. *TARIFAS SUJETA A CAMBIO Y DISPONIBILIDAD SIN PREVIO AVISO*",ft=a.splitTextToSize(tt,qe-10);et=20+ft.length*_e,Oe+et>c-o.bottom&&(a.addPage(),z=o.top),Oe=z,a.rect(ye,z,qe,et),a.text("Deposito y Condiciones de Pago",ye+5,Oe+3),ft.forEach((g,D)=>{a.text(g,ye+5,Oe+10+D*_e)}),P[0].facturaPara&&(z=Oe+10+ft.length*_e,a.setFontSize(8),a.text("FACTURA A NOMBRE DE:",ye+5,z),z+=_e,a.text(P[0].facturaPara,ye+5,z)),z+=et+5;const E=[];for(const g of C){const D={pertenece:h.salida,destino:h.destino,nombrePrograma:h.nombrePrograma,hotel:h.hotel,noches:h.noches,tipoHabitacion:g.tipoHabitacion};try{const O=await se.post("https://backmultidestinos.onrender.com/costosHotel/buscar",D);console.log("Respuesta:",O.data),E.push(O.data)}catch(O){console.error("Error al buscar costo hotel:",((re=O.response)==null?void 0:re.data)||O.message)}}console.log("costosHotelResponses",E),a.setFontSize(10),a.text("COSTOS DE HOTEL:",o.left,z),z+=5,a.setFont("helvetica","bold"),a.text(h.hotel,o.left,z),a.setFont("helvetica","normal"),z+=8,E.forEach((g,D)=>{const O=C[D];a.setFontSize(8),a.text(`\u2022 Tipo de habitaci\xF3n: ${O.tipoHabitacion}`,o.left,z),z+=6;const Z=O.acomodacion.toLowerCase();let ne="No disponible";g&&g.length>0&&g[0][Z]&&(ne=g[0][Z],typeof ne=="number"&&(ne=Te(ne).format("$0,0"))),a.text(`  - Acomodaci\xF3n: ${O.acomodacion}`,o.left+10,z),z+=6,a.text(`  - Valor: ${ne}`,o.left+10,z),z+=8});const W=a.output("blob");return a.save(`cotizacion_${v}.pdf`),W}catch(J){console.error("Error al descargar cotizaci\xF3n:",J)}},async descargarLiquidacionCano(v,K){try{let ie=function(E,W,g,D=10){return W+g>a-D?(E.addPage(),e.top):W},ge=function(E){return E.map(W=>{const g=W.adultos,D=W.ni\u00F1os,O=`1x${g}`;return D>0?`${O} CHD`:O}).join(", ")},U=function(E){for(let W=0;W<=6;W++){const g=e.left+W*V;t.line(g,E,g,E+Q)}t.line(e.left,E,s-e.right,E),t.line(e.left,E+Q,s-e.right,E+Q)};const[re,J,G,te,I]=await Promise.all([se.get(`https://backmultidestinos.onrender.com/habitacionCotizacion/${v}`),se.get(`https://backmultidestinos.onrender.com/cotizacion/${v}`),se.get(`https://backmultidestinos.onrender.com/ImpuestoCot/${v}`),se.get(`https://backmultidestinos.onrender.com/liquidacion/${K}`),se.get(`https://backmultidestinos.onrender.com/pasajero/${K}`)]);if(re.status!==200||J.status!==200){console.error("Error al obtener datos de habitacionCotizacion o cotizacion");return}const i=J.data[0],F=G.data[0];console.log("impuesto",F);const h=re.data;console.log("habitacion",h);const N=te.data;console.log("liquidacion",N);const C=I.data;console.log("pasajero",C);const P=await se.get(`https://backmultidestinos.onrender.com/cliente/buscar/${i.cliente}`);console.log("clienteResponse",P);const l=P.data[0];console.log("clienteData",l);const T=l.tipoBase,b=await se.get(`https://backmultidestinos.onrender.com/user/${i.CreadorCotizacion}`),m=b.Data;console.log("vendedor",b.data.nombreCompleto);const d={hotel:i.hotel,nombrePrograma:i.nombrePrograma,destino:i.destino},n=await se.post("https://backmultidestinos.onrender.com/hoteles/buscar",d),r=n.data[0].incluye,p=n.data[0].noIncluye,t=new Ot,e={top:10,bottom:10,left:10,right:10},s=t.internal.pageSize.width,a=t.internal.pageSize.height,o=40,f={left:10,right:10,top:5,bottom:5},c=await new Promise((E,W)=>{const g=new Image;g.src="https://i.ibb.co/1sFJ7dT/imgAzul.png",g.onload=()=>E(g),g.onerror=W}),A=c.width/c.height,x=s/4-f.left-f.right,j=Math.min(100,x),S=j/A,u=e.top+(o-S)/2,w=`PBX(601)7621133
CALLE 64 No. 11-37 LOC 301
EMAIL: MULTIDESTINOS_EXPRESS@YAHOO.COM`,y=`Numero de Liquidacion: ${K}`;t.addImage(c,"PNG",e.left+f.left,u,j,S);const H=s-e.left-e.right-j-f.left-f.right-10;t.setFontSize(10),t.text(t.splitTextToSize(w,H),e.left+j+f.left+f.right,e.top+10);const _=s-e.right-t.getTextWidth(y)-f.right;t.setFontSize(12),t.setFont("Helvetica-Bold",12),t.text(y,_,e.top+10),t.setDrawColor(0),t.rect(e.left,e.top,s-e.left-e.right,o,"S"),t.setFontSize(10);const R=e.top+o+10;t.setFontSize(10),t.text("SOLICITUD DE RESERVA:",e.left,R-4),t.setFontSize(8);const k=["FECHA SOLICITUD:","AGENCIA:","TEL\xC9FONO:","CONTACTO:","NIT:","VENDEDOR:"],$=[new Date(i.fechaCreacion).toLocaleDateString(),i.cliente.toString(),l.telefono?l.telefono.toString():"N/A",l.nit?l.nit.toString():"N/A",l.nit?l.nit.toString():"N/A",b.data.nombreCompleto?b.data.nombreCompleto.toString():"N/A"],q=6,M=(s-e.left-e.right)/q;let oe=e.left,L=R;for(let E=0;E<k.length;E++){t.text(k[E],oe,L);const W=$[E]!==void 0?$[E]:"N/A",g=t.splitTextToSize(W,M-2);t.text(g,oe,L+5),oe+=M,((E+1)%q===0||E===k.length-1)&&(L+=15,oe=e.left)}const de=ge(h),z=["NOCHES:","HOTEL:","PLAN:","DESTINO:","DIRECCION:","ACOMODACI\xD3N:"],Ne=[i.noches?i.noches.toString():"N/A",i.hotel?i.hotel.toString():"N/A",i.plan?i.plan.toString():"N/A",i.destino?i.destino.toString():"N/A",i.direccion?i.direccion.toString():"N/A",de.toString()];console.log("campso2",Ne);const xt=6,ot=(s-e.left-e.right)/xt;L+=1;for(let E=0;E<z.length;E++){t.text(z[E],oe,L);const W=Ne[E]!==void 0?Ne[E]:"N/A",g=t.splitTextToSize(W,ot-2);t.text(g,oe,L+5),oe+=ot}L+=1,t.setFontSize(10),t.text("PASAJEROS: ",e.left,L+12),L+=20;const Ge=["NOMBRE","DOCUMENTO","F. NACIMIENTO","EDAD"],ht=C.map(E=>{const W=new Date(E.fechaNacimiento),g=new Date;let D=g.getFullYear()-W.getFullYear();const O=g.getMonth()-W.getMonth();return(O<0||O===0&&g.getDate()<W.getDate())&&D--,[E.nombre,E.numeroDocumento,W.toLocaleDateString(),D]}),nt=(s-e.left-e.right)/Ge.length,gt=s-e.left-e.right,it=10+8*ht.length;t.rect(e.left,L,gt,it,"S"),t.setFontSize(8),Ge.forEach((E,W)=>{t.text(E,e.left+5+W*nt,L+5)}),L+=10,ht.forEach((E,W)=>{E.forEach((g,D)=>{t.text(g.toString(),e.left+5+D*nt,L+W*8)})}),L+=it-15,L+=1,t.setFontSize(10),t.text("ITINERARIO: ",e.left,L+12),L+=20;const rt=["AEROLINEA","VUELO","FECHA","RUTA","CLASE","HR SALIDA","HR LLEGADA","RECORD"],Re=[[i.aerolineaIda||"N/A",i.vueloIda||"N/A",i.fechaInicio?new Date(new Date(i.fechaInicio).getTime()+new Date(i.fechaInicio).getTimezoneOffset()*6e4).toLocaleDateString():"N/A",i.ruta1||"N/A",i.claseIda||"N/A",i.horaSalidaIda||"N/A",i.horaLlegadaIda||"N/A",i.recordIda||"N/A"]];i.aerolineaEscalaIda!=null&&(Re.push([i.aerolineaEscalaIda||"N/A",i.vueloEscalaIda||"N/A",i.fechaInicio?new Date(new Date(i.fechaInicio).getTime()+new Date(i.fechaInicio).getTimezoneOffset()*6e4).toLocaleDateString():"N/A","Escala Ida",i.claseEscalaIda||"N/A",i.horaSalidaEscalaIda||"N/A",i.horaLlegadaEscalaIda||"N/A",""]),Re.push([i.aerolineaEscalaVuelta||"N/A",i.vueloEscalaVuelta||"N/A",i.fechaFin?new Date(new Date(i.fechaFin).getTime()+new Date(i.fechaFin).getTimezoneOffset()*6e4).toLocaleDateString():"N/A","Escala Vuelta",i.claseEscalaVuelta||"N/A",i.horaSalidaEscalaVuelta||"N/A",i.horaLlegadaEscalaVuelta||"N/A",""])),Re.push([i.aerolineaVuelta||"N/A",i.vueloVuelta||"N/A",i.fechaFin?new Date(new Date(i.fechaFin).getTime()+new Date(i.fechaFin).getTimezoneOffset()*6e4).toLocaleDateString():"N/A",i.ruta2||"N/A",i.claseVuelta||"N/A",i.horaSalidaVuelta||"N/A",i.horaLlegadaVuelta||"N/A",i.recordVuelta||"N/A"]);const lt=(s-e.left-e.right)/rt.length,mt=s-e.left-e.right,Ie=10+8*Re.length;t.rect(e.left,L,mt,Ie,"S"),t.setFontSize(8),rt.forEach((E,W)=>{t.text(E,e.left+W*lt,L+5)}),L+=10,Re.forEach((E,W)=>{E.forEach((g,D)=>{t.text(g,e.left+D*lt,L+W*8)})}),L+=Ie-8;let ve;const wt="Esta cotizaci\xF3n est\xE1 sujeta a cambio y disponibilidad al momento de reservar (Sin servicio confirmado)",We=L,Se=30;t.setDrawColor(0),t.rect(e.left,We,s-e.left-e.right,Se),t.setFontSize(12),t.text("OBSERVACIONES:",e.left+2,We+6),t.setFontSize(10),t.text(wt,e.left+2,We+15,{maxWidth:s-e.left-e.right-4}),L=We+Se;const Je=L+10;t.setFontSize(8);const Xe=`El pago de su plan se realizar\xE1 conforme a las siguientes condiciones:

Planes con inicio dentro de los 30 d\xEDas:  El pago total deber\xE1 efectuarse dentro de un d\xEDa h\xE1bil a partir de la fecha de env\xEDo de este documento.
Planes con inicio posterior a los 30 d\xEDas: El pago se realizar\xE1 en dos cuotas:
  * Primera cuota: 50% del valor total del plan, pagadero dentro de un d\xEDa h\xE1bil a partir de la fecha de env\xEDo de este documento.
  * Segunda cuota: 50% restante del valor total del plan, pagadero 30 d\xEDas antes de la fecha de inicio del plan.`,st=t.splitTextToSize(Xe,s-e.left-e.right-4);let xe=18;st.forEach(E=>{xe+=t.getTextDimensions(E,{fontSize:8}).h}),L=ie(t,L,xe),t.setDrawColor(0),t.rect(e.left,Je,s-e.left-e.right,xe),t.setFontSize(12),t.text("PLAZO DE PAGO:",e.left+2,Je+6),t.setFontSize(8),ve=Je+15,st.forEach(E=>{t.text(E,e.left+2,ve,{maxWidth:s-e.left-e.right-4}),ve+=t.getTextDimensions(E,{fontSize:8}).h}),L=Je+xe;let pt=!1;t.setFontSize(8);const dt=r.split("\xBF");let Le=[];dt.forEach(E=>{const W=t.splitTextToSize(E,s-e.left-e.right-4);Le=Le.concat(W)});let ze=18;dt.forEach(E=>{const W=t.splitTextToSize(E,s-e.left-e.right-4);for(let g=0;g<W.length;g++){const D=W[g];ze+=t.getTextDimensions(D,{fontSize:8}).h,!D.endsWith(`
`)&&g<W.length-1&&(ze+=t.getTextDimensions(" ",{fontSize:8}).h)}}),L=ie(t,L,ze),L===e.top&&(pt=!0);const ke=L+10;t.setDrawColor(0),t.rect(e.left,ke,s-e.left-e.right,ze),t.setFontSize(12),t.text("INCLUYE:",e.left+2,ke+6),t.setFontSize(8),ve=ke+15,Le.forEach(E=>{t.text(E,e.left+2,ve,{maxWidth:s-e.left-e.right-4}),ve+=t.getTextDimensions(E,{fontSize:8}).h}),L=ke+ze;const Ke=p.split("\xBF");let we=[];Ke.forEach(E=>{const W=t.splitTextToSize(E,s-e.left-e.right-4);we=we.concat(W)});let be=18;Ke.forEach(E=>{const W=t.splitTextToSize(E,s-e.left-e.right-4);for(let g=0;g<W.length;g++){const D=W[g];be+=t.getTextDimensions(D,{fontSize:8}).h,!D.endsWith(`
`)&&g<W.length-1&&(be+=t.getTextDimensions(" ",{fontSize:8}).h)}}),L=ie(t,L,be),pt||(L=e.top);const Me=L+10;t.setDrawColor(0),t.rect(e.left,Me,s-e.left-e.right,be),t.setFontSize(12),t.text("NO INCLUYE:",e.left+2,Me+6),t.setFontSize(8),ve=Me+15,we.forEach(E=>{t.text(E,e.left+2,ve,{maxWidth:s-e.left-e.right-4}),ve+=t.getTextDimensions(E,{fontSize:8}).h}),L=Me+be,t.addPage(),L=e.top,t.setFontSize(10),t.text("LIQUIDACI\xD3N:",e.left,L),L+=5;const Fe=L+5,ee=2,Q=6,V=(s-e.left-e.right)/6;t.setDrawColor(0);let Et=0;t.setFontSize(7);let ae=0;h.forEach(E=>{const W=Fe+ae*Q;U(W);const g=`Valor adul ${E.acomodacion}`;t.text(g,e.left+ee,W+Q/2,{baseline:"middle"});const D=Math.round(E.precioComisionableAdulto);t.text(D.toString(),e.left+V+ee,W+Q/2,{baseline:"middle"});const O=E.adultos;t.text(O.toString(),e.left+2*V+ee,W+Q/2,{baseline:"middle"});const Z=Math.round(E.precioComisionableAdulto*E.adultos);if(t.text(Z.toString(),e.left+3*V+ee,W+Q/2,{baseline:"middle"}),ae===0){t.setFontSize(6);const fe=T==="Comisi\xF3n"?"BASE COMISI\xD3N":"BASE COMISION";t.text(fe,e.left+4*V+ee,W+Q/2,{baseline:"middle"}),t.setFontSize(7)}let ne=Z;if(E.ni\u00F1os>0&&(ne+=Math.round(E.precioComisionableNino*E.ni\u00F1os)),Et+=ne,ae++,E.ni\u00F1os>0){const fe=Fe+ae*Q;U(fe);const Ce=`Valor child ${E.acomodacion}`;t.text(Ce,e.left+ee,fe+Q/2,{baseline:"middle"});const pe=Math.round(E.precioComisionableNino);t.text(pe.toString(),e.left+V+ee,fe+Q/2,{baseline:"middle"});const ue=E.ni\u00F1os;t.text(ue.toString(),e.left+2*V+ee,fe+Q/2,{baseline:"middle"});const he=Math.round(E.precioComisionableNino*E.ni\u00F1os);t.text(he.toString(),e.left+3*V+ee,fe+Q/2,{baseline:"middle"}),ae++}}),t.text(Et.toString(),e.left+5*V+ee,Fe+Q/2,{baseline:"middle"}),L=Fe+ae*Q+10;const me=["TRANSPORTE NO COMI","Q","YS","CO","TA","YS TA","defensaCivil","alcaldiaNacional","alcaldiaExtranjero","pqsNaturalesExtranjero","pqsNaturales25a65","pqsNaturales5a24","cormacarenaExtranjero","cormacarena5a11","cormacarena12a65"],Be=[i.otros,i.combus,i.iva,i.tasa,i.ta,i.ivaTa,F.defensaCivil_Total,F.alcaldiaNacional_Total,F.alcaldiaExtranjero_Total,F.pqsNaturalesExtranjero_Total,F.pqsNaturales25a65_Total,F.pqsNaturales5a24_Total,F.cormacarenaExtranjero_Total,F.cormacarena5a11_Total,F.cormacarena12a65_Total,i.precioTrans],Ee=["alcaldiaNacional","alcaldiaExtranjero","pqsNaturalesExtranjero","pqsNaturales25a65","pqsNaturales5a24","cormacarenaExtranjero","cormacarena5a11","cormacarena12a65"],je={defensaCivil:"Defensa Civil",alcaldiaNacional:"Alcald\xEDa Nacional",alcaldiaExtranjero:"Alcald\xEDa Extranjero",pqsNaturalesExtranjero:"PQS. Naturales Extranjero",pqsNaturales25a65:"PQS. Naturales 25 a 65",pqsNaturales5a24:"PQS. Naturales 5 a 24",cormacarenaExtranjero:"Cormacarena Extranjero",cormacarena5a11:"Cormacarena 5 a 11",cormacarena12a65:"Cormacarena 12 a 65"};if(i.suplemento>0&&(me.push("SUPLEMENTO"),Be.push(i.suplemento)),i.extra1)if(i.extra1.includes("*")){let E=i.extra1.split("*"),W=E[0],g=E[1];me.push("Valor Extra","Valor Extra2"),Be.push(W,g)}else{let E=i.extra1;me.push("Valor Extra"),Be.push(E)}me.forEach((E,W)=>{const g=L+W*Q;U(g);const D=je[E]||E;t.text(D,e.left+ee,g+Q/2,{baseline:"middle"});const O=i.totalPasajeros,Z=Be[W]||0;let ne="";if(Ee.includes(E)){const ue=`${E}_numeroPersonas`,he=F[ue]||0;ne=he!==0?Math.trunc(Z/he):""}else ne=O!==0?Math.trunc(Z/O):"";t.text(ne.toString(),e.left+V+ee,g+Q/2,{baseline:"middle"});const fe=O!==0?Math.trunc(O).toString():"";let Ce="";if(Ee.includes(E)){const ue=`${E}_numeroPersonas`;Ce=F[ue]||""}else Ce=fe;t.text(Ce,e.left+2*V+ee,g+Q/2,{baseline:"middle"});const pe=Z!==0?Math.trunc(Z).toString():"";if(t.text(pe,e.left+3*V+ee,g+Q/2,{baseline:"middle"}),E==="Q"){t.text("Porcentaje",e.left+4*V+ee,g+Q/2,{baseline:"middle"});const ue=i.clientePorcentaje||0,he=Math.trunc(ue).toString()+"%";t.text(he,e.left+5*V+ee,g+Q/2,{baseline:"middle"})}else if(E==="YS"){t.text("Valor Descuento",e.left+4*V+ee,g+Q/2,{baseline:"middle"});const ue=i.valorDescuento||0,he=Math.trunc(ue).toString();t.text(he,e.left+5*V+ee,g+Q/2,{baseline:"middle"}),T==="Comisi\xF3n"&&[{label:`IVA(${l.porcentajeIva}%) (-)`,value:i.ivaValor},{label:`RTE FUENTE(${l.rteFuente}%) (+)`,value:i.rteFuente},{label:`RTE ICA(${l.rteIca}%) (+)`,value:i.rteIca},{label:"Total Comisi\xF3n",value:i.totalComision}].forEach((Ue,Nt)=>{const Ye=g+(Nt+1)*Q;U(Ye),t.text(Ue.label,e.left+4*V+ee,Ye+Q/2,{baseline:"middle"}),t.text(Ue.value.toString(),e.left+5*V+ee,Ye+Q/2,{baseline:"middle"})})}}),L+=me.length*Q,h.forEach(E=>{if(E.adultos>0){const W=L;U(W),t.text(`Valor total Adt ${E.acomodacion}`,e.left+ee,W+Q/2,{baseline:"middle"});const g=E.precioHabitacionAdulto||0,D=Te(g).format("$0,0");t.text(D,e.left+3*V+ee,W+Q/2,{baseline:"middle"}),L+=Q}if(E.ni\u00F1os>0){const W=L;U(W),t.text(`Valor total Chd ${E.acomodacion}`,e.left+ee,W+Q/2,{baseline:"middle"});const g=E.precioHabitacionNino||0,D=Te(g).format("$0,0");t.text(D,e.left+3*V+ee,W+Q/2,{baseline:"middle"}),L+=Q}}),t.setFontSize(8),L+=Q,U(L),t.text("Valor total",e.left+ee,L+Q/2,{baseline:"middle"});const Ze=i.precioBrutoTotal||0,Pt=Te(Ze).format("$0,0");t.text(Pt,e.left+3*V+ee,L+Q/2,{baseline:"middle"}),t.text("Precio a pagar",e.left+4*V+ee,L+Q/2-2,{baseline:"middle"}),t.text("a Multidestinos",e.left+4*V+ee,L+Q/2+2,{baseline:"middle"});const vt=parseFloat(i.suplemento)||0,ut=parseFloat(i.totalPrecioCliente)||0,St=vt>0?ut+vt:ut,Tt=Te(St).format("$0,0");t.text(Tt,e.left+5*V+ee,L+Q/2,{baseline:"middle"}),L+=Q+10;const Ve=e.left;let ye=L+5;const Oe=190;let qe=30;t.setFontSize(7),t.setLineWidth(.5);const et="PARA CONFIRMACIONES SE DEBE ENVIAR DEPOSITO DEL 50% DEL VALOR DEL PLAN Y EL SALDO 30 DIAS ANTES DE LA SALIDA, SI LA FECHA DE VIAJES CERCANA SE DEBE CANCELAR EL 100%. LOS SERVICIOS DEJADOS DE TOMAR NO SON REMBOLSABLES. LA CANCELACI\xD3N CON 18 DIAS ANTES DE VIAJE LA PENALIDAD SERA DEL 100% DEL VALOR DEL PLAN, LOS TIQUETES NO SON REEMBOLSABLE, NI ENDOSABLES, PENALIDAD POR CAMBIO (FECHA, NOMBRE, HORA, RUTAS) 200.000. ESTAS POLITICAS ESTAN PUBLICADAS DE MANERA CLARA Y ESPECIFICA EN NUESTRA PAGINA WWW.MULTIDESTINOSEXPRESS.COM. *TARIFAS SUJETA A CAMBIO Y DISPONIBILIDAD SIN PREVIO AVISO*",_e=t.splitTextToSize(et,Oe-10);ye+qe>a-e.bottom&&(t.addPage(),L=e.top,ye=L+5),t.text("Deposito y Condiciones de Pago",Ve+5,ye+3),t.setFontSize(6);const tt=5;qe=20+_e.length*tt,t.rect(Ve,ye,Oe,qe),_e.forEach((E,W)=>{t.text(E,Ve+5,ye+10+W*tt)}),N[0].facturaPara&&(L=ye+10+_e.length*tt,t.setFontSize(8),t.text("FACTURA A NOMBRE DE:",Ve+5,L),L+=tt,t.text(N[0].facturaPara,Ve+5,L)),L+=qe+5;const ft=t.output("blob");return t.save(`cotizacion_${v}.pdf`),ft}catch(ie){console.error("Error al descargar cotizaci\xF3n:",ie)}},exportToPDF(){if(!this.filteredRows.length){this.$q.notify({type:"warning",message:"No hay datos para exportar"});return}const v=new Ot("l","mm","a4"),K=v.internal.pageSize.getWidth();v.setFontSize(18),v.text("Lista de Liquidaciones",K/2,20,{align:"center"}),v.setFontSize(11),v.text(`Generado el ${new Date().toLocaleDateString()}`,K/2,28,{align:"center"});const ie=this.columns.map(J=>J.label),re=this.filteredRows.map(J=>this.columns.map(G=>{const te=typeof G.field=="function"?G.field(J):J[G.field];return te!=null?String(te):""}));v.autoTable({head:[ie],body:re,startY:35,theme:"grid",styles:{fontSize:10,cellPadding:3},headStyles:{fillColor:[41,128,185],textColor:[255,255,255],halign:"center"},alternateRowStyles:{fillColor:[245,245,245]}}),v.save("Lista-Liquidaciones.pdf")},actualizarTabla(){this.loading=!0,setTimeout(()=>{this.loading=!1,this.$q.notify({type:"positive",message:"Tabla recargada correctamente"})},1e3)}},async mounted(){try{const v=await se.get("https://backmultidestinos.onrender.com/liquidacion");this.rows=v.data}catch(v){console.error("Error al obtener las liquidaciones:",v)}}},ba={class:"q-pb-lg"},Ca={class:"bg-primary rounded-borders q-pa-md text-white shadow-2"},Aa={class:"row items-center"},xa={class:"col-auto"},wa=X("div",{class:"col q-pl-md"},[X("h4",{class:"q-ma-none text-weight-bold"},"Sistema de Liquidaciones"),X("p",{class:"q-ma-none q-mt-xs opacity-8"},"Gesti\xF3n de liquidaciones y facturas")],-1),Ea={class:"col-auto"},Pa={class:"row q-col-gutter-md"},Ta={class:"col-12 col-md-4"},Da={class:"row items-center no-wrap"},Na=X("div",{class:"text-h6"},"Filtros",-1),Ia={class:"flex items-center"},La={class:"row q-col-gutter-sm"},za={class:"col-6"},Fa={class:"row items-center no-wrap"},Oa=X("div",{class:"text-h6"},"Resumen",-1),_a={class:"row q-col-gutter-sm"},Ha={class:"col-6"},Ra=X("div",{class:"text-subtitle2 text-grey-8"},"Liquidaciones",-1),Wa={class:"text-h5 text-primary"},ka={class:"col-6"},Ma=X("div",{class:"text-subtitle2 text-grey-8"},"Pendientes",-1),Ba={class:"text-h5 text-orange"},ja={class:"col-12 col-md-8"},Va={class:"row items-center no-wrap"},qa=X("div",{class:"text-h6"},"Lista de Liquidaciones",-1),Ua={class:"row items-center justify-between full-width q-pa-sm"},Ya={class:"text-body2"},$a={class:"full-width row flex-center q-py-lg"},Qa=X("div",{class:"text-h6 text-grey-7"}," No se encontraron liquidaciones ",-1),Ga=X("div",{class:"text-caption text-grey-7 q-mt-sm"}," Intenta modificar los filtros de b\xFAsqueda ",-1),Ja={class:"row items-center no-wrap"},Xa=X("div",{class:"text-h6"},"Opciones de Facturaci\xF3n",-1),Ka=X("div",{class:"text-subtitle2 q-mb-sm"},"Informaci\xF3n de facturaci\xF3n",-1),Za={class:"row items-center"},eo=X("div",{class:"text-caption"}," El documento se generar\xE1 en formato PDF ",-1);function to(v,K,ie,re,J,G){const te=ta("q-toast");return $e(),at(aa,{padding:"",class:"liquidaciones-page bg-grey-1"},{default:Y(()=>[X("div",ba,[X("div",Ca,[X("div",Aa,[X("div",xa,[B(oa,{color:"white","text-color":"primary",size:"56px"},{default:Y(()=>[B(ce,{name:"monetization_on",size:"32px"})]),_:1})]),wa,X("div",Ea,[B(Ae,{round:"",flat:"",icon:"refresh",size:"md",onClick:G.actualizarTabla},{default:Y(()=>[B(bt,null,{default:Y(()=>[He("Actualizar datos")]),_:1})]),_:1},8,["onClick"])])])])]),X("div",Pa,[X("div",Ta,[B(yt,{class:"filtros-card shadow-2"},{default:Y(()=>[B(Pe,{class:"bg-primary text-white"},{default:Y(()=>[X("div",Da,[B(ce,{name:"filter_list",size:"md",class:"q-mr-sm"}),Na,B(zt),B(Ae,{flat:"",round:"",icon:"help_outline",size:"sm"},{default:Y(()=>[B(bt,null,{default:Y(()=>[He("Ayuda con los filtros")]),_:1})]),_:1})])]),_:1}),B(Pe,{class:"q-pa-md"},{default:Y(()=>[B(At,{modelValue:J.filterId,"onUpdate:modelValue":K[1]||(K[1]=I=>J.filterId=I),label:"ID de Cotizaci\xF3n",filled:"",dense:"",clearable:"",class:"q-mb-md",debounce:300,placeholder:"Buscar por ID..."},{prepend:Y(()=>[B(ce,{name:"search",color:"primary"})]),append:Y(()=>[J.filterId?($e(),at(ce,{key:0,name:"close",onClick:K[0]||(K[0]=I=>J.filterId=""),class:"cursor-pointer",color:"grey-6"})):It("",!0)]),_:1},8,["modelValue"]),B(Ht,{modelValue:J.filterStatus,"onUpdate:modelValue":K[2]||(K[2]=I=>J.filterStatus=I),options:[{label:"Todos los estados",value:null},...J.statusOptions],label:"Estado",filled:"",dense:"",clearable:"","emit-value":"","map-options":"",class:"q-mb-md"},{prepend:Y(()=>[B(ce,{name:"label",color:"primary"})]),selected:Y(()=>[X("div",Ia,[J.filterStatus?($e(),at(ce,{key:0,name:J.filterStatus?"circle":"label",color:G.chipColor(J.filterStatus),size:"xs",class:"q-mr-xs"},null,8,["name","color"])):It("",!0),X("span",null,Qe(J.filterStatus||"Todos los estados"),1)])]),_:1},8,["modelValue","options"]),B(na,{class:"q-my-md"}),X("div",La,[X("div",za,[B(Ae,{color:"primary",label:"Aplicar",icon:"check",class:"full-width",unelevated:"",onClick:v.applyFilter},null,8,["onClick"])])])]),_:1})]),_:1}),B(yt,{class:"q-mt-md shadow-1"},{default:Y(()=>[B(Pe,{class:"bg-secondary text-white"},{default:Y(()=>[X("div",Fa,[B(ce,{name:"insights",size:"md",class:"q-mr-sm"}),Oa])]),_:1}),B(Pe,{class:"q-pa-md"},{default:Y(()=>[X("div",_a,[X("div",Ha,[Ra,X("div",Wa,Qe(G.filteredRows.length),1)]),X("div",ka,[Ma,X("div",Ba,Qe(G.countPendientes),1)])])]),_:1})]),_:1})]),X("div",ja,[B(yt,{class:"shadow-2"},{default:Y(()=>[B(Pe,{class:"bg-primary text-white"},{default:Y(()=>[X("div",Va,[B(ce,{name:"receipt_long",size:"md",class:"q-mr-sm"}),qa,B(zt),B(At,{modelValue:J.globalFilter,"onUpdate:modelValue":K[4]||(K[4]=I=>J.globalFilter=I),dense:"",filled:"",placeholder:"Buscar...",class:"search-input",style:{width:"200px"},dark:""},{prepend:Y(()=>[B(ce,{name:"search"})]),append:Y(()=>[J.globalFilter?($e(),at(ce,{key:0,name:"clear",onClick:K[3]||(K[3]=I=>J.globalFilter=""),class:"cursor-pointer"})):It("",!0)]),_:1},8,["modelValue"]),B(Ae,{flat:"",round:"",icon:"download",class:"q-ml-sm",onClick:G.exportToPDF},{default:Y(()=>[B(bt,null,{default:Y(()=>[He("Exportar tabla")]),_:1})]),_:1},8,["onClick"])])]),_:1}),B(Pe,{class:"q-pa-none"},{default:Y(()=>[B(ia,{rows:G.filteredRows,columns:J.columns,"row-key":"id",pagination:v.pagination,"onUpdate:pagination":K[5]||(K[5]=I=>v.pagination=I),loading:J.loading,filter:J.globalFilter,"binary-state-sort":"",flat:"",bordered:"",separator:"cell",class:"liquidaciones-table"},{loading:Y(()=>[B(pa,{showing:"",color:"primary"},{default:Y(()=>[B(ra,{size:"50px",color:"primary"})]),_:1})]),header:Y(I=>[B(ga,{props:I},{default:Y(()=>[($e(!0),la(da,null,sa(I.cols,i=>($e(),at(ha,{key:i.name,props:I,class:"bg-grey-2"},{default:Y(()=>[He(Qe(i.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"body-cell-tieneImpuestos":Y(I=>[B(Lt,{props:I},{default:Y(()=>[B(ma,{color:I.row.impuestosLiq==="1"?"positive":"grey",class:"text-white"},{default:Y(()=>[He(Qe(I.row.impuestosLiq==="1"?"S\xED":"No"),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-status":Y(I=>[B(Lt,{props:I},{default:Y(()=>[B(ca,{color:G.chipColor(I.row.status),"text-color":"white",size:"sm",class:"shadow-1"},{default:Y(()=>[B(ce,{name:"circle",size:"xs",class:"q-mr-xs"}),He(" "+Qe(I.row.status),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-acciones":Y(I=>[B(Lt,{props:I,class:"text-center"},{default:Y(()=>[B(Ae,{onClick:i=>G.mostrarDialogoFactura(I.row),color:"primary",label:"Descargar",icon:"download",size:"sm",unelevated:"",class:"q-px-sm"},null,8,["onClick"]),B(Ae,{flat:"",round:"",color:"grey-7",icon:"more_vert",size:"sm",class:"q-ml-xs"})]),_:2},1032,["props"])]),bottom:Y(I=>[X("div",Ua,[X("div",null,[X("span",Ya,"Total: "+Qe(G.filteredRows.length)+" liquidaciones",1)]),X("div",null,[B(va,{modelValue:I.pagination.page,"onUpdate:modelValue":i=>I.pagination.page=i,max:Math.ceil(I.pagination.rowsNumber/I.pagination.rowsPerPage),"max-pages":6,"boundary-links":"","direction-links":"","icon-first":"first_page","icon-last":"last_page","icon-prev":"chevron_left","icon-next":"chevron_right",color:"primary",size:"sm"},null,8,["modelValue","onUpdate:modelValue","max"])])])]),"no-data":Y(()=>[X("div",$a,[B(ce,{name:"search_off",size:"lg",color:"grey-7",class:"q-mb-md"}),Qa,Ga])]),_:1},8,["rows","columns","pagination","loading","filter"])]),_:1})]),_:1})])]),B(fa,{modelValue:J.mostrarDialogo,"onUpdate:modelValue":K[8]||(K[8]=I=>J.mostrarDialogo=I),persistent:""},{default:Y(()=>[B(yt,{style:{"min-width":"400px"},class:"rounded-borders"},{default:Y(()=>[B(Pe,{class:"bg-primary text-white"},{default:Y(()=>[X("div",Ja,[B(ce,{name:"description",size:"md",class:"q-mr-sm"}),Xa,B(zt),Rt(($e(),at(Ae,{flat:"",round:"",icon:"close"},{default:Y(()=>[B(bt,null,{default:Y(()=>[He("Cerrar")]),_:1})]),_:1})),[[Wt]])])]),_:1}),B(Pe,{class:"q-pa-md q-pt-lg"},{default:Y(()=>[Ka,B(At,{modelValue:J.nombreFactura,"onUpdate:modelValue":K[6]||(K[6]=I=>J.nombreFactura=I),label:"Nombre para la factura",filled:"",class:"q-mb-sm",ref:"nombreInput","bottom-slots":""},{prepend:Y(()=>[B(ce,{name:"person",color:"primary"})]),hint:Y(()=>[He("Ingrese el nombre como aparecer\xE1 en la factura")]),_:1},8,["modelValue"]),B(Ht,{modelValue:v.tipoDocumento,"onUpdate:modelValue":K[7]||(K[7]=I=>v.tipoDocumento=I),options:["Factura","Recibo","Comprobante"],label:"Tipo de documento",filled:"",class:"q-mt-md"},{prepend:Y(()=>[B(ce,{name:"receipt",color:"primary"})]),_:1},8,["modelValue"])]),_:1}),B(Pe,{class:"bg-grey-2 text-grey-8 q-pa-sm"},{default:Y(()=>[X("div",Za,[B(ce,{name:"info",size:"sm",class:"q-mr-xs"}),eo])]),_:1}),B(ua,{align:"right",class:"q-py-md q-px-md"},{default:Y(()=>[Rt(B(Ae,{flat:"",label:"Cancelar",color:"grey-7",icon:"close"},null,512),[[Wt]]),B(Ae,{label:"Descargar",color:"primary",onClick:G.procesarDescarga,icon:"download",loading:v.descargando,unelevated:""},null,8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),B(te,{position:"bottom-right",timeout:"2500",color:"positive",class:"shadow-3"})]),_:1})}var co=Zt(ya,[["render",to]]);export{co as default};

import{a2 as Ot,aA as Pt,a4 as Ct,a5 as Tt,a6 as I,au as zt,a9 as z,a7 as b,ae as K,ag as Re,av as Fe,ay as It,ax as Rt,aC as Ft,a8 as rt,aw as Nt,aY as vt,aX as bt,aa as Dt,aI as wt,aG as Vt,N as qt,aD as Mt,aH as yt}from"./index.344a8271.js";import{E as Lt,n as ee}from"./PDFButton.3ef1381f.js";import{a as O}from"./axios.37d53be1.js";const Ht={data(){return{mostrarDialogo:!1,facturaOtroNombre:!1,nombreFactura:"",liquidacionSeleccionada:null,filterId:"",filterStatus:null,statusOptions:[{label:"Aprobado",value:"Aprobado"},{label:"Rechazado",value:"Rechazado"},{label:"Pendiente",value:"Pendiente"}],filter:"",rows:[],columns:[{name:"status",label:"Status",field:"status"},{name:"idLiquidacion",label:"ID Liquidaci\xF3n",field:"idLiquidacion",sortable:!0},{name:"idCotizacion",label:"ID Cotizaci\xF3n",field:"idCotizacion",sortable:!0},{name:"salida",label:"Salida",field:"salida"},{name:"destino",label:"Destino",field:"destino"},{name:"nombrePrograma",label:"Nombre del Programa",field:"nombrePrograma"},{name:"hotel",label:"Hotel",field:"hotel"},{name:"totalPasajeros",label:"Total Pasajeros",field:"totalPasajeros"},{name:"precioBrutoTotal",label:"Precio Bruto Total",field:"precioBrutoTotal"},{name:"totalPrecioCliente",label:"Total Precio Cliente",field:"totalPrecioCliente"},{name:"fechaCreacion",label:"Fecha de Creaci\xF3n",field:p=>new Date(p.fechaCreacion).toLocaleDateString(),sortable:!0},{name:"acciones",label:"Acciones"}]}},computed:{filteredRows(){const p=this.filterId.toLowerCase();return this.rows.filter(D=>{const _=D.idCotizacion.toLowerCase().includes(p),te=this.filterStatus===null||D.status===this.filterStatus;return _&&te})}},methods:{mostrarDialogoFactura(p){this.liquidacionSeleccionada=p,this.mostrarDialogo=!0},async procesarDescarga(){this.mostrarDialogo=!1;try{await O.put(`https://backmultidestinos.onrender.com/liquidacion/${this.liquidacionSeleccionada.idLiquidacion}`,{facturaPara:this.nombreFactura?this.nombreFactura:null})}catch(p){console.error("Error al actualizar la liquidaci\xF3n:",p),Pt.create({message:"Error al actualizar la liquidaci\xF3n.",color:"negative"});return}this.liquidacionSeleccionada.idCotizacion.includes("-C")?this.descargarLiquidacionCano(this.liquidacionSeleccionada.idCotizacion,this.liquidacionSeleccionada.idLiquidacion):this.descargarLiquidacion(this.liquidacionSeleccionada.idCotizacion,this.liquidacionSeleccionada.idLiquidacion),this.nombreFactura=""},chipColor(p){switch(p){case"Aprobado":return"green";case"Rechazado":return"red";case"Pendiente":return"orange";default:return"grey"}},verDetalles(p){this.$router.push({name:"LiquidacionDetalles",params:{idLiquidacion:p.idLiquidacion,liquidacionData:p}})},descargarLiquidacionN(p){p.idCotizacion.includes("-C")?this.descargarLiquidacionCano(p.idCotizacion,p.idLiquidacion):this.descargarLiquidacion(p.idCotizacion,p.idLiquidacion)},async descargarLiquidacion(p,D){var _,te;try{let L=function(e,s,d,S=10){return s+d>be-S?(e.addPage(),a.top):s},Be=function(e){return e.map(s=>{const d=s.adultos,S=s.ni\u00F1os,T=`1x${d}`;return S>0?`${T} CHD`:T}).join(", ")},q=function(e){for(let s=0;s<=6;s++){const d=a.left+s*N;t.line(d,e,d,e+h)}t.line(a.left,e,A-a.right,e),t.line(a.left,e+h,A-a.right,e+h)};const[k,C,Je,r,F]=await Promise.all([O.get(`https://backmultidestinos.onrender.com/habitacionCotizacion/${p}`),O.get(`https://backmultidestinos.onrender.com/cotizacion/${p}`),O.get(`https://backmultidestinos.onrender.com/ImpuestoCot/${p}`),O.get(`https://backmultidestinos.onrender.com/liquidacion/${D}`),O.get(`https://backmultidestinos.onrender.com/pasajero/${D}`)]);if(k.status!==200||C.status!==200){console.error("Error al obtener datos de habitacionCotizacion o cotizacion");return}const l=C.data[0],ve=Je.data[0];console.log("impuesto",ve);const Y=k.data;console.log("habitacion",Y);const Q=r.data;console.log("liquidacion",Q);const V=Q[0].telefono;console.log(V);const we=F.data;console.log("pasajero",we);const ce=await O.get(`https://backmultidestinos.onrender.com/cliente/buscar/${l.cliente}`);console.log("clienteResponse",ce);const P=ce.data[0];console.log("clienteData",P);const Ze=(_=P==null?void 0:P.tipoBase)!=null?_:"Valor por defecto",de=await O.get(`https://backmultidestinos.onrender.com/user/${l.CreadorCotizacion}`),xt=de.Data;console.log("vendedor",de.data.nombreCompleto);const ct={hotel:l.hotel,nombrePrograma:l.nombrePrograma,destino:l.destino},o=await O.post("https://backmultidestinos.onrender.com/hoteles/buscar",ct),i=l.incluye?l.incluye:o.data[0].incluye,x=l.noIncluye?l.noIncluye:o.data[0].noIncluye,t=new Lt,a={top:10,bottom:10,left:10,right:10},A=t.internal.pageSize.width,be=t.internal.pageSize.height,Ve=40,j={left:10,right:10,top:5,bottom:5},oe=await new Promise((e,s)=>{const d=new Image;d.src="https://i.ibb.co/1sFJ7dT/imgAzul.png",d.onload=()=>e(d),d.onerror=s}),Ke=oe.width/oe.height,dt=A/4-j.left-j.right,xe=Math.min(100,dt),qe=xe/Ke,ut=a.top+(Ve-qe)/2,ft=`PBX(601)7621133
CALLE 64 No. 11-37 LOC 301
EMAIL: MULTIDESTINOS_EXPRESS@YAHOO.COM`,Me=`Numero de cotizaci\xF3n: ${p}`;t.addImage(oe,"PNG",a.left+j.left,ut,xe,qe);const ye=A-a.left-a.right-xe-j.left-j.right-10;t.setFontSize(10),t.text(t.splitTextToSize(ft,ye),a.left+xe+j.left+j.right,a.top+10);const et=A-a.right-t.getTextWidth(Me)-j.right;t.setFontSize(12),t.setFont("Helvetica-Bold",12),t.text(Me,et,a.top+10),t.setDrawColor(0),t.rect(a.left,a.top,A-a.left-a.right,Ve,"S"),t.setFontSize(10);const He=a.top+Ve+10;t.setFontSize(10),t.text("SOLICITUD DE RESERVA:",a.left,He-4),t.setFontSize(8);const Ce=["FECHA SOLICITUD:","AGENCIA:","TEL\xC9FONO:","CONTACTO:","NIT:","VENDEDOR:"],W=[new Date(new Date(l.fechaCreacion).getTime()+new Date(l.fechaCreacion).getTimezoneOffset()*6e4).toLocaleDateString(),l.cliente.toString(),P!=null&&P.telefono?P.telefono.toString():"N/A","N/A",P!=null&&P.nit?P.nit.toString():"N/A",de.data.nombreCompleto?de.data.nombreCompleto.toString():"N/A"],u=6,tt=(A-a.left-a.right)/u;let G=a.left,c=He;for(let e=0;e<Ce.length;e++){t.text(Ce[e],G,c);const s=W[e]!==void 0?W[e]:"N/A",d=t.splitTextToSize(s,tt-2);t.text(d,G,c+5),G+=tt,((e+1)%u===0||e===Ce.length-1)&&(c+=15,G=a.left)}const mt=Be(Y),_e=["NOCHES:","HOTEL:","PLAN:","DESTINO:","DIRECCION:","ACOMODACI\xD3N:"],Te=[l.noches?l.noches.toString():"N/A",l.hotel?l.hotel.toString():"N/A",l.plan?l.plan.toString():"N/A",l.destino?l.destino.toString():"N/A",l.direccion?l.direccion.toString():"N/A",mt.toString()];console.log("campso2",Te);const ot=6,je=(A-a.left-a.right)/ot;c+=1;for(let e=0;e<_e.length;e++){t.text(_e[e],G,c);const s=Te[e]!==void 0?Te[e]:"N/A",d=t.splitTextToSize(s,je-2);t.text(d,G,c+5),G+=je}c+=1,t.setFontSize(10),t.text("PASAJEROS: ",a.left,c+12),c+=20;const at=["NOMBRE","DOCUMENTO","F. NACIMIENTO","EDAD","TELEFONO RESERVA"],We=we.map(e=>{const s=new Date(e.fechaNacimiento),d=new Date;let S=d.getFullYear()-s.getFullYear();const T=d.getMonth()-s.getMonth();return(T<0||T===0&&d.getDate()<s.getDate())&&S--,[e.nombre,e.numeroDocumento,s.toLocaleDateString(),S,Q[0].telefono?Q[0].telefono.toString():"N/A"]}),Ue=(A-a.left-a.right)/at.length,ue=A-a.left-a.right,$e=10+8*We.length;t.rect(a.left,c,ue,$e,"S"),t.setFontSize(8),at.forEach((e,s)=>{t.text(e,a.left+5+s*Ue,c+5)}),c+=10,We.forEach((e,s)=>{e.forEach((d,S)=>{t.text(d.toString(),a.left+5+S*Ue,c+s*8)})}),c+=$e-15,c+=22,t.setFontSize(10),t.text("ITINERARIO: ",a.left,c-10);const it=["AEROLINEA","VUELO","FECHA","RUTA","CLASE","HR SALIDA","HR LLEGADA","RECORD"],ae=[[l.aerolineaIda||"N/A",l.vueloIda||"N/A",l.fechaInicio?new Date(new Date(l.fechaInicio).getTime()+new Date(l.fechaInicio).getTimezoneOffset()*6e4).toLocaleDateString():"N/A",l.ruta1||"N/A",l.claseIda||"N/A",l.horaSalidaIda||"N/A",l.horaLlegadaIda||"N/A",l.recordIda||"N/A"]];l.aerolineaEscalaIda!=null&&(ae.push([l.aerolineaEscalaIda||"N/A",l.vueloEscalaIda||"N/A",l.fechaInicio?new Date(new Date(l.fechaInicio).getTime()+new Date(l.fechaInicio).getTimezoneOffset()*6e4).toLocaleDateString():"N/A","Escala Ida",l.claseEscalaIda||"N/A",l.horaSalidaEscalaIda||"N/A",l.horaLlegadaEscalaIda||"N/A",""]),ae.push([l.aerolineaEscalaVuelta||"N/A",l.vueloEscalaVuelta||"N/A",l.fechaFin?new Date(new Date(l.fechaFin).getTime()+new Date(l.fechaFin).getTimezoneOffset()*6e4).toLocaleDateString():"N/A","Escala Vuelta",l.claseEscalaVuelta||"N/A",l.horaSalidaEscalaVuelta||"N/A",l.horaLlegadaEscalaVuelta||"N/A",""])),ae.push([l.aerolineaVuelta||"N/A",l.vueloVuelta||"N/A",l.fechaFin?new Date(new Date(l.fechaFin).getTime()+new Date(l.fechaFin).getTimezoneOffset()*6e4).toLocaleDateString():"N/A",l.ruta2||"N/A",l.claseVuelta||"N/A",l.horaSalidaVuelta||"N/A",l.horaLlegadaVuelta||"N/A",l.recordVuelta||"N/A"]);const y=(A-a.left-a.right)/it.length,ht=A-a.left-a.right,fe=12+8*ae.length;c+=5,t.rect(a.left,c-5,ht,fe,"S"),t.setFontSize(8),it.forEach((e,s)=>{t.text(e,a.left+s*y,c)}),c+=5,ae.forEach((e,s)=>{e.forEach((d,S)=>{t.text(d,a.left+S*y,c+(s+1)*8)})}),c+=fe-5;let H;const Ie="Esta cotizaci\xF3n est\xE1 sujeta a cambio y disponibilidad al momento de reservar (Sin servicio confirmado)",De=c,ke=30;t.setDrawColor(0),t.rect(a.left,De,A-a.left-a.right,ke),t.setFontSize(12),t.text("OBSERVACIONES:",a.left+2,De+6),t.setFontSize(10),t.text(Ie,a.left+2,De+15,{maxWidth:A-a.left-a.right-4}),c=De+ke;const X=c+10;t.setFontSize(8);const nt=`El pago de su plan se realizar\xE1 conforme a las siguientes condiciones:

Planes con inicio dentro de los 30 d\xEDas:  El pago total deber\xE1 efectuarse dentro de un d\xEDa h\xE1bil a partir de la fecha de env\xEDo de este documento.
Planes con inicio posterior a los 30 d\xEDas: El pago se realizar\xE1 en dos cuotas:
  * Primera cuota: 50% del valor total del plan, pagadero dentro de un d\xEDa h\xE1bil a partir de la fecha de env\xEDo de este documento.
  * Segunda cuota: 50% restante del valor total del plan, pagadero 30 d\xEDas antes de la fecha de inicio del plan.`,Ye=t.splitTextToSize(nt,A-a.left-a.right-4);let ie=18;Ye.forEach(e=>{ie+=t.getTextDimensions(e,{fontSize:8}).h}),c=L(t,c,ie),t.setDrawColor(0),t.rect(a.left,X,A-a.left-a.right,ie),t.setFontSize(12),t.text("PLAZO DE PAGO:",a.left+2,X+6),t.setFontSize(8),H=X+15,Ye.forEach(e=>{t.text(e,a.left+2,H,{maxWidth:A-a.left-a.right-4}),H+=t.getTextDimensions(e,{fontSize:8}).h}),c=X+ie;let ne=!1;t.setFontSize(8);const me=i.split("\xBF");let Le=[];me.forEach(e=>{const s=t.splitTextToSize(e,A-a.left-a.right-4);Le=Le.concat(s)});let J=18;me.forEach(e=>{const s=t.splitTextToSize(e,A-a.left-a.right-4);for(let d=0;d<s.length;d++){const S=s[d];J+=t.getTextDimensions(S,{fontSize:8}).h,!S.endsWith(`
`)&&d<s.length-1&&(J+=t.getTextDimensions(" ",{fontSize:8}).h)}}),c=L(t,c,J),c===a.top&&(ne=!0);const U=c+10;t.setDrawColor(0),t.rect(a.left,U,A-a.left-a.right,J),t.setFontSize(12),t.text("INCLUYE:",a.left+2,U+6),t.setFontSize(8),H=U+15,Le.forEach(e=>{t.text(e,a.left+2,H,{maxWidth:A-a.left-a.right-4}),H+=t.getTextDimensions(e,{fontSize:8}).h}),c=U+J;const he=x.split("\xBF");let le=[];he.forEach(e=>{const s=t.splitTextToSize(e,A-a.left-a.right-4);le=le.concat(s)});let E=18;he.forEach(e=>{const s=t.splitTextToSize(e,A-a.left-a.right-4);for(let d=0;d<s.length;d++){const S=s[d];E+=t.getTextDimensions(S,{fontSize:8}).h,!S.endsWith(`
`)&&d<s.length-1&&(E+=t.getTextDimensions(" ",{fontSize:8}).h)}}),c=L(t,c,E),ne||(c=a.top);const g=c+10;t.setDrawColor(0),t.rect(a.left,g,A-a.left-a.right,E),t.setFontSize(12),t.text("NO INCLUYE:",a.left+2,g+6),t.setFontSize(8),H=g+15,le.forEach(e=>{t.text(e,a.left+2,H,{maxWidth:A-a.left-a.right-4}),H+=t.getTextDimensions(e,{fontSize:8}).h}),c=g+E,t.addPage(),c=a.top,t.setFontSize(10),t.text("LIQUIDACI\xD3N:",a.left,c),c+=5;const Qe=c+5,m=2,h=6,N=(A-a.left-a.right)/6;t.setDrawColor(0);let ge=0;t.setFontSize(7);let Z=0;Y.forEach(e=>{const s=Qe+Z*h;q(s);const d=`Valor adul ${e.acomodacion}`;t.text(d,a.left+m,s+h/2,{baseline:"middle"});const S=Math.round(e.precioComisionableAdulto);t.text(S.toString(),a.left+N+m,s+h/2,{baseline:"middle"});const T=e.adultos;t.text(T.toString(),a.left+2*N+m,s+h/2,{baseline:"middle"});const v=Math.round(e.precioComisionableAdulto*e.adultos);if(t.text(v.toString(),a.left+3*N+m,s+h/2,{baseline:"middle"}),Z===0){t.setFontSize(6);const M=Ze==="Comisi\xF3n"?"BASE COMISI\xD3N":"BASE COMISION";t.text(M,a.left+4*N+m,s+h/2,{baseline:"middle"}),t.setFontSize(7)}let $=v;if(e.ni\u00F1os>0&&($+=Math.round(e.precioComisionableNino*e.ni\u00F1os)),ge+=$,Z++,e.ni\u00F1os>0){const M=Qe+Z*h;q(M);const R=`Valor child ${e.acomodacion}`;t.text(R,a.left+m,M+h/2,{baseline:"middle"});const w=Math.round(e.precioComisionableNino);t.text(w.toString(),a.left+N+m,M+h/2,{baseline:"middle"});const At=e.ni\u00F1os;t.text(At.toString(),a.left+2*N+m,M+h/2,{baseline:"middle"});const Ee=Math.round(e.precioComisionableNino*e.ni\u00F1os);t.text(Ee.toString(),a.left+3*N+m,M+h/2,{baseline:"middle"}),Z++}}),t.text(ge.toString(),a.left+5*N+m,Qe+h/2,{baseline:"middle"}),c=Qe+Z*h+10;const pe=["TRANSPORTE NO COMISI","Q","YS","CO","TA","YS TA","TOTAL IMPUESTOS"],Oe=[l.otros,l.combus,l.iva,l.tasa,l.ta,l.ivaTa,l.precioTrans];if(l.suplemento>0&&(pe.push("SUPLEMENTO"),Oe.push(l.suplemento)),l.extra1)if(l.extra1.includes("*")){let e=l.extra1.split("*"),s=e[0],d=e[1];pe.push("Valor Extra","Valor Extra2"),Oe.push(s,d)}else{let e=l.extra1;pe.push("Valor Extra"),Oe.push(e)}pe.forEach((e,s)=>{const d=c+s*h;q(d),t.text(e,a.left+m,d+h/2,{baseline:"middle"});const S=l.totalPasajeros,T=Oe[s]||0,v=S!==0?Math.trunc(T/S):"";t.text(v.toString(),a.left+N+m,d+h/2,{baseline:"middle"});const $=S!==0?Math.trunc(S).toString():"";t.text($,a.left+2*N+m,d+h/2,{baseline:"middle"});const M=T!==0?Math.trunc(T).toString():"";if(t.text(M,a.left+3*N+m,d+h/2,{baseline:"middle"}),e==="Q"){t.text("COMISION",a.left+4*N+m,d+h/2,{baseline:"middle"});const R=l.clientePorcentaje||0,w=Math.trunc(R).toString()+"%";t.text(w,a.left+5*N+m,d+h/2,{baseline:"middle"})}else if(e==="YS"){t.text("Valor Descuento",a.left+4*N+m,d+h/2,{baseline:"middle"});const R=l.valorDescuento||0,w=Math.trunc(R).toString();t.text(w,a.left+5*N+m,d+h/2,{baseline:"middle"}),Ze==="Comisi\xF3n"&&[{label:`IVA(${P.porcentajeIva}%) (-)`,value:l.ivaValor},{label:`RTE FUENTE(${P.rteFuente}%) (+)`,value:l.rteFuente},{label:`RTE ICA(${P.rteIca}%) (+)`,value:l.rteIca},{label:"Total Comisi\xF3n",value:l.totalComision}].forEach((Ee,Et)=>{const Ne=d+(Et+1)*h;q(Ne),t.text(Ee.label,a.left+4*N+m,Ne+h/2,{baseline:"middle"}),t.text(Ee.value.toString(),a.left+5*N+m,Ne+h/2,{baseline:"middle"})})}}),c+=pe.length*h,Y.forEach(e=>{if(e.adultos>0){const s=c;q(s),t.text(`Valor total Adt ${e.acomodacion}`,a.left+m,s+h/2,{baseline:"middle"});const d=e.precioHabitacionAdulto||0,S=ee(d).format("$0,0");t.text(S,a.left+3*N+m,s+h/2,{baseline:"middle"}),c+=h}if(e.ni\u00F1os>0){const s=c;q(s),t.text(`Valor total Chd ${e.acomodacion}`,a.left+m,s+h/2,{baseline:"middle"});const d=e.precioHabitacionNino||0,S=ee(d).format("$0,0");t.text(S,a.left+3*N+m,s+h/2,{baseline:"middle"}),c+=h}}),t.setFontSize(8),c+=h,q(c),t.text("Valor total",a.left+m,c+h/2,{baseline:"middle"});const pt=l.precioBrutoTotal||0,lt=ee(pt).format("$0,0");t.text(lt,a.left+3*N+m,c+h/2,{baseline:"middle"}),t.text("Precio a pagar",a.left+4*N+m,c+h/2-2,{baseline:"middle"}),t.text("a Multidestinos",a.left+4*N+m,c+h/2+2,{baseline:"middle"});const Ge=0,st=parseFloat(l.totalPrecioCliente)||0,St=Ge>0?st+Ge:st,Se=ee(St).format("$0,0");t.text(Se,a.left+5*N+m,c+h/2,{baseline:"middle"}),c+=h+10;const B=a.left;let se=c+5;const Ae=190;let Pe=30;t.setFontSize(7),t.setLineWidth(.5),t.setFontSize(6);const re=5,ze="PARA CONFIRMACIONES SE DEBE ENVIAR DEPOSITO DEL 50% DEL VALOR DEL PLAN Y EL SALDO 30 DIAS ANTES DE LA SALIDA, SI LA FECHA DE VIAJES CERCANA SE DEBE CANCELAR EL 100%. LOS SERVICIOS DEJADOS DE TOMAR NO SON REMBOLSABLES. LA CANCELACI\xD3N CON 18 DIAS ANTES DE VIAJE LA PENALIDAD SERA DEL 100% DEL VALOR DEL PLAN, LOS TIQUETES NO SON REEMBOLSABLE, NI ENDOSABLES, PENALIDAD POR CAMBIO (FECHA, NOMBRE, HORA, RUTAS) 200.000. ESTAS POLITICAS ESTAN PUBLICADAS DE MANERA CLARA Y ESPECIFICA EN NUESTRA PAGINA WWW.MULTIDESTINOSEXPRESS.COM. *TARIFAS SUJETA A CAMBIO Y DISPONIBILIDAD SIN PREVIO AVISO*",Xe=t.splitTextToSize(ze,Ae-10);Pe=20+Xe.length*re,se+Pe>be-a.bottom&&(t.addPage(),c=a.top),se=c,t.rect(B,c,Ae,Pe),t.text("Deposito y Condiciones de Pago",B+5,se+3),Xe.forEach((e,s)=>{t.text(e,B+5,se+10+s*re)}),Q[0].facturaPara&&(c=se+10+Xe.length*re,t.setFontSize(8),t.text("FACTURA A NOMBRE DE:",B+5,c),c+=re,t.text(Q[0].facturaPara,B+5,c)),c+=Pe+5;const n=[];for(const e of Y){const s={pertenece:l.salida,destino:l.destino,nombrePrograma:l.nombrePrograma,hotel:l.hotel,noches:l.noches,tipoHabitacion:e.tipoHabitacion};try{const d=await O.post("https://backmultidestinos.onrender.com/costosHotel/buscar",s);console.log("Respuesta:",d.data),n.push(d.data)}catch(d){console.error("Error al buscar costo hotel:",((te=d.response)==null?void 0:te.data)||d.message)}}console.log("costosHotelResponses",n),t.setFontSize(10),t.text("COSTOS DE HOTEL:",a.left,c),c+=5,t.setFont("helvetica","bold"),t.text(l.hotel,a.left,c),t.setFont("helvetica","normal"),c+=8,n.forEach((e,s)=>{const d=Y[s];t.setFontSize(8),t.text(`\u2022 Tipo de habitaci\xF3n: ${d.tipoHabitacion}`,a.left,c),c+=6;const S=d.acomodacion.toLowerCase();let T="No disponible";e&&e.length>0&&e[0][S]&&(T=e[0][S],typeof T=="number"&&(T=ee(T).format("$0,0"))),t.text(`  - Acomodaci\xF3n: ${d.acomodacion}`,a.left+10,c),c+=6,t.text(`  - Valor: ${T}`,a.left+10,c),c+=8});const f=t.output("blob");return t.save(`cotizacion_${p}.pdf`),f}catch(L){console.error("Error al descargar cotizaci\xF3n:",L)}},async descargarLiquidacionCano(p,D){try{let _=function(n,f,e,s=10){return f+e>t-s?(n.addPage(),i.top):f},tt=function(n){return n.map(f=>{const e=f.adultos,s=f.ni\u00F1os,d=`1x${e}`;return s>0?`${d} CHD`:d}).join(", ")},h=function(n){for(let f=0;f<=6;f++){const e=i.left+f*m;o.line(e,n,e,n+g)}o.line(i.left,n,x-i.right,n),o.line(i.left,n+g,x-i.right,n+g)};const[te,L,k,C,Je]=await Promise.all([O.get(`https://backmultidestinos.onrender.com/habitacionCotizacion/${p}`),O.get(`https://backmultidestinos.onrender.com/cotizacion/${p}`),O.get(`https://backmultidestinos.onrender.com/ImpuestoCot/${p}`),O.get(`https://backmultidestinos.onrender.com/liquidacion/${D}`),O.get(`https://backmultidestinos.onrender.com/pasajero/${D}`)]);if(te.status!==200||L.status!==200){console.error("Error al obtener datos de habitacionCotizacion o cotizacion");return}const r=L.data[0],F=k.data[0];console.log("impuesto",F);const l=te.data;console.log("habitacion",l);const ve=C.data;console.log("liquidacion",ve);const Y=Je.data;console.log("pasajero",Y);const Q=await O.get(`https://backmultidestinos.onrender.com/cliente/buscar/${r.cliente}`);console.log("clienteResponse",Q);const V=Q.data[0];console.log("clienteData",V);const we=V.tipoBase,ce=await O.get(`https://backmultidestinos.onrender.com/user/${r.CreadorCotizacion}`),P=ce.Data;console.log("vendedor",ce.data.nombreCompleto);const Ze={hotel:r.hotel,nombrePrograma:r.nombrePrograma,destino:r.destino},de=await O.post("https://backmultidestinos.onrender.com/hoteles/buscar",Ze),xt=de.data[0].incluye,ct=de.data[0].noIncluye,o=new Lt,i={top:10,bottom:10,left:10,right:10},x=o.internal.pageSize.width,t=o.internal.pageSize.height,a=40,A={left:10,right:10,top:5,bottom:5},be=await new Promise((n,f)=>{const e=new Image;e.src="https://i.ibb.co/1sFJ7dT/imgAzul.png",e.onload=()=>n(e),e.onerror=f}),Ve=be.width/be.height,j=x/4-A.left-A.right,oe=Math.min(100,j),Ke=oe/Ve,dt=i.top+(a-Ke)/2,xe=`PBX(601)7621133
CALLE 64 No. 11-37 LOC 301
EMAIL: MULTIDESTINOS_EXPRESS@YAHOO.COM`,qe=`Numero de Liquidacion: ${D}`;o.addImage(be,"PNG",i.left+A.left,dt,oe,Ke);const ut=x-i.left-i.right-oe-A.left-A.right-10;o.setFontSize(10),o.text(o.splitTextToSize(xe,ut),i.left+oe+A.left+A.right,i.top+10);const ft=x-i.right-o.getTextWidth(qe)-A.right;o.setFontSize(12),o.setFont("Helvetica-Bold",12),o.text(qe,ft,i.top+10),o.setDrawColor(0),o.rect(i.left,i.top,x-i.left-i.right,a,"S"),o.setFontSize(10);const Me=i.top+a+10;o.setFontSize(10),o.text("SOLICITUD DE RESERVA:",i.left,Me-4),o.setFontSize(8);const ye=["FECHA SOLICITUD:","AGENCIA:","TEL\xC9FONO:","CONTACTO:","NIT:","VENDEDOR:"],et=[new Date(r.fechaCreacion).toLocaleDateString(),r.cliente.toString(),V.telefono?V.telefono.toString():"N/A",V.nit?V.nit.toString():"N/A",V.nit?V.nit.toString():"N/A",ce.data.nombreCompleto?ce.data.nombreCompleto.toString():"N/A"],He=6,Ce=(x-i.left-i.right)/He;let W=i.left,u=Me;for(let n=0;n<ye.length;n++){o.text(ye[n],W,u);const f=et[n]!==void 0?et[n]:"N/A",e=o.splitTextToSize(f,Ce-2);o.text(e,W,u+5),W+=Ce,((n+1)%He===0||n===ye.length-1)&&(u+=15,W=i.left)}const G=tt(l),c=["NOCHES:","HOTEL:","PLAN:","DESTINO:","DIRECCION:","ACOMODACI\xD3N:"],Be=[r.noches?r.noches.toString():"N/A",r.hotel?r.hotel.toString():"N/A",r.plan?r.plan.toString():"N/A",r.destino?r.destino.toString():"N/A",r.direccion?r.direccion.toString():"N/A",G.toString()];console.log("campso2",Be);const mt=6,_e=(x-i.left-i.right)/mt;u+=1;for(let n=0;n<c.length;n++){o.text(c[n],W,u);const f=Be[n]!==void 0?Be[n]:"N/A",e=o.splitTextToSize(f,_e-2);o.text(e,W,u+5),W+=_e}u+=1,o.setFontSize(10),o.text("PASAJEROS: ",i.left,u+12),u+=20;const Te=["NOMBRE","DOCUMENTO","F. NACIMIENTO","EDAD"],ot=Y.map(n=>{const f=new Date(n.fechaNacimiento),e=new Date;let s=e.getFullYear()-f.getFullYear();const d=e.getMonth()-f.getMonth();return(d<0||d===0&&e.getDate()<f.getDate())&&s--,[n.nombre,n.numeroDocumento,f.toLocaleDateString(),s]}),je=(x-i.left-i.right)/Te.length,at=x-i.left-i.right,We=10+8*ot.length;o.rect(i.left,u,at,We,"S"),o.setFontSize(8),Te.forEach((n,f)=>{o.text(n,i.left+5+f*je,u+5)}),u+=10,ot.forEach((n,f)=>{n.forEach((e,s)=>{o.text(e.toString(),i.left+5+s*je,u+f*8)})}),u+=We-15,u+=1,o.setFontSize(10),o.text("ITINERARIO: ",i.left,u+12),u+=20;const Ue=["AEROLINEA","VUELO","FECHA","RUTA","CLASE","HR SALIDA","HR LLEGADA","RECORD"],ue=[[r.aerolineaIda||"N/A",r.vueloIda||"N/A",r.fechaInicio?new Date(new Date(r.fechaInicio).getTime()+new Date(r.fechaInicio).getTimezoneOffset()*6e4).toLocaleDateString():"N/A",r.ruta1||"N/A",r.claseIda||"N/A",r.horaSalidaIda||"N/A",r.horaLlegadaIda||"N/A",r.recordIda||"N/A"]];r.aerolineaEscalaIda!=null&&(ue.push([r.aerolineaEscalaIda||"N/A",r.vueloEscalaIda||"N/A",r.fechaInicio?new Date(new Date(r.fechaInicio).getTime()+new Date(r.fechaInicio).getTimezoneOffset()*6e4).toLocaleDateString():"N/A","Escala Ida",r.claseEscalaIda||"N/A",r.horaSalidaEscalaIda||"N/A",r.horaLlegadaEscalaIda||"N/A",""]),ue.push([r.aerolineaEscalaVuelta||"N/A",r.vueloEscalaVuelta||"N/A",r.fechaFin?new Date(new Date(r.fechaFin).getTime()+new Date(r.fechaFin).getTimezoneOffset()*6e4).toLocaleDateString():"N/A","Escala Vuelta",r.claseEscalaVuelta||"N/A",r.horaSalidaEscalaVuelta||"N/A",r.horaLlegadaEscalaVuelta||"N/A",""])),ue.push([r.aerolineaVuelta||"N/A",r.vueloVuelta||"N/A",r.fechaFin?new Date(new Date(r.fechaFin).getTime()+new Date(r.fechaFin).getTimezoneOffset()*6e4).toLocaleDateString():"N/A",r.ruta2||"N/A",r.claseVuelta||"N/A",r.horaSalidaVuelta||"N/A",r.horaLlegadaVuelta||"N/A",r.recordVuelta||"N/A"]);const $e=(x-i.left-i.right)/Ue.length,it=x-i.left-i.right,ae=10+8*ue.length;o.rect(i.left,u,it,ae,"S"),o.setFontSize(8),Ue.forEach((n,f)=>{o.text(n,i.left+f*$e,u+5)}),u+=10,ue.forEach((n,f)=>{n.forEach((e,s)=>{o.text(e,i.left+s*$e,u+f*8)})}),u+=ae-8;let y;const ht="Esta cotizaci\xF3n est\xE1 sujeta a cambio y disponibilidad al momento de reservar (Sin servicio confirmado)",fe=u,H=30;o.setDrawColor(0),o.rect(i.left,fe,x-i.left-i.right,H),o.setFontSize(12),o.text("OBSERVACIONES:",i.left+2,fe+6),o.setFontSize(10),o.text(ht,i.left+2,fe+15,{maxWidth:x-i.left-i.right-4}),u=fe+H;const Ie=u+10;o.setFontSize(8);const De=`El pago de su plan se realizar\xE1 conforme a las siguientes condiciones:

Planes con inicio dentro de los 30 d\xEDas:  El pago total deber\xE1 efectuarse dentro de un d\xEDa h\xE1bil a partir de la fecha de env\xEDo de este documento.
Planes con inicio posterior a los 30 d\xEDas: El pago se realizar\xE1 en dos cuotas:
  * Primera cuota: 50% del valor total del plan, pagadero dentro de un d\xEDa h\xE1bil a partir de la fecha de env\xEDo de este documento.
  * Segunda cuota: 50% restante del valor total del plan, pagadero 30 d\xEDas antes de la fecha de inicio del plan.`,ke=o.splitTextToSize(De,x-i.left-i.right-4);let X=18;ke.forEach(n=>{X+=o.getTextDimensions(n,{fontSize:8}).h}),u=_(o,u,X),o.setDrawColor(0),o.rect(i.left,Ie,x-i.left-i.right,X),o.setFontSize(12),o.text("PLAZO DE PAGO:",i.left+2,Ie+6),o.setFontSize(8),y=Ie+15,ke.forEach(n=>{o.text(n,i.left+2,y,{maxWidth:x-i.left-i.right-4}),y+=o.getTextDimensions(n,{fontSize:8}).h}),u=Ie+X;let nt=!1;o.setFontSize(8);const Ye=xt.split("\xBF");let ie=[];Ye.forEach(n=>{const f=o.splitTextToSize(n,x-i.left-i.right-4);ie=ie.concat(f)});let ne=18;Ye.forEach(n=>{const f=o.splitTextToSize(n,x-i.left-i.right-4);for(let e=0;e<f.length;e++){const s=f[e];ne+=o.getTextDimensions(s,{fontSize:8}).h,!s.endsWith(`
`)&&e<f.length-1&&(ne+=o.getTextDimensions(" ",{fontSize:8}).h)}}),u=_(o,u,ne),u===i.top&&(nt=!0);const me=u+10;o.setDrawColor(0),o.rect(i.left,me,x-i.left-i.right,ne),o.setFontSize(12),o.text("INCLUYE:",i.left+2,me+6),o.setFontSize(8),y=me+15,ie.forEach(n=>{o.text(n,i.left+2,y,{maxWidth:x-i.left-i.right-4}),y+=o.getTextDimensions(n,{fontSize:8}).h}),u=me+ne;const Le=ct.split("\xBF");let J=[];Le.forEach(n=>{const f=o.splitTextToSize(n,x-i.left-i.right-4);J=J.concat(f)});let U=18;Le.forEach(n=>{const f=o.splitTextToSize(n,x-i.left-i.right-4);for(let e=0;e<f.length;e++){const s=f[e];U+=o.getTextDimensions(s,{fontSize:8}).h,!s.endsWith(`
`)&&e<f.length-1&&(U+=o.getTextDimensions(" ",{fontSize:8}).h)}}),u=_(o,u,U),nt||(u=i.top);const he=u+10;o.setDrawColor(0),o.rect(i.left,he,x-i.left-i.right,U),o.setFontSize(12),o.text("NO INCLUYE:",i.left+2,he+6),o.setFontSize(8),y=he+15,J.forEach(n=>{o.text(n,i.left+2,y,{maxWidth:x-i.left-i.right-4}),y+=o.getTextDimensions(n,{fontSize:8}).h}),u=he+U,o.addPage(),u=i.top,o.setFontSize(10),o.text("LIQUIDACI\xD3N:",i.left,u),u+=5;const le=u+5,E=2,g=6,m=(x-i.left-i.right)/6;o.setDrawColor(0);let gt=0;o.setFontSize(7);let N=0;l.forEach(n=>{const f=le+N*g;h(f);const e=`Valor adul ${n.acomodacion}`;o.text(e,i.left+E,f+g/2,{baseline:"middle"});const s=Math.round(n.precioComisionableAdulto);o.text(s.toString(),i.left+m+E,f+g/2,{baseline:"middle"});const d=n.adultos;o.text(d.toString(),i.left+2*m+E,f+g/2,{baseline:"middle"});const S=Math.round(n.precioComisionableAdulto*n.adultos);if(o.text(S.toString(),i.left+3*m+E,f+g/2,{baseline:"middle"}),N===0){o.setFontSize(6);const v=we==="Comisi\xF3n"?"BASE COMISI\xD3N":"BASE COMISION";o.text(v,i.left+4*m+E,f+g/2,{baseline:"middle"}),o.setFontSize(7)}let T=S;if(n.ni\u00F1os>0&&(T+=Math.round(n.precioComisionableNino*n.ni\u00F1os)),gt+=T,N++,n.ni\u00F1os>0){const v=le+N*g;h(v);const $=`Valor child ${n.acomodacion}`;o.text($,i.left+E,v+g/2,{baseline:"middle"});const M=Math.round(n.precioComisionableNino);o.text(M.toString(),i.left+m+E,v+g/2,{baseline:"middle"});const R=n.ni\u00F1os;o.text(R.toString(),i.left+2*m+E,v+g/2,{baseline:"middle"});const w=Math.round(n.precioComisionableNino*n.ni\u00F1os);o.text(w.toString(),i.left+3*m+E,v+g/2,{baseline:"middle"}),N++}}),o.text(gt.toString(),i.left+5*m+E,le+g/2,{baseline:"middle"}),u=le+N*g+10;const q=["TRANSPORTE NO COMI","Q","YS","CO","TA","YS TA","defensaCivil","alcaldiaNacional","alcaldiaExtranjero","pqsNaturalesExtranjero","pqsNaturales25a65","pqsNaturales5a24","cormacarenaExtranjero","cormacarena5a11","cormacarena12a65"],ge=[r.otros,r.combus,r.iva,r.tasa,r.ta,r.ivaTa,F.defensaCivil_Total,F.alcaldiaNacional_Total,F.alcaldiaExtranjero_Total,F.pqsNaturalesExtranjero_Total,F.pqsNaturales25a65_Total,F.pqsNaturales5a24_Total,F.cormacarenaExtranjero_Total,F.cormacarena5a11_Total,F.cormacarena12a65_Total,r.precioTrans],Z=["alcaldiaNacional","alcaldiaExtranjero","pqsNaturalesExtranjero","pqsNaturales25a65","pqsNaturales5a24","cormacarenaExtranjero","cormacarena5a11","cormacarena12a65"],pe={defensaCivil:"Defensa Civil",alcaldiaNacional:"Alcald\xEDa Nacional",alcaldiaExtranjero:"Alcald\xEDa Extranjero",pqsNaturalesExtranjero:"PQS. Naturales Extranjero",pqsNaturales25a65:"PQS. Naturales 25 a 65",pqsNaturales5a24:"PQS. Naturales 5 a 24",cormacarenaExtranjero:"Cormacarena Extranjero",cormacarena5a11:"Cormacarena 5 a 11",cormacarena12a65:"Cormacarena 12 a 65"};if(r.suplemento>0&&(q.push("SUPLEMENTO"),ge.push(r.suplemento)),r.extra1)if(r.extra1.includes("*")){let n=r.extra1.split("*"),f=n[0],e=n[1];q.push("Valor Extra","Valor Extra2"),ge.push(f,e)}else{let n=r.extra1;q.push("Valor Extra"),ge.push(n)}q.forEach((n,f)=>{const e=u+f*g;h(e);const s=pe[n]||n;o.text(s,i.left+E,e+g/2,{baseline:"middle"});const d=r.totalPasajeros,S=ge[f]||0;let T="";if(Z.includes(n)){const R=`${n}_numeroPersonas`,w=F[R]||0;T=w!==0?Math.trunc(S/w):""}else T=d!==0?Math.trunc(S/d):"";o.text(T.toString(),i.left+m+E,e+g/2,{baseline:"middle"});const v=d!==0?Math.trunc(d).toString():"";let $="";if(Z.includes(n)){const R=`${n}_numeroPersonas`;$=F[R]||""}else $=v;o.text($,i.left+2*m+E,e+g/2,{baseline:"middle"});const M=S!==0?Math.trunc(S).toString():"";if(o.text(M,i.left+3*m+E,e+g/2,{baseline:"middle"}),n==="Q"){o.text("Porcentaje",i.left+4*m+E,e+g/2,{baseline:"middle"});const R=r.clientePorcentaje||0,w=Math.trunc(R).toString()+"%";o.text(w,i.left+5*m+E,e+g/2,{baseline:"middle"})}else if(n==="YS"){o.text("Valor Descuento",i.left+4*m+E,e+g/2,{baseline:"middle"});const R=r.valorDescuento||0,w=Math.trunc(R).toString();o.text(w,i.left+5*m+E,e+g/2,{baseline:"middle"}),we==="Comisi\xF3n"&&[{label:`IVA(${V.porcentajeIva}%) (-)`,value:r.ivaValor},{label:`RTE FUENTE(${V.rteFuente}%) (+)`,value:r.rteFuente},{label:`RTE ICA(${V.rteIca}%) (+)`,value:r.rteIca},{label:"Total Comisi\xF3n",value:r.totalComision}].forEach((Ee,Et)=>{const Ne=e+(Et+1)*g;h(Ne),o.text(Ee.label,i.left+4*m+E,Ne+g/2,{baseline:"middle"}),o.text(Ee.value.toString(),i.left+5*m+E,Ne+g/2,{baseline:"middle"})})}}),u+=q.length*g,l.forEach(n=>{if(n.adultos>0){const f=u;h(f),o.text(`Valor total Adt ${n.acomodacion}`,i.left+E,f+g/2,{baseline:"middle"});const e=n.precioHabitacionAdulto||0,s=ee(e).format("$0,0");o.text(s,i.left+3*m+E,f+g/2,{baseline:"middle"}),u+=g}if(n.ni\u00F1os>0){const f=u;h(f),o.text(`Valor total Chd ${n.acomodacion}`,i.left+E,f+g/2,{baseline:"middle"});const e=n.precioHabitacionNino||0,s=ee(e).format("$0,0");o.text(s,i.left+3*m+E,f+g/2,{baseline:"middle"}),u+=g}}),o.setFontSize(8),u+=g,h(u),o.text("Valor total",i.left+E,u+g/2,{baseline:"middle"});const Oe=r.precioBrutoTotal||0,pt=ee(Oe).format("$0,0");o.text(pt,i.left+3*m+E,u+g/2,{baseline:"middle"}),o.text("Precio a pagar",i.left+4*m+E,u+g/2-2,{baseline:"middle"}),o.text("a Multidestinos",i.left+4*m+E,u+g/2+2,{baseline:"middle"});const lt=parseFloat(r.suplemento)||0,Ge=parseFloat(r.totalPrecioCliente)||0,st=lt>0?Ge+lt:Ge,St=ee(st).format("$0,0");o.text(St,i.left+5*m+E,u+g/2,{baseline:"middle"}),u+=g+10;const Se=i.left;let B=u+5;const se=190;let Ae=30;o.setFontSize(7),o.setLineWidth(.5);const Pe="PARA CONFIRMACIONES SE DEBE ENVIAR DEPOSITO DEL 50% DEL VALOR DEL PLAN Y EL SALDO 30 DIAS ANTES DE LA SALIDA, SI LA FECHA DE VIAJES CERCANA SE DEBE CANCELAR EL 100%. LOS SERVICIOS DEJADOS DE TOMAR NO SON REMBOLSABLES. LA CANCELACI\xD3N CON 18 DIAS ANTES DE VIAJE LA PENALIDAD SERA DEL 100% DEL VALOR DEL PLAN, LOS TIQUETES NO SON REEMBOLSABLE, NI ENDOSABLES, PENALIDAD POR CAMBIO (FECHA, NOMBRE, HORA, RUTAS) 200.000. ESTAS POLITICAS ESTAN PUBLICADAS DE MANERA CLARA Y ESPECIFICA EN NUESTRA PAGINA WWW.MULTIDESTINOSEXPRESS.COM. *TARIFAS SUJETA A CAMBIO Y DISPONIBILIDAD SIN PREVIO AVISO*",re=o.splitTextToSize(Pe,se-10);B+Ae>t-i.bottom&&(o.addPage(),u=i.top,B=u+5),o.text("Deposito y Condiciones de Pago",Se+5,B+3),o.setFontSize(6);const ze=5;Ae=20+re.length*ze,o.rect(Se,B,se,Ae),re.forEach((n,f)=>{o.text(n,Se+5,B+10+f*ze)}),ve[0].facturaPara&&(u=B+10+re.length*ze,o.setFontSize(8),o.text("FACTURA A NOMBRE DE:",Se+5,u),u+=ze,o.text(ve[0].facturaPara,Se+5,u)),u+=Ae+5;const Xe=o.output("blob");return o.save(`cotizacion_${p}.pdf`),Xe}catch(_){console.error("Error al descargar cotizaci\xF3n:",_)}}},async mounted(){try{const p=await O.get("https://backmultidestinos.onrender.com/liquidacion");this.rows=p.data}catch(p){console.error("Error al obtener las liquidaciones:",p)}}},Bt={class:"row q-pb-md"},_t={class:"col-12"},jt={class:"q-ma-none text-primary"},Wt=z("p",{class:"text-grey-8 q-ma-none"},"Gesti\xF3n de liquidaciones y facturas",-1),Ut={class:"row q-col-gutter-md"},$t={class:"col-12 col-md-4"},kt={class:"text-h6"},Yt={class:"row q-mt-md"},Qt={class:"col-12 col-md-8"},Gt={class:"text-h6"},Xt={class:"full-width row flex-center q-py-lg"},Jt=z("div",{class:"text-h6 text-grey-7"}," No se encontraron liquidaciones ",-1),Zt=z("div",{class:"full-width row flex-center q-py-lg"},[z("div",{class:"text-caption text-grey-7"}," Intenta modificar los filtros de b\xFAsqueda ")],-1),Kt=z("div",{class:"componentes-adicionales-tabla q-mt-md"},null,-1),eo={class:"text-h6"};function to(p,D,_,te,L,k){return Ct(),Tt(zt,{padding:"",class:"liquidaciones-page bg-grey-1"},{default:I(()=>[z("div",Bt,[z("div",_t,[z("h4",jt,[b(K,{name:"money",size:"sm",class:"q-mr-sm"}),Re(" Sistema de Liquidaciones ")]),Wt])]),z("div",Ut,[z("div",$t,[b(Nt,{class:"filtros-card",flat:"",bordered:""},{default:I(()=>[b(Fe,{class:"bg-primary text-white"},{default:I(()=>[z("div",kt,[b(K,{name:"filter_list",class:"q-mr-sm"}),Re(" Filtros ")])]),_:1}),b(Fe,null,{default:I(()=>[b(It,{modelValue:L.filterId,"onUpdate:modelValue":D[1]||(D[1]=C=>L.filterId=C),label:"ID de Cotizaci\xF3n",filled:"",dense:"",clearable:"",class:"q-mb-md",debounce:300,placeholder:"Buscar por ID..."},{prepend:I(()=>[b(K,{name:"search"})]),append:I(()=>[L.filterId?(Ct(),Tt(K,{key:0,name:"close",onClick:D[0]||(D[0]=C=>L.filterId=""),class:"cursor-pointer"})):Rt("",!0)]),_:1},8,["modelValue"]),b(Ft,{modelValue:L.filterStatus,"onUpdate:modelValue":D[2]||(D[2]=C=>L.filterStatus=C),options:L.statusOptions,label:"Estado",filled:"",dense:"",clearable:"","emit-value":"","map-options":"",class:"q-mb-md",placeholder:"Todos los estados"},{prepend:I(()=>[b(K,{name:"label"})]),_:1},8,["modelValue","options"]),z("div",Yt,[b(rt,{color:"primary",label:"Aplicar Filtros",icon:"check",class:"q-mr-sm"})])]),_:1})]),_:1})]),z("div",Qt,[b(Nt,{flat:"",bordered:""},{default:I(()=>[b(Fe,{class:"bg-primary text-white"},{default:I(()=>[z("div",Gt,[b(K,{name:"list",class:"q-mr-sm"}),Re(" Lista de Liquidaciones ")])]),_:1}),b(Fe,null,{default:I(()=>[b(vt,{rows:k.filteredRows,columns:L.columns,"row-key":"id",pagination:p.pagination,"onUpdate:pagination":D[3]||(D[3]=C=>p.pagination=C),loading:p.loading,filter:p.globalFilter,"binary-state-sort":"",flat:"",bordered:"",separator:"cell"},{"body-cell-tieneImpuestos":I(C=>[b(bt,{props:C},{default:I(()=>[Re(Dt(C.row.impuestosLiq==="1"?"S\xED":"No"),1)]),_:2},1032,["props"])]),"body-cell-status":I(C=>[b(bt,{props:C},{default:I(()=>[b(wt,{color:k.chipColor(C.row.status),"text-color":"white"},{default:I(()=>[Re(Dt(C.row.status),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-acciones":I(C=>[b(bt,{props:C},{default:I(()=>[b(rt,{onClick:Je=>k.mostrarDialogoFactura(C.row),color:"primary",label:"Descargar Liquidacion"},null,8,["onClick"])]),_:2},1032,["props"])]),"no-data":I(()=>[z("div",Xt,[b(K,{name:"search_off",size:"lg",color:"grey-7",class:"q-mb-md"}),Jt]),Zt]),_:1},8,["rows","columns","pagination","loading","filter"])]),_:1})]),_:1}),Kt])]),b(Mt,{modelValue:L.mostrarDialogo,"onUpdate:modelValue":D[5]||(D[5]=C=>L.mostrarDialogo=C),persistent:""},{default:I(()=>[b(Nt,{style:{"min-width":"350px"}},{default:I(()=>[b(Fe,{class:"bg-primary text-white"},{default:I(()=>[z("div",eo,[b(K,{name:"receipt",class:"q-mr-sm"}),Re(" Opciones de Facturaci\xF3n ")])]),_:1}),b(Fe,null,{default:I(()=>[b(It,{modelValue:L.nombreFactura,"onUpdate:modelValue":D[4]||(D[4]=C=>L.nombreFactura=C),label:"Nombre para la factura",filled:"",class:"q-mb-sm",ref:"nombreInput"},{prepend:I(()=>[b(K,{name:"person"})]),_:1},8,["modelValue"])]),_:1}),b(Vt,{align:"right",class:"bg-grey-2 q-py-sm"},{default:I(()=>[qt(b(rt,{flat:"",label:"Cancelar",color:"negative",icon:"close"},null,512),[[yt]]),b(rt,{label:"Aceptar",color:"positive",onClick:k.procesarDescarga,icon:"download",loading:p.descargando},null,8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var no=Ot(Ht,[["render",to]]);export{no as default};

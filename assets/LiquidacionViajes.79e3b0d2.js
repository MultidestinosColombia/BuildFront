import{c as kt,D as Mt,bc as Bt,E as jt,a as le,r as Vt,w as qt,h as ft,g as Ut,bd as _t,be as Yt,ag as Qt,a4 as Ae,aE as $t,$ as Gt,a0 as Ye,a1 as tt,a2 as Y,a5 as X,a3 as B,a6 as ce,a9 as Jt,a7 as _e,am as Pe,ap as It,a8 as Qe,aa as Xt,an as yt,bf as Kt,ao as Zt,aG as eo,aH as to,J as Ht,aI as oo,aF as ao}from"./index.d436ad73.js";import{Q as bt}from"./QTooltip.25e2e452.js";import{Q as Lt}from"./QSpace.067289dd.js";import{Q as At}from"./QInput.0f6ca6f6.js";import{Q as Rt,a as no}from"./QSelect.917dcf46.js";import{Q as io}from"./QInnerLoading.ec42a98b.js";import{a as ro,Q as zt,e as lo}from"./QTable.4dd9976b.js";import{Q as so}from"./QTr.c367d714.js";import{Q as co}from"./QBadge.efffaa81.js";import{b as uo}from"./format.19399105.js";import{Q as fo}from"./QPage.b58eb39f.js";import{C as Wt}from"./ClosePopup.66a9a7e9.js";import{c as Ft,E as Ot,n as Te}from"./PDFButton.25327d72.js";import"./LocalStorage.60d0e99e.js";import{a as se}from"./axios.37d53be1.js";import{_ as ho}from"./plugin-vue_export-helper.21dcd24c.js";import"./selection.dbfae057.js";import"./use-key-composition.002912ea.js";import"./use-file-dom-props.89b0fc0b.js";import"./QList.ad083ee4.js";function Ct(y,Z){return[!0,!1].includes(y)?y:Z}var go=kt({name:"QPagination",props:{...Mt,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:y=>(typeof y=="string"?parseInt(y,10):y)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:y=>y===""||Bt.includes(y)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(y,{emit:Z}){const{proxy:ie}=Ut(),{$q:re}=ie,J=jt(y,re),G=le(()=>parseInt(y.min,10)),oe=le(()=>parseInt(y.max,10)),L=le(()=>parseInt(y.maxPages,10)),i=le(()=>l.value+" / "+oe.value),F=le(()=>Ct(y.boundaryLinks,y.input)),g=le(()=>Ct(y.boundaryNumbers,!y.input)),N=le(()=>Ct(y.directionLinks,y.input)),C=le(()=>Ct(y.ellipses,!y.input)),P=Vt(null),l=le({get:()=>y.modelValue,set:A=>{if(A=parseInt(A,10),y.disable||isNaN(A))return;const x=uo(A,G.value,oe.value);y.modelValue!==x&&Z("update:modelValue",x)}});qt(()=>`${G.value}|${oe.value}`,()=>{l.value=y.modelValue});const T=le(()=>"q-pagination row no-wrap items-center"+(y.disable===!0?" disabled":"")),b=le(()=>y.gutter in _t?`${_t[y.gutter]}px`:y.gutter||null),m=le(()=>b.value!==null?`--q-pagination-gutter-parent:-${b.value};--q-pagination-gutter-child:${b.value}`:null),d=le(()=>{const A=[y.iconFirst||re.iconSet.pagination.first,y.iconPrev||re.iconSet.pagination.prev,y.iconNext||re.iconSet.pagination.next,y.iconLast||re.iconSet.pagination.last];return re.lang.rtl===!0?A.reverse():A}),n=le(()=>({"aria-disabled":y.disable===!0?"true":"false",role:"navigation"})),r=le(()=>Yt(y,"flat")),p=le(()=>({[r.value]:!0,round:y.round,rounded:y.rounded,padding:y.padding,color:y.color,textColor:y.textColor,size:y.size,ripple:y.ripple!==null?y.ripple:!0})),t=le(()=>{const A={[r.value]:!1};return y.activeDesign!==""&&(A[y.activeDesign]=!0),A}),e=le(()=>({...t.value,color:y.activeColor||y.color,textColor:y.activeTextColor||y.textColor})),s=le(()=>{let A=Math.max(L.value,1+(C.value?2:0)+(g.value?2:0));const x={pgFrom:G.value,pgTo:oe.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(oe.value).length)}em`}};return L.value&&A<oe.value-G.value+1&&(A=1+Math.floor(A/2)*2,x.pgFrom=Math.max(G.value,Math.min(oe.value-A+1,y.modelValue-Math.floor(A/2))),x.pgTo=Math.min(oe.value,x.pgFrom+A-1),g.value&&(x.boundaryStart=!0,x.pgFrom++),C.value&&x.pgFrom>G.value+(g.value?1:0)&&(x.ellipsesStart=!0,x.pgFrom++),g.value&&(x.boundaryEnd=!0,x.pgTo--),C.value&&x.pgTo<oe.value-(g.value?1:0)&&(x.ellipsesEnd=!0,x.pgTo--)),x});function o(A){l.value=A}function a(A){l.value=l.value+A}const f=le(()=>{function A(){l.value=P.value,P.value=null}return{"onUpdate:modelValue":x=>{P.value=x},onKeyup:x=>{Qt(x,13)===!0&&A()},onBlur:A}});function c(A,x,j){const v={"aria-label":x,"aria-current":"false",...p.value,...A};return j===!0&&Object.assign(v,{"aria-current":"true",...e.value}),x!==void 0&&(y.toFn!==void 0?v.to=y.toFn(x):v.onClick=()=>{o(x)}),ft(Ae,v)}return Object.assign(ie,{set:o,setByOffset:a}),()=>{const A=[],x=[];let j;if(F.value===!0&&(A.push(c({key:"bls",disable:y.disable||y.modelValue<=G.value,icon:d.value[0]},G.value)),x.unshift(c({key:"ble",disable:y.disable||y.modelValue>=oe.value,icon:d.value[3]},oe.value))),N.value===!0&&(A.push(c({key:"bdp",disable:y.disable||y.modelValue<=G.value,icon:d.value[1]},y.modelValue-1)),x.unshift(c({key:"bdn",disable:y.disable||y.modelValue>=oe.value,icon:d.value[2]},y.modelValue+1))),y.input!==!0){j=[];const{pgFrom:v,pgTo:u,marginalStyle:w}=s.value;if(s.value.boundaryStart===!0){const S=G.value===y.modelValue;A.push(c({key:"bns",style:w,disable:y.disable,label:G.value},G.value,S))}if(s.value.boundaryEnd===!0){const S=oe.value===y.modelValue;x.unshift(c({key:"bne",style:w,disable:y.disable,label:oe.value},oe.value,S))}s.value.ellipsesStart===!0&&A.push(c({key:"bes",style:w,disable:y.disable,label:"\u2026",ripple:!1},v-1)),s.value.ellipsesEnd===!0&&x.unshift(c({key:"bee",style:w,disable:y.disable,label:"\u2026",ripple:!1},u+1));for(let S=v;S<=u;S++)j.push(c({key:`bpg${S}`,style:w,disable:y.disable,label:S},S,S===y.modelValue))}return ft("div",{class:T.value,...n.value},[ft("div",{class:"q-pagination__content row no-wrap items-center",style:m.value},[...A,y.input===!0?ft(At,{class:"inline",style:{width:`${i.value.length/1.5}em`},type:"number",dense:!0,value:P.value,disable:y.disable,dark:J.value,borderless:!0,inputClass:y.inputClass,inputStyle:y.inputStyle,placeholder:i.value,min:G.value,max:oe.value,...f.value}):ft("div",{class:"q-pagination__middle row justify-center"},j),...x])])}}}),mo={exports:{}};/*!
 * 
 *               jsPDF AutoTable plugin v3.8.2
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(y,Z){(function(re,J){y.exports=J(function(){try{return require("jspdf")}catch{}}())})(typeof globalThis!="undefined"?globalThis:typeof Ft!="undefined"?Ft:typeof window!="undefined"?window:typeof self!="undefined"?self:Ft,function(ie){return function(){var re={172:function(L,i){var F=this&&this.__extends||function(){var C=function(P,l){return C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,b){T.__proto__=b}||function(T,b){for(var m in b)Object.prototype.hasOwnProperty.call(b,m)&&(T[m]=b[m])},C(P,l)};return function(P,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");C(P,l);function T(){this.constructor=P}P.prototype=l===null?Object.create(l):(T.prototype=l.prototype,new T)}}();Object.defineProperty(i,"__esModule",{value:!0}),i.CellHookData=i.HookData=void 0;var g=function(){function C(P,l,T){this.table=l,this.pageNumber=l.pageNumber,this.pageCount=this.pageNumber,this.settings=l.settings,this.cursor=T,this.doc=P.getDocument()}return C}();i.HookData=g;var N=function(C){F(P,C);function P(l,T,b,m,d,n){var r=C.call(this,l,T,n)||this;return r.cell=b,r.row=m,r.column=d,r.section=m.section,r}return P}(g);i.CellHookData=N},340:function(L,i,F){Object.defineProperty(i,"__esModule",{value:!0});var g=F(4),N=F(136),C=F(744),P=F(776),l=F(664),T=F(972);function b(m){m.API.autoTable=function(){for(var d=[],n=0;n<arguments.length;n++)d[n]=arguments[n];var r;d.length===1?r=d[0]:(console.error("Use of deprecated autoTable initiation"),r=d[2]||{},r.columns=d[0],r.body=d[1]);var p=(0,P.parseInput)(this,r),t=(0,T.createTable)(this,p);return(0,l.drawTable)(this,t),this},m.API.lastAutoTable=!1,m.API.previousAutoTable=!1,m.API.autoTable.previous=!1,m.API.autoTableText=function(d,n,r,p){(0,N.default)(d,n,r,p,this)},m.API.autoTableSetDefaults=function(d){return C.DocHandler.setDefaults(d,this),this},m.autoTableSetDefaults=function(d,n){C.DocHandler.setDefaults(d,n)},m.API.autoTableHtmlToJson=function(d,n){var r;if(n===void 0&&(n=!1),typeof window=="undefined")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var p=new C.DocHandler(this),t=(0,g.parseHtml)(p,d,window,n,!1),e=t.head,s=t.body,o=((r=e[0])===null||r===void 0?void 0:r.map(function(a){return a.content}))||[];return{columns:o,rows:s,data:s}},m.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var d=this.lastAutoTable;return d&&d.finalY?d.finalY:0},m.API.autoTableAddPageContent=function(d){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),m.API.autoTable.globalDefaults||(m.API.autoTable.globalDefaults={}),m.API.autoTable.globalDefaults.addPageContent=d,this},m.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}i.default=b},136:function(L,i){Object.defineProperty(i,"__esModule",{value:!0});function F(g,N,C,P,l){P=P||{};var T=1.15,b=l.internal.scaleFactor,m=l.internal.getFontSize()/b,d=l.getLineHeightFactor?l.getLineHeightFactor():T,n=m*d,r=/\r\n|\r|\n/g,p="",t=1;if((P.valign==="middle"||P.valign==="bottom"||P.halign==="center"||P.halign==="right")&&(p=typeof g=="string"?g.split(r):g,t=p.length||1),C+=m*(2-T),P.valign==="middle"?C-=t/2*n:P.valign==="bottom"&&(C-=t*n),P.halign==="center"||P.halign==="right"){var e=m;if(P.halign==="center"&&(e*=.5),p&&t>=1){for(var s=0;s<p.length;s++)l.text(p[s],N-l.getStringUnitWidth(p[s])*e,C),C+=n;return l}N-=l.getStringUnitWidth(g)*e}return P.halign==="justify"?l.text(g,N,C,{maxWidth:P.maxWidth||100,align:"justify"}):l.text(g,N,C),l}i.default=F},420:function(L,i){Object.defineProperty(i,"__esModule",{value:!0}),i.getPageAvailableWidth=i.parseSpacing=i.getFillStyle=i.addTableBorder=i.getStringWidth=void 0;function F(l,T,b){b.applyStyles(T,!0);var m=Array.isArray(l)?l:[l],d=m.map(function(n){return b.getTextWidth(n)}).reduce(function(n,r){return Math.max(n,r)},0);return d}i.getStringWidth=F;function g(l,T,b,m){var d=T.settings.tableLineWidth,n=T.settings.tableLineColor;l.applyStyles({lineWidth:d,lineColor:n});var r=N(d,!1);r&&l.rect(b.x,b.y,T.getWidth(l.pageSize().width),m.y-b.y,r)}i.addTableBorder=g;function N(l,T){var b=l>0,m=T||T===0;return b&&m?"DF":b?"S":m?"F":null}i.getFillStyle=N;function C(l,T){var b,m,d,n;if(l=l||T,Array.isArray(l)){if(l.length>=4)return{top:l[0],right:l[1],bottom:l[2],left:l[3]};if(l.length===3)return{top:l[0],right:l[1],bottom:l[2],left:l[1]};if(l.length===2)return{top:l[0],right:l[1],bottom:l[0],left:l[1]};l.length===1?l=l[0]:l=T}return typeof l=="object"?(typeof l.vertical=="number"&&(l.top=l.vertical,l.bottom=l.vertical),typeof l.horizontal=="number"&&(l.right=l.horizontal,l.left=l.horizontal),{left:(b=l.left)!==null&&b!==void 0?b:T,top:(m=l.top)!==null&&m!==void 0?m:T,right:(d=l.right)!==null&&d!==void 0?d:T,bottom:(n=l.bottom)!==null&&n!==void 0?n:T}):(typeof l!="number"&&(l=T),{top:l,right:l,bottom:l,left:l})}i.parseSpacing=C;function P(l,T){var b=C(T.settings.margin,0);return l.pageSize().width-(b.left+b.right)}i.getPageAvailableWidth=P},796:function(L,i){var F=this&&this.__extends||function(){var P=function(l,T){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,m){b.__proto__=m}||function(b,m){for(var d in m)Object.prototype.hasOwnProperty.call(m,d)&&(b[d]=m[d])},P(l,T)};return function(l,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");P(l,T);function b(){this.constructor=l}l.prototype=T===null?Object.create(T):(b.prototype=T.prototype,new b)}}();Object.defineProperty(i,"__esModule",{value:!0}),i.getTheme=i.defaultStyles=i.HtmlRowInput=void 0;var g=function(P){F(l,P);function l(T){var b=P.call(this)||this;return b._element=T,b}return l}(Array);i.HtmlRowInput=g;function N(P){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/P,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}i.defaultStyles=N;function C(P){var l={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return l[P]}i.getTheme=C},903:function(L,i,F){Object.defineProperty(i,"__esModule",{value:!0}),i.parseCss=void 0;var g=F(420);function N(b,m,d,n,r){var p={},t=1.3333333333333333,e=P(m,function(S){return r.getComputedStyle(S).backgroundColor});e!=null&&(p.fillColor=e);var s=P(m,function(S){return r.getComputedStyle(S).color});s!=null&&(p.textColor=s);var o=T(n,d);o&&(p.cellPadding=o);var a="borderTopColor",f=t*d,c=n.borderTopWidth;if(n.borderBottomWidth===c&&n.borderRightWidth===c&&n.borderLeftWidth===c){var A=(parseFloat(c)||0)/f;A&&(p.lineWidth=A)}else p.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},p.lineWidth.top||(p.lineWidth.right?a="borderRightColor":p.lineWidth.bottom?a="borderBottomColor":p.lineWidth.left&&(a="borderLeftColor"));console.log(p.lineWidth);var x=P(m,function(S){return r.getComputedStyle(S)[a]});x!=null&&(p.lineColor=x);var j=["left","right","center","justify"];j.indexOf(n.textAlign)!==-1&&(p.halign=n.textAlign),j=["middle","bottom","top"],j.indexOf(n.verticalAlign)!==-1&&(p.valign=n.verticalAlign);var v=parseInt(n.fontSize||"");isNaN(v)||(p.fontSize=v/t);var u=C(n);u&&(p.fontStyle=u);var w=(n.fontFamily||"").toLowerCase();return b.indexOf(w)!==-1&&(p.font=w),p}i.parseCss=N;function C(b){var m="";return(b.fontWeight==="bold"||b.fontWeight==="bolder"||parseInt(b.fontWeight)>=700)&&(m="bold"),(b.fontStyle==="italic"||b.fontStyle==="oblique")&&(m+="italic"),m}function P(b,m){var d=l(b,m);if(!d)return null;var n=d.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var r=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],p=parseInt(n[4]);return p===0||isNaN(r[0])||isNaN(r[1])||isNaN(r[2])?null:r}function l(b,m){var d=m(b);return d==="rgba(0, 0, 0, 0)"||d==="transparent"||d==="initial"||d==="inherit"?b.parentElement==null?null:l(b.parentElement,m):d}function T(b,m){var d=[b.paddingTop,b.paddingRight,b.paddingBottom,b.paddingLeft],n=96/(72/m),r=(parseInt(b.lineHeight)-parseInt(b.fontSize))/m/2,p=d.map(function(e){return parseInt(e||"0")/n}),t=(0,g.parseSpacing)(p,0);return r>t.top&&(t.top=r),r>t.bottom&&(t.bottom=r),t}},744:function(L,i){Object.defineProperty(i,"__esModule",{value:!0}),i.DocHandler=void 0;var F={},g=function(){function N(C){this.jsPDFDocument=C,this.userStyles={textColor:C.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:C.internal.getFontSize(),fontStyle:C.internal.getFont().fontStyle,font:C.internal.getFont().fontName,lineWidth:C.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:C.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return N.setDefaults=function(C,P){P===void 0&&(P=null),P?P.__autoTableDocumentDefaults=C:F=C},N.unifyColor=function(C){return Array.isArray(C)?C:typeof C=="number"?[C,C,C]:typeof C=="string"?[C]:null},N.prototype.applyStyles=function(C,P){var l,T,b;P===void 0&&(P=!1),C.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(C.fontStyle);var m=this.jsPDFDocument.internal.getFont(),d=m.fontStyle,n=m.fontName;if(C.font&&(n=C.font),C.fontStyle){d=C.fontStyle;var r=this.getFontList()[n];r&&r.indexOf(d)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(r[0]),d=r[0])}if(this.jsPDFDocument.setFont(n,d),C.fontSize&&this.jsPDFDocument.setFontSize(C.fontSize),!P){var p=N.unifyColor(C.fillColor);p&&(l=this.jsPDFDocument).setFillColor.apply(l,p),p=N.unifyColor(C.textColor),p&&(T=this.jsPDFDocument).setTextColor.apply(T,p),p=N.unifyColor(C.lineColor),p&&(b=this.jsPDFDocument).setDrawColor.apply(b,p),typeof C.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(C.lineWidth)}},N.prototype.splitTextToSize=function(C,P,l){return this.jsPDFDocument.splitTextToSize(C,P,l)},N.prototype.rect=function(C,P,l,T,b){return this.jsPDFDocument.rect(C,P,l,T,b)},N.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},N.prototype.getTextWidth=function(C){return this.jsPDFDocument.getTextWidth(C)},N.prototype.getDocument=function(){return this.jsPDFDocument},N.prototype.setPage=function(C){this.jsPDFDocument.setPage(C)},N.prototype.addPage=function(){return this.jsPDFDocument.addPage()},N.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},N.prototype.getGlobalOptions=function(){return F||{}},N.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},N.prototype.pageSize=function(){var C=this.jsPDFDocument.internal.pageSize;return C.width==null&&(C={width:C.getWidth(),height:C.getHeight()}),C},N.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},N.prototype.getLineHeightFactor=function(){var C=this.jsPDFDocument;return C.getLineHeightFactor?C.getLineHeightFactor():1.15},N.prototype.getLineHeight=function(C){return C/this.scaleFactor()*this.getLineHeightFactor()},N.prototype.pageNumber=function(){var C=this.jsPDFDocument.internal.getCurrentPageInfo();return C?C.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},N}();i.DocHandler=g},4:function(L,i,F){Object.defineProperty(i,"__esModule",{value:!0}),i.parseHtml=void 0;var g=F(903),N=F(796);function C(T,b,m,d,n){var r,p;d===void 0&&(d=!1),n===void 0&&(n=!1);var t;typeof b=="string"?t=m.document.querySelector(b):t=b;var e=Object.keys(T.getFontList()),s=T.scaleFactor(),o=[],a=[],f=[];if(!t)return console.error("Html table could not be found with input: ",b),{head:o,body:a,foot:f};for(var c=0;c<t.rows.length;c++){var A=t.rows[c],x=(p=(r=A==null?void 0:A.parentElement)===null||r===void 0?void 0:r.tagName)===null||p===void 0?void 0:p.toLowerCase(),j=P(e,s,m,A,d,n);!j||(x==="thead"?o.push(j):x==="tfoot"?f.push(j):a.push(j))}return{head:o,body:a,foot:f}}i.parseHtml=C;function P(T,b,m,d,n,r){for(var p=new N.HtmlRowInput(d),t=0;t<d.cells.length;t++){var e=d.cells[t],s=m.getComputedStyle(e);if(n||s.display!=="none"){var o=void 0;r&&(o=(0,g.parseCss)(T,e,b,s,m)),p.push({rowSpan:e.rowSpan,colSpan:e.colSpan,styles:o,_element:e,content:l(e)})}}var a=m.getComputedStyle(d);if(p.length>0&&(n||a.display!=="none"))return p}function l(T){var b=T.cloneNode(!0);return b.innerHTML=b.innerHTML.replace(/\n/g,"").replace(/ +/g," "),b.innerHTML=b.innerHTML.split(/<br.*?>/).map(function(m){return m.trim()}).join(`
`),b.innerText||b.textContent||""}},776:function(L,i,F){Object.defineProperty(i,"__esModule",{value:!0}),i.parseInput=void 0;var g=F(4),N=F(356),C=F(420),P=F(744),l=F(792);function T(t,e){var s=new P.DocHandler(t),o=s.getDocumentOptions(),a=s.getGlobalOptions();(0,l.default)(s,a,o,e);var f=(0,N.assign)({},a,o,e),c;typeof window!="undefined"&&(c=window);var A=b(a,o,e),x=m(a,o,e),j=d(s,f),v=r(s,f,c);return{id:e.tableId,content:v,hooks:x,styles:A,settings:j}}i.parseInput=T;function b(t,e,s){for(var o={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(x){if(x==="columnStyles"){var j=t[x],v=e[x],u=s[x];o.columnStyles=(0,N.assign)({},j,v,u)}else{var w=[t,e,s],S=w.map(function(H){return H[x]||{}});o[x]=(0,N.assign)({},S[0],S[1],S[2])}},f=0,c=Object.keys(o);f<c.length;f++){var A=c[f];a(A)}return o}function m(t,e,s){for(var o=[t,e,s],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},f=0,c=o;f<c.length;f++){var A=c[f];A.didParseCell&&a.didParseCell.push(A.didParseCell),A.willDrawCell&&a.willDrawCell.push(A.willDrawCell),A.didDrawCell&&a.didDrawCell.push(A.didDrawCell),A.willDrawPage&&a.willDrawPage.push(A.willDrawPage),A.didDrawPage&&a.didDrawPage.push(A.didDrawPage)}return a}function d(t,e){var s,o,a,f,c,A,x,j,v,u,w,S,H=(0,C.parseSpacing)(e.margin,40/t.scaleFactor()),_=(s=n(t,e.startY))!==null&&s!==void 0?s:H.top,R;e.showFoot===!0?R="everyPage":e.showFoot===!1?R="never":R=(o=e.showFoot)!==null&&o!==void 0?o:"everyPage";var k;e.showHead===!0?k="everyPage":e.showHead===!1?k="never":k=(a=e.showHead)!==null&&a!==void 0?a:"everyPage";var Q=(f=e.useCss)!==null&&f!==void 0?f:!1,q=e.theme||(Q?"plain":"striped"),M=!!e.horizontalPageBreak,ae=(c=e.horizontalPageBreakRepeat)!==null&&c!==void 0?c:null;return{includeHiddenHtml:(A=e.includeHiddenHtml)!==null&&A!==void 0?A:!1,useCss:Q,theme:q,startY:_,margin:H,pageBreak:(x=e.pageBreak)!==null&&x!==void 0?x:"auto",rowPageBreak:(j=e.rowPageBreak)!==null&&j!==void 0?j:"auto",tableWidth:(v=e.tableWidth)!==null&&v!==void 0?v:"auto",showHead:k,showFoot:R,tableLineWidth:(u=e.tableLineWidth)!==null&&u!==void 0?u:0,tableLineColor:(w=e.tableLineColor)!==null&&w!==void 0?w:200,horizontalPageBreak:M,horizontalPageBreakRepeat:ae,horizontalPageBreakBehaviour:(S=e.horizontalPageBreakBehaviour)!==null&&S!==void 0?S:"afterAllRows"}}function n(t,e){var s=t.getLastAutoTable(),o=t.scaleFactor(),a=t.pageNumber(),f=!1;if(s&&s.startPageNumber){var c=s.startPageNumber+s.pageNumber-1;f=c===a}return typeof e=="number"?e:(e==null||e===!1)&&f&&(s==null?void 0:s.finalY)!=null?s.finalY+20/o:null}function r(t,e,s){var o=e.head||[],a=e.body||[],f=e.foot||[];if(e.html){var c=e.includeHiddenHtml;if(s){var A=(0,g.parseHtml)(t,e.html,s,c,e.useCss)||{};o=A.head||o,a=A.body||o,f=A.foot||o}else console.error("Cannot parse html in non browser environment")}var x=e.columns||p(o,a,f);return{columns:x,head:o,body:a,foot:f}}function p(t,e,s){var o=t[0]||e[0]||s[0]||[],a=[];return Object.keys(o).filter(function(f){return f!=="_element"}).forEach(function(f){var c=1,A;Array.isArray(o)?A=o[parseInt(f)]:A=o[f],typeof A=="object"&&!Array.isArray(A)&&(c=(A==null?void 0:A.colSpan)||1);for(var x=0;x<c;x++){var j=void 0;Array.isArray(o)?j=a.length:j=f+(x>0?"_".concat(x):"");var v={dataKey:j};a.push(v)}}),a}},792:function(L,i){Object.defineProperty(i,"__esModule",{value:!0});function F(N,C,P,l){for(var T=function(n){n&&typeof n!="object"&&console.error("The options parameter should be of type object, is: "+typeof n),typeof n.extendWidth!="undefined"&&(n.tableWidth=n.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof n.margins!="undefined"&&(typeof n.margin=="undefined"&&(n.margin=n.margins),console.error("Use of deprecated option: margins, use margin instead.")),n.startY&&typeof n.startY!="number"&&(console.error("Invalid value for startY option",n.startY),delete n.startY),!n.didDrawPage&&(n.afterPageContent||n.beforePageContent||n.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),n.didDrawPage=function(f){N.applyStyles(N.userStyles),n.beforePageContent&&n.beforePageContent(f),N.applyStyles(N.userStyles),n.afterPageContent&&n.afterPageContent(f),N.applyStyles(N.userStyles),n.afterPageAdd&&f.pageNumber>1&&f.afterPageAdd(f),N.applyStyles(N.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(f){n[f]&&console.error('The "'.concat(f,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(f){var c=f[0],A=f[1];n[A]&&(console.error("Use of deprecated option ".concat(A,". Use ").concat(c," instead")),n[c]=n[A])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(f){var c=typeof f=="string"?f:f[0],A=typeof f=="string"?f:f[1];typeof n[c]!="undefined"&&(typeof n.styles[A]=="undefined"&&(n.styles[A]=n[c]),console.error("Use of deprecated option: "+c+", use the style "+A+" instead."))});for(var r=0,p=["styles","bodyStyles","headStyles","footStyles"];r<p.length;r++){var t=p[r];g(n[t]||{})}for(var e=n.columnStyles||{},s=0,o=Object.keys(e);s<o.length;s++){var a=o[s];g(e[a]||{})}},b=0,m=[C,P,l];b<m.length;b++){var d=m[b];T(d)}}i.default=F;function g(N){N.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),N.minCellHeight||(N.minCellHeight=N.rowHeight)):N.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),N.cellWidth||(N.cellWidth=N.columnWidth))}},260:function(L,i,F){Object.defineProperty(i,"__esModule",{value:!0}),i.Column=i.Cell=i.Row=i.Table=void 0;var g=F(796),N=F(172),C=F(420),P=function(){function m(d,n){this.pageNumber=1,this.pageCount=1,this.id=d.id,this.settings=d.settings,this.styles=d.styles,this.hooks=d.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return m.prototype.getHeadHeight=function(d){return this.head.reduce(function(n,r){return n+r.getMaxCellHeight(d)},0)},m.prototype.getFootHeight=function(d){return this.foot.reduce(function(n,r){return n+r.getMaxCellHeight(d)},0)},m.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},m.prototype.callCellHooks=function(d,n,r,p,t,e){for(var s=0,o=n;s<o.length;s++){var a=o[s],f=new N.CellHookData(d,this,r,p,t,e),c=a(f)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],c)return!1}return!0},m.prototype.callEndPageHooks=function(d,n){d.applyStyles(d.userStyles);for(var r=0,p=this.hooks.didDrawPage;r<p.length;r++){var t=p[r];t(new N.HookData(d,this,n))}},m.prototype.callWillDrawPageHooks=function(d,n){for(var r=0,p=this.hooks.willDrawPage;r<p.length;r++){var t=p[r];t(new N.HookData(d,this,n))}},m.prototype.getWidth=function(d){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(p,t){return p+t.wrappedWidth},0);return n}else{var r=this.settings.margin;return d-r.left-r.right}},m}();i.Table=P;var l=function(){function m(d,n,r,p,t){t===void 0&&(t=!1),this.height=0,this.raw=d,d instanceof g.HtmlRowInput&&(this.raw=d._element,this.element=d._element),this.index=n,this.section=r,this.cells=p,this.spansMultiplePages=t}return m.prototype.getMaxCellHeight=function(d){var n=this;return d.reduce(function(r,p){var t;return Math.max(r,((t=n.cells[p.index])===null||t===void 0?void 0:t.height)||0)},0)},m.prototype.hasRowSpan=function(d){var n=this;return d.filter(function(r){var p=n.cells[r.index];return p?p.rowSpan>1:!1}).length>0},m.prototype.canEntireRowFit=function(d,n){return this.getMaxCellHeight(n)<=d},m.prototype.getMinimumRowHeight=function(d,n){var r=this;return d.reduce(function(p,t){var e=r.cells[t.index];if(!e)return 0;var s=n.getLineHeight(e.styles.fontSize),o=e.padding("vertical"),a=o+s;return a>p?a:p},0)},m}();i.Row=l;var T=function(){function m(d,n,r){var p,t;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=r,this.raw=d;var e=d;d!=null&&typeof d=="object"&&!Array.isArray(d)?(this.rowSpan=d.rowSpan||1,this.colSpan=d.colSpan||1,e=(t=(p=d.content)!==null&&p!==void 0?p:d.title)!==null&&t!==void 0?t:d,d._element&&(this.raw=d._element)):(this.rowSpan=1,this.colSpan=1);var s=e!=null?""+e:"",o=/\r\n|\r|\n/g;this.text=s.split(o)}return m.prototype.getTextPos=function(){var d;if(this.styles.valign==="top")d=this.y+this.padding("top");else if(this.styles.valign==="bottom")d=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");d=this.y+n/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var p=this.width-this.padding("horizontal");r=this.x+p/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:d}},m.prototype.getContentHeight=function(d,n){n===void 0&&(n=1.15);var r=Array.isArray(this.text)?this.text.length:1,p=this.styles.fontSize/d*n,t=r*p+this.padding("vertical");return Math.max(t,this.styles.minCellHeight)},m.prototype.padding=function(d){var n=(0,C.parseSpacing)(this.styles.cellPadding,0);return d==="vertical"?n.top+n.bottom:d==="horizontal"?n.left+n.right:n[d]},m}();i.Cell=T;var b=function(){function m(d,n,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=d,this.raw=n,this.index=r}return m.prototype.getMaxCustomCellWidth=function(d){for(var n=0,r=0,p=d.allRows();r<p.length;r++){var t=p[r],e=t.cells[this.index];e&&typeof e.styles.cellWidth=="number"&&(n=Math.max(n,e.styles.cellWidth))}return n},m}();i.Column=b},356:function(L,i){Object.defineProperty(i,"__esModule",{value:!0}),i.assign=void 0;function F(g,N,C,P,l){if(g==null)throw new TypeError("Cannot convert undefined or null to object");for(var T=Object(g),b=1;b<arguments.length;b++){var m=arguments[b];if(m!=null)for(var d in m)Object.prototype.hasOwnProperty.call(m,d)&&(T[d]=m[d])}return T}i.assign=F},972:function(L,i,F){Object.defineProperty(i,"__esModule",{value:!0}),i.createTable=void 0;var g=F(744),N=F(260),C=F(324),P=F(796),l=F(356);function T(t,e){var s=new g.DocHandler(t),o=b(e,s.scaleFactor()),a=new N.Table(e,o);return(0,C.calculateWidths)(s,a),s.applyStyles(s.userStyles),a}i.createTable=T;function b(t,e){var s=t.content,o=r(s.columns);if(s.head.length===0){var a=d(o,"head");a&&s.head.push(a)}if(s.foot.length===0){var a=d(o,"foot");a&&s.foot.push(a)}var f=t.settings.theme,c=t.styles;return{columns:o,head:m("head",s.head,o,c,f,e),body:m("body",s.body,o,c,f,e),foot:m("foot",s.foot,o,c,f,e)}}function m(t,e,s,o,a,f){var c={},A=e.map(function(x,j){for(var v=0,u={},w=0,S=0,H=0,_=s;H<_.length;H++){var R=_[H];if(c[R.index]==null||c[R.index].left===0)if(S===0){var k=void 0;Array.isArray(x)?k=x[R.index-w-v]:k=x[R.dataKey];var Q={};typeof k=="object"&&!Array.isArray(k)&&(Q=(k==null?void 0:k.styles)||{});var q=p(t,R,j,a,o,f,Q),M=new N.Cell(k,q,t);u[R.dataKey]=M,u[R.index]=M,S=M.colSpan-1,c[R.index]={left:M.rowSpan-1,times:S}}else S--,w++;else c[R.index].left--,S=c[R.index].times,v++}return new N.Row(x,j,t,u)});return A}function d(t,e){var s={};return t.forEach(function(o){if(o.raw!=null){var a=n(e,o.raw);a!=null&&(s[o.dataKey]=a)}}),Object.keys(s).length>0?s:null}function n(t,e){if(t==="head"){if(typeof e=="object")return e.header||e.title||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function r(t){return t.map(function(e,s){var o,a,f;return typeof e=="object"?f=(a=(o=e.dataKey)!==null&&o!==void 0?o:e.key)!==null&&a!==void 0?a:s:f=s,new N.Column(f,e,s)})}function p(t,e,s,o,a,f,c){var A=(0,P.getTheme)(o),x;t==="head"?x=a.headStyles:t==="body"?x=a.bodyStyles:t==="foot"&&(x=a.footStyles);var j=(0,l.assign)({},A.table,A[t],a.styles,x),v=a.columnStyles[e.dataKey]||a.columnStyles[e.index]||{},u=t==="body"?v:{},w=t==="body"&&s%2===0?(0,l.assign)({},A.alternateRow,a.alternateRowStyles):{},S=(0,P.defaultStyles)(f),H=(0,l.assign)({},S,j,w,u);return(0,l.assign)(H,c)}},664:function(L,i,F){Object.defineProperty(i,"__esModule",{value:!0}),i.addPage=i.drawTable=void 0;var g=F(420),N=F(260),C=F(744),P=F(356),l=F(136),T=F(224);function b(v,u){var w=u.settings,S=w.startY,H=w.margin,_={x:H.left,y:S},R=u.getHeadHeight(u.columns)+u.getFootHeight(u.columns),k=S+H.bottom+R;if(w.pageBreak==="avoid"){var Q=u.body,q=Q.reduce(function(I,ge){return I+ge.height},0);k+=q}var M=new C.DocHandler(v);(w.pageBreak==="always"||w.startY!=null&&k>M.pageSize().height)&&(j(M),_.y=H.top),u.callWillDrawPageHooks(M,_);var ae=(0,P.assign)({},_);u.startPageNumber=M.pageNumber(),w.horizontalPageBreak?m(M,u,ae,_):(M.applyStyles(M.userStyles),(w.showHead==="firstPage"||w.showHead==="everyPage")&&u.head.forEach(function(I){return a(M,u,I,_,u.columns)}),M.applyStyles(M.userStyles),u.body.forEach(function(I,ge){var de=ge===u.body.length-1;o(M,u,I,de,ae,_,u.columns)}),M.applyStyles(M.userStyles),(w.showFoot==="lastPage"||w.showFoot==="everyPage")&&u.foot.forEach(function(I){return a(M,u,I,_,u.columns)})),(0,g.addTableBorder)(M,u,ae,_),u.callEndPageHooks(M,_),u.finalY=_.y,v.lastAutoTable=u,v.previousAutoTable=u,v.autoTable&&(v.autoTable.previous=u),M.applyStyles(M.userStyles)}i.drawTable=b;function m(v,u,w,S){var H=(0,T.calculateAllColumnsCanFitInPage)(v,u),_=u.settings;if(_.horizontalPageBreakBehaviour==="afterAllRows")H.forEach(function(q,M){v.applyStyles(v.userStyles),M>0?x(v,u,w,S,q.columns,!0):d(v,u,S,q.columns),n(v,u,w,S,q.columns),p(v,u,S,q.columns)});else for(var R=-1,k=H[0],Q=function(){var q=R;if(k){v.applyStyles(v.userStyles);var M=k.columns;R>=0?x(v,u,w,S,M,!0):d(v,u,S,M),q=r(v,u,R+1,S,M),p(v,u,S,M)}var ae=q-R;H.slice(1).forEach(function(I){v.applyStyles(v.userStyles),x(v,u,w,S,I.columns,!0),r(v,u,R+1,S,I.columns,ae),p(v,u,S,I.columns)}),R=q};R<u.body.length-1;)Q()}function d(v,u,w,S){var H=u.settings;v.applyStyles(v.userStyles),(H.showHead==="firstPage"||H.showHead==="everyPage")&&u.head.forEach(function(_){return a(v,u,_,w,S)})}function n(v,u,w,S,H){v.applyStyles(v.userStyles),u.body.forEach(function(_,R){var k=R===u.body.length-1;o(v,u,_,k,w,S,H)})}function r(v,u,w,S,H,_){v.applyStyles(v.userStyles),_=_!=null?_:u.body.length;var R=Math.min(w+_,u.body.length),k=-1;return u.body.slice(w,R).forEach(function(Q,q){var M=w+q===u.body.length-1,ae=A(v,u,M,S);Q.canEntireRowFit(ae,H)&&(a(v,u,Q,S,H),k=w+q)}),k}function p(v,u,w,S){var H=u.settings;v.applyStyles(v.userStyles),(H.showFoot==="lastPage"||H.showFoot==="everyPage")&&u.foot.forEach(function(_){return a(v,u,_,w,S)})}function t(v,u,w){var S=w.getLineHeight(v.styles.fontSize),H=v.padding("vertical"),_=Math.floor((u-H)/S);return Math.max(0,_)}function e(v,u,w,S){var H={};v.spansMultiplePages=!0,v.height=0;for(var _=0,R=0,k=w.columns;R<k.length;R++){var Q=k[R],q=v.cells[Q.index];if(!!q){Array.isArray(q.text)||(q.text=[q.text]);var M=new N.Cell(q.raw,q.styles,q.section);M=(0,P.assign)(M,q),M.text=[];var ae=t(q,u,S);q.text.length>ae&&(M.text=q.text.splice(ae,q.text.length));var I=S.scaleFactor(),ge=S.getLineHeightFactor();q.contentHeight=q.getContentHeight(I,ge),q.contentHeight>=u&&(q.contentHeight=u,M.styles.minCellHeight-=u),q.contentHeight>v.height&&(v.height=q.contentHeight),M.contentHeight=M.getContentHeight(I,ge),M.contentHeight>_&&(_=M.contentHeight),H[Q.index]=M}}var de=new N.Row(v.raw,-1,v.section,H,!0);de.height=_;for(var z=0,De=w.columns;z<De.length;z++){var Q=De[z],M=de.cells[Q.index];M&&(M.height=de.height);var q=v.cells[Q.index];q&&(q.height=v.height)}return de}function s(v,u,w,S){var H=v.pageSize().height,_=S.settings.margin,R=_.top+_.bottom,k=H-R;u.section==="body"&&(k-=S.getHeadHeight(S.columns)+S.getFootHeight(S.columns));var Q=u.getMinimumRowHeight(S.columns,v),q=Q<w;if(Q>k)return console.error("Will not be able to print row ".concat(u.index," correctly since it's minimum height is larger than page height")),!0;if(!q)return!1;var M=u.hasRowSpan(S.columns),ae=u.getMaxCellHeight(S.columns)>k;return ae?(M&&console.error("The content of row ".concat(u.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(M||S.settings.rowPageBreak==="avoid")}function o(v,u,w,S,H,_,R){var k=A(v,u,S,_);if(w.canEntireRowFit(k,R))a(v,u,w,_,R);else if(s(v,w,k,u)){var Q=e(w,k,u,v);a(v,u,w,_,R),x(v,u,H,_,R),o(v,u,Q,S,H,_,R)}else x(v,u,H,_,R),o(v,u,w,S,H,_,R)}function a(v,u,w,S,H){S.x=u.settings.margin.left;for(var _=0,R=H;_<R.length;_++){var k=R[_],Q=w.cells[k.index];if(!Q){S.x+=k.width;continue}v.applyStyles(Q.styles),Q.x=S.x,Q.y=S.y;var q=u.callCellHooks(v,u.hooks.willDrawCell,Q,w,k,S);if(q===!1){S.x+=k.width;continue}f(v,Q,S);var M=Q.getTextPos();(0,l.default)(Q.text,M.x,M.y,{halign:Q.styles.halign,valign:Q.styles.valign,maxWidth:Math.ceil(Q.width-Q.padding("left")-Q.padding("right"))},v.getDocument()),u.callCellHooks(v,u.hooks.didDrawCell,Q,w,k,S),S.x+=k.width}S.y+=w.height}function f(v,u,w){var S=u.styles;if(v.getDocument().setFillColor(v.getDocument().getFillColor()),typeof S.lineWidth=="number"){var H=(0,g.getFillStyle)(S.lineWidth,S.fillColor);H&&v.rect(u.x,w.y,u.width,u.height,H)}else typeof S.lineWidth=="object"&&(S.fillColor&&v.rect(u.x,w.y,u.width,u.height,"F"),c(v,u,w,S.lineWidth))}function c(v,u,w,S){var H,_,R,k;S.top&&(H=w.x,_=w.y,R=w.x+u.width,k=w.y,S.right&&(R+=.5*S.right),S.left&&(H-=.5*S.left),Q(S.top,H,_,R,k)),S.bottom&&(H=w.x,_=w.y+u.height,R=w.x+u.width,k=w.y+u.height,S.right&&(R+=.5*S.right),S.left&&(H-=.5*S.left),Q(S.bottom,H,_,R,k)),S.left&&(H=w.x,_=w.y,R=w.x,k=w.y+u.height,S.top&&(_-=.5*S.top),S.bottom&&(k+=.5*S.bottom),Q(S.left,H,_,R,k)),S.right&&(H=w.x+u.width,_=w.y,R=w.x+u.width,k=w.y+u.height,S.top&&(_-=.5*S.top),S.bottom&&(k+=.5*S.bottom),Q(S.right,H,_,R,k));function Q(q,M,ae,I,ge){v.getDocument().setLineWidth(q),v.getDocument().line(M,ae,I,ge,"S")}}function A(v,u,w,S){var H=u.settings.margin.bottom,_=u.settings.showFoot;return(_==="everyPage"||_==="lastPage"&&w)&&(H+=u.getFootHeight(u.columns)),v.pageSize().height-S.y-H}function x(v,u,w,S,H,_){H===void 0&&(H=[]),_===void 0&&(_=!1),v.applyStyles(v.userStyles),u.settings.showFoot==="everyPage"&&!_&&u.foot.forEach(function(k){return a(v,u,k,S,H)}),u.callEndPageHooks(v,S);var R=u.settings.margin;(0,g.addTableBorder)(v,u,w,S),j(v),u.pageNumber++,u.pageCount++,S.x=R.left,S.y=R.top,w.y=R.top,u.callWillDrawPageHooks(v,S),u.settings.showHead==="everyPage"&&(u.head.forEach(function(k){return a(v,u,k,S,H)}),v.applyStyles(v.userStyles))}i.addPage=x;function j(v){var u=v.pageNumber();v.setPage(u+1);var w=v.pageNumber();return w===u?(v.addPage(),!0):!1}},224:function(L,i,F){Object.defineProperty(i,"__esModule",{value:!0}),i.calculateAllColumnsCanFitInPage=void 0;var g=F(420);function N(P,l,T){var b;T===void 0&&(T={});var m=(0,g.getPageAvailableWidth)(P,l),d=new Map,n=[],r=[],p=[];l.settings.horizontalPageBreakRepeat,Array.isArray(l.settings.horizontalPageBreakRepeat)?p=l.settings.horizontalPageBreakRepeat:(typeof l.settings.horizontalPageBreakRepeat=="string"||typeof l.settings.horizontalPageBreakRepeat=="number")&&(p=[l.settings.horizontalPageBreakRepeat]),p.forEach(function(o){var a=l.columns.find(function(f){return f.dataKey===o||f.index===o});a&&!d.has(a.index)&&(d.set(a.index,!0),n.push(a.index),r.push(l.columns[a.index]),m-=a.wrappedWidth)});for(var t=!0,e=(b=T==null?void 0:T.start)!==null&&b!==void 0?b:0;e<l.columns.length;){if(d.has(e)){e++;continue}var s=l.columns[e].wrappedWidth;if(t||m>=s)t=!1,n.push(e),r.push(l.columns[e]),m-=s;else break;e++}return{colIndexes:n,columns:r,lastIndex:e-1}}function C(P,l){for(var T=[],b=0;b<l.columns.length;b++){var m=N(P,l,{start:b});m.columns.length&&(T.push(m),b=m.lastIndex)}return T}i.calculateAllColumnsCanFitInPage=C},324:function(L,i,F){Object.defineProperty(i,"__esModule",{value:!0}),i.ellipsize=i.resizeColumns=i.calculateWidths=void 0;var g=F(420);function N(n,r){C(n,r);var p=[],t=0;r.columns.forEach(function(s){var o=s.getMaxCustomCellWidth(r);o?s.width=o:(s.width=s.wrappedWidth,p.push(s)),t+=s.width});var e=r.getWidth(n.pageSize().width)-t;e&&(e=P(p,e,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),e&&(e=P(p,e,function(s){return s.minWidth})),e=Math.abs(e),!r.settings.horizontalPageBreak&&e>.1/n.scaleFactor()&&(e=e<1?e:Math.round(e),console.warn("Of the table content, ".concat(e," units width could not fit page"))),T(r),b(r,n),l(r)}i.calculateWidths=N;function C(n,r){var p=n.scaleFactor(),t=r.settings.horizontalPageBreak,e=(0,g.getPageAvailableWidth)(n,r);r.allRows().forEach(function(s){for(var o=0,a=r.columns;o<a.length;o++){var f=a[o],c=s.cells[f.index];if(!!c){var A=r.hooks.didParseCell;r.callCellHooks(n,A,c,s,f,null);var x=c.padding("horizontal");c.contentWidth=(0,g.getStringWidth)(c.text,c.styles,n)+x;var j=(0,g.getStringWidth)(c.text.join(" ").split(/\s+/),c.styles,n);if(c.minReadableWidth=j+c.padding("horizontal"),typeof c.styles.cellWidth=="number")c.minWidth=c.styles.cellWidth,c.wrappedWidth=c.styles.cellWidth;else if(c.styles.cellWidth==="wrap"||t===!0)c.contentWidth>e?(c.minWidth=e,c.wrappedWidth=e):(c.minWidth=c.contentWidth,c.wrappedWidth=c.contentWidth);else{var v=10/p;c.minWidth=c.styles.minCellWidth||v,c.wrappedWidth=c.contentWidth,c.minWidth>c.wrappedWidth&&(c.wrappedWidth=c.minWidth)}}}}),r.allRows().forEach(function(s){for(var o=0,a=r.columns;o<a.length;o++){var f=a[o],c=s.cells[f.index];if(c&&c.colSpan===1)f.wrappedWidth=Math.max(f.wrappedWidth,c.wrappedWidth),f.minWidth=Math.max(f.minWidth,c.minWidth),f.minReadableWidth=Math.max(f.minReadableWidth,c.minReadableWidth);else{var A=r.styles.columnStyles[f.dataKey]||r.styles.columnStyles[f.index]||{},x=A.cellWidth||A.minCellWidth;x&&typeof x=="number"&&(f.minWidth=x,f.wrappedWidth=x)}c&&(c.colSpan>1&&!f.minWidth&&(f.minWidth=c.minWidth),c.colSpan>1&&!f.wrappedWidth&&(f.wrappedWidth=c.minWidth))}})}function P(n,r,p){for(var t=r,e=n.reduce(function(v,u){return v+u.wrappedWidth},0),s=0;s<n.length;s++){var o=n[s],a=o.wrappedWidth/e,f=t*a,c=o.width+f,A=p(o),x=c<A?A:c;r-=x-o.width,o.width=x}if(r=Math.round(r*1e10)/1e10,r){var j=n.filter(function(v){return r<0?v.width>p(v):!0});j.length&&(r=P(j,r,p))}return r}i.resizeColumns=P;function l(n){for(var r={},p=1,t=n.allRows(),e=0;e<t.length;e++)for(var s=t[e],o=0,a=n.columns;o<a.length;o++){var f=a[o],c=r[f.index];if(p>1)p--,delete s.cells[f.index];else if(c)c.cell.height+=s.height,p=c.cell.colSpan,delete s.cells[f.index],c.left--,c.left<=1&&delete r[f.index];else{var A=s.cells[f.index];if(!A)continue;if(A.height=s.height,A.rowSpan>1){var x=t.length-e,j=A.rowSpan>x?x:A.rowSpan;r[f.index]={cell:A,left:j,row:s}}}}}function T(n){for(var r=n.allRows(),p=0;p<r.length;p++)for(var t=r[p],e=null,s=0,o=0,a=0;a<n.columns.length;a++){var f=n.columns[a];if(o-=1,o>1&&n.columns[a+1])s+=f.width,delete t.cells[f.index];else if(e){var c=e;delete t.cells[f.index],e=null,c.width=f.width+s}else{var c=t.cells[f.index];if(!c)continue;if(o=c.colSpan,s=0,c.colSpan>1){e=c,s+=f.width;continue}c.width=f.width+s}}}function b(n,r){for(var p={count:0,height:0},t=0,e=n.allRows();t<e.length;t++){for(var s=e[t],o=0,a=n.columns;o<a.length;o++){var f=a[o],c=s.cells[f.index];if(!!c){r.applyStyles(c.styles,!0);var A=c.width-c.padding("horizontal");if(c.styles.overflow==="linebreak")c.text=r.splitTextToSize(c.text,A+1/r.scaleFactor(),{fontSize:c.styles.fontSize});else if(c.styles.overflow==="ellipsize")c.text=m(c.text,A,c.styles,r,"...");else if(c.styles.overflow==="hidden")c.text=m(c.text,A,c.styles,r,"");else if(typeof c.styles.overflow=="function"){var x=c.styles.overflow(c.text,A);typeof x=="string"?c.text=[x]:c.text=x}c.contentHeight=c.getContentHeight(r.scaleFactor(),r.getLineHeightFactor());var j=c.contentHeight/c.rowSpan;c.rowSpan>1&&p.count*p.height<j*c.rowSpan?p={height:j,count:c.rowSpan}:p&&p.count>0&&p.height>j&&(j=p.height),j>s.height&&(s.height=j)}}p.count--}}function m(n,r,p,t,e){return n.map(function(s){return d(s,r,p,t,e)})}i.ellipsize=m;function d(n,r,p,t,e){var s=1e4*t.scaleFactor();if(r=Math.ceil(r*s)/s,r>=(0,g.getStringWidth)(n,p,t))return n;for(;r<(0,g.getStringWidth)(n+e,p,t)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+e}},964:function(L){if(typeof ie=="undefined"){var i=new Error("Cannot find module 'undefined'");throw i.code="MODULE_NOT_FOUND",i}L.exports=ie}},J={};function G(L){var i=J[L];if(i!==void 0)return i.exports;var F=J[L]={exports:{}};return re[L].call(F.exports,F,F.exports,G),F.exports}var oe={};return function(){var L=oe;Object.defineProperty(L,"__esModule",{value:!0}),L.Cell=L.Column=L.Row=L.Table=L.CellHookData=L.__drawTable=L.__createTable=L.applyPlugin=void 0;var i=G(340),F=G(776),g=G(664),N=G(972),C=G(260);Object.defineProperty(L,"Table",{enumerable:!0,get:function(){return C.Table}});var P=G(172);Object.defineProperty(L,"CellHookData",{enumerable:!0,get:function(){return P.CellHookData}});var l=G(260);Object.defineProperty(L,"Cell",{enumerable:!0,get:function(){return l.Cell}}),Object.defineProperty(L,"Column",{enumerable:!0,get:function(){return l.Column}}),Object.defineProperty(L,"Row",{enumerable:!0,get:function(){return l.Row}});function T(r){(0,i.default)(r)}L.applyPlugin=T;function b(r,p){var t=(0,F.parseInput)(r,p),e=(0,N.createTable)(r,t);(0,g.drawTable)(r,e)}function m(r,p){var t=(0,F.parseInput)(r,p);return(0,N.createTable)(r,t)}L.__createTable=m;function d(r,p){(0,g.drawTable)(r,p)}L.__drawTable=d;try{var n=G(964);n.jsPDF&&(n=n.jsPDF),T(n)}catch{}L.default=b}(),oe}()})})(mo);const po={data(){return{mostrarDialogo:!1,facturaOtroNombre:!1,loading:!1,nombreFactura:"",liquidacionSeleccionada:null,filterId:"",filterStatus:null,globalFilter:"",statusOptions:[{label:"Aprobado",value:"Aprobado"},{label:"Rechazado",value:"Rechazado"},{label:"Pendiente",value:"Pendiente"}],filter:"",rows:[],columns:[{name:"status",label:"Status",field:"status"},{name:"idLiquidacion",label:"ID Liquidaci\xF3n",field:"idLiquidacion",sortable:!0},{name:"idCotizacion",label:"ID Cotizaci\xF3n",field:"idCotizacion",sortable:!0},{name:"salida",label:"Salida",field:"salida"},{name:"destino",label:"Destino",field:"destino"},{name:"nombrePrograma",label:"Nombre del Programa",field:"nombrePrograma"},{name:"hotel",label:"Hotel",field:"hotel"},{name:"totalPasajeros",label:"Total Pasajeros",field:"totalPasajeros"},{name:"precioBrutoTotal",label:"Precio Bruto Total",field:"precioBrutoTotal"},{name:"totalPrecioCliente",label:"Total Precio Cliente",field:"totalPrecioCliente"},{name:"fechaCreacion",label:"Fecha de Creaci\xF3n",field:y=>new Date(y.fechaCreacion).toLocaleDateString(),sortable:!0},{name:"acciones",label:"Acciones"}]}},computed:{filteredRows(){const y=(this.filterId||"").toLowerCase();return this.rows.filter(Z=>{const ie=Z.idCotizacion.toLowerCase().includes(y),re=this.filterStatus===null||Z.status===this.filterStatus;return ie&&re})},countPendientes(){return this.rows.filter(y=>y.status==="Pendiente").length}},methods:{mostrarDialogoFactura(y){this.liquidacionSeleccionada=y,this.mostrarDialogo=!0},async procesarDescarga(){this.mostrarDialogo=!1;try{await se.put(`https://backmultidestinos.onrender.com/liquidacion/${this.liquidacionSeleccionada.idLiquidacion}`,{facturaPara:this.nombreFactura?this.nombreFactura:null})}catch(y){console.error("Error al actualizar la liquidaci\xF3n:",y),$t.create({message:"Error al actualizar la liquidaci\xF3n.",color:"negative"});return}this.liquidacionSeleccionada.idCotizacion.includes("-C")?this.descargarLiquidacionCano(this.liquidacionSeleccionada.idCotizacion,this.liquidacionSeleccionada.idLiquidacion):this.descargarLiquidacion(this.liquidacionSeleccionada.idCotizacion,this.liquidacionSeleccionada.idLiquidacion),this.nombreFactura=""},chipColor(y){switch(y){case"Aprobado":return"green";case"Rechazado":return"red";case"Pendiente":return"orange";default:return"grey"}},verDetalles(y){this.$router.push({name:"LiquidacionDetalles",params:{idLiquidacion:y.idLiquidacion,liquidacionData:y}})},descargarLiquidacionN(y){y.idCotizacion.includes("-C")?this.descargarLiquidacionCano(y.idCotizacion,y.idLiquidacion):this.descargarLiquidacion(y.idCotizacion,y.idLiquidacion)},async descargarLiquidacion(y,Z){var ie,re;try{let J=function(h,D,O,K=10){return D+O>c-K?(h.addPage(),a.top):D},De=function(h){return h.map(D=>{const O=D.adultos,K=D.ni\u00F1os,ne=`1x${O}`;return K>0?`${ne} CHD`:ne}).join(", ")},me=function(h){for(let D=0;D<=6;D++){const O=a.left+D*te;o.line(O,h,O,h+U)}o.line(a.left,h,f-a.right,h),o.line(a.left,h+U,f-a.right,h+U)};const[G,oe,L,i,F]=await Promise.all([se.get(`https://backmultidestinos.onrender.com/habitacionCotizacion/${y}`),se.get(`https://backmultidestinos.onrender.com/cotizacion/${y}`),se.get(`https://backmultidestinos.onrender.com/ImpuestoCot/${y}`),se.get(`https://backmultidestinos.onrender.com/liquidacion/${Z}`),se.get(`https://backmultidestinos.onrender.com/pasajero/${Z}`)]);if(G.status!==200||oe.status!==200){console.error("Error al obtener datos de habitacionCotizacion o cotizacion");return}const g=oe.data[0],N=L.data[0];console.log("impuesto",N);const C=G.data;console.log("habitacion",C);const P=i.data;console.log("liquidacion",P);const l=P[0].telefono;console.log(l);const T=F.data;console.log("pasajero",T);const b=await se.get(`https://backmultidestinos.onrender.com/cliente/buscar/${g.cliente}`);console.log("clienteResponse",b);const m=b.data[0];console.log("clienteData",m);const d=(ie=m==null?void 0:m.tipoBase)!=null?ie:"Valor por defecto",n=await se.get(`https://backmultidestinos.onrender.com/user/${g.CreadorCotizacion}`),r=n.Data;console.log("vendedor",n.data.nombreCompleto);const p={hotel:g.hotel,nombrePrograma:g.nombrePrograma,destino:g.destino},t=await se.post("https://backmultidestinos.onrender.com/hoteles/buscar",p),e=g.incluye?g.incluye:t.data[0].incluye,s=g.noIncluye?g.noIncluye:t.data[0].noIncluye,o=new Ot,a={top:10,bottom:10,left:10,right:10},f=o.internal.pageSize.width,c=o.internal.pageSize.height,A=40,x={left:10,right:10,top:5,bottom:5},j=await new Promise((h,D)=>{const O=new Image;O.src="https://i.ibb.co/1sFJ7dT/imgAzul.png",O.onload=()=>h(O),O.onerror=D}),v=j.width/j.height,u=f/4-x.left-x.right,w=Math.min(100,u),S=w/v,H=a.top+(A-S)/2,_=`PBX(601)7621133
CALLE 64 No. 11-37 LOC 301
EMAIL: MULTIDESTINOS_EXPRESS@YAHOO.COM`,R=`Numero de cotizaci\xF3n: ${y}`;o.addImage(j,"PNG",a.left+x.left,H,w,S);const k=f-a.left-a.right-w-x.left-x.right-10;o.setFontSize(10),o.text(o.splitTextToSize(_,k),a.left+w+x.left+x.right,a.top+10);const Q=f-a.right-o.getTextWidth(R)-x.right;o.setFontSize(12),o.setFont("Helvetica-Bold",12),o.text(R,Q,a.top+10),o.setDrawColor(0),o.rect(a.left,a.top,f-a.left-a.right,A,"S"),o.setFontSize(10);const q=a.top+A+10;o.setFontSize(10),o.text("SOLICITUD DE RESERVA:",a.left,q-4),o.setFontSize(8);const M=["FECHA SOLICITUD:","AGENCIA:","TEL\xC9FONO:","CONTACTO:","NIT:","VENDEDOR:"],ae=[new Date(new Date(g.fechaCreacion).getTime()+new Date(g.fechaCreacion).getTimezoneOffset()*6e4).toLocaleDateString(),g.cliente.toString(),m!=null&&m.telefono?m.telefono.toString():"N/A","N/A",m!=null&&m.nit?m.nit.toString():"N/A",n.data.nombreCompleto?n.data.nombreCompleto.toString():"N/A"],I=6,ge=(f-a.left-a.right)/I;let de=a.left,z=q;for(let h=0;h<M.length;h++){o.text(M[h],de,z);const D=ae[h]!==void 0?ae[h]:"N/A",O=o.splitTextToSize(D,ge-2);o.text(O,de,z+5),de+=ge,((h+1)%I===0||h===M.length-1)&&(z+=15,de=a.left)}const xt=De(C),ot=["NOCHES:","HOTEL:","PLAN:","DESTINO:","DIRECCION:","ACOMODACI\xD3N:"],$e=[g.noches?g.noches.toString():"N/A",g.hotel?g.hotel.toString():"N/A",g.plan?g.plan.toString():"N/A",g.destino?g.destino.toString():"N/A",g.direccion?g.direccion.toString():"N/A",xt.toString()];console.log("campso2",$e);const ht=6,at=(f-a.left-a.right)/ht;z+=1;for(let h=0;h<ot.length;h++){o.text(ot[h],de,z);const D=$e[h]!==void 0?$e[h]:"N/A",O=o.splitTextToSize(D,at-2);o.text(O,de,z+5),de+=at}z+=1,o.setFontSize(10),o.text("PASAJEROS: ",a.left,z+12),z+=20;const gt=["NOMBRE","DOCUMENTO","F. NACIMIENTO","EDAD","TELEFONO RESERVA"],nt=T.map(h=>{const D=new Date(h.fechaNacimiento),O=new Date;let K=O.getFullYear()-D.getFullYear();const ne=O.getMonth()-D.getMonth();return(ne<0||ne===0&&O.getDate()<D.getDate())&&K--,[h.nombre,h.numeroDocumento,D.toLocaleDateString(),K,P[0].telefono?P[0].telefono.toString():"N/A"]}),it=(f-a.left-a.right)/gt.length,He=f-a.left-a.right,rt=10+8*nt.length;o.rect(a.left,z,He,rt,"S"),o.setFontSize(8),gt.forEach((h,D)=>{o.text(h,a.left+5+D*it,z+5)}),z+=10,nt.forEach((h,D)=>{h.forEach((O,K)=>{o.text(O.toString(),a.left+5+K*it,z+D*8)})}),z+=rt-15,z+=22,o.setFontSize(10),o.text("ITINERARIO: ",a.left,z-10);const mt=["AEROLINEA","VUELO","FECHA","RUTA","CLASE","HR SALIDA","HR LLEGADA","RECORD"],Ne=[[g.aerolineaIda||"N/A",g.vueloIda||"N/A",g.fechaInicio?new Date(new Date(g.fechaInicio).getTime()+new Date(g.fechaInicio).getTimezoneOffset()*6e4).toLocaleDateString():"N/A",g.ruta1||"N/A",g.claseIda||"N/A",g.horaSalidaIda||"N/A",g.horaLlegadaIda||"N/A",g.recordIda||"N/A"]];g.aerolineaEscalaIda!=null&&(Ne.push([g.aerolineaEscalaIda||"N/A",g.vueloEscalaIda||"N/A",g.fechaInicio?new Date(new Date(g.fechaInicio).getTime()+new Date(g.fechaInicio).getTimezoneOffset()*6e4).toLocaleDateString():"N/A","Escala Ida",g.claseEscalaIda||"N/A",g.horaSalidaEscalaIda||"N/A",g.horaLlegadaEscalaIda||"N/A",""]),Ne.push([g.aerolineaEscalaVuelta||"N/A",g.vueloEscalaVuelta||"N/A",g.fechaFin?new Date(new Date(g.fechaFin).getTime()+new Date(g.fechaFin).getTimezoneOffset()*6e4).toLocaleDateString():"N/A","Escala Vuelta",g.claseEscalaVuelta||"N/A",g.horaSalidaEscalaVuelta||"N/A",g.horaLlegadaEscalaVuelta||"N/A",""])),Ne.push([g.aerolineaVuelta||"N/A",g.vueloVuelta||"N/A",g.fechaFin?new Date(new Date(g.fechaFin).getTime()+new Date(g.fechaFin).getTimezoneOffset()*6e4).toLocaleDateString():"N/A",g.ruta2||"N/A",g.claseVuelta||"N/A",g.horaSalidaVuelta||"N/A",g.horaLlegadaVuelta||"N/A",g.recordVuelta||"N/A"]);const ve=(f-a.left-a.right)/mt.length,wt=f-a.left-a.right,Re=12+8*Ne.length;z+=5,o.rect(a.left,z-5,wt,Re,"S"),o.setFontSize(8),mt.forEach((h,D)=>{o.text(h,a.left+D*ve,z)}),z+=5,Ne.forEach((h,D)=>{h.forEach((O,K)=>{o.text(O,a.left+K*ve,z+(D+1)*8)})}),z+=Re-5;let Se;const Ge="Esta cotizaci\xF3n est\xE1 sujeta a cambio y disponibilidad al momento de reservar (Sin servicio confirmado)",Je=z,lt=30;o.setDrawColor(0),o.rect(a.left,Je,f-a.left-a.right,lt),o.setFontSize(12),o.text("OBSERVACIONES:",a.left+2,Je+6),o.setFontSize(10),o.text(Ge,a.left+2,Je+15,{maxWidth:f-a.left-a.right-4}),z=Je+lt;const xe=z+10;o.setFontSize(8);const pt=`El pago de su plan se realizar\xE1 conforme a las siguientes condiciones:

Planes con inicio dentro de los 30 d\xEDas:  El pago total deber\xE1 efectuarse dentro de un d\xEDa h\xE1bil a partir de la fecha de env\xEDo de este documento.
Planes con inicio posterior a los 30 d\xEDas: El pago se realizar\xE1 en dos cuotas:
  * Primera cuota: 50% del valor total del plan, pagadero dentro de un d\xEDa h\xE1bil a partir de la fecha de env\xEDo de este documento.
  * Segunda cuota: 50% restante del valor total del plan, pagadero 30 d\xEDas antes de la fecha de inicio del plan.`,st=o.splitTextToSize(pt,f-a.left-a.right-4);let Ie=18;st.forEach(h=>{Ie+=o.getTextDimensions(h,{fontSize:8}).h}),z=J(o,z,Ie),o.setDrawColor(0),o.rect(a.left,xe,f-a.left-a.right,Ie),o.setFontSize(12),o.text("PLAZO DE PAGO:",a.left+2,xe+6),o.setFontSize(8),Se=xe+15,st.forEach(h=>{o.text(h,a.left+2,Se,{maxWidth:f-a.left-a.right-4}),Se+=o.getTextDimensions(h,{fontSize:8}).h}),z=xe+Ie;let Le=!1;o.setFontSize(8);const We=e.split("\xBF");let Xe=[];We.forEach(h=>{const D=o.splitTextToSize(h,f-a.left-a.right-4);Xe=Xe.concat(D)});let we=18;We.forEach(h=>{const D=o.splitTextToSize(h,f-a.left-a.right-4);for(let O=0;O<D.length;O++){const K=D[O];we+=o.getTextDimensions(K,{fontSize:8}).h,!K.endsWith(`
`)&&O<D.length-1&&(we+=o.getTextDimensions(" ",{fontSize:8}).h)}}),z=J(o,z,we),z===a.top&&(Le=!0);const be=z+10;o.setDrawColor(0),o.rect(a.left,be,f-a.left-a.right,we),o.setFontSize(12),o.text("INCLUYE:",a.left+2,be+6),o.setFontSize(8),Se=be+15,Xe.forEach(h=>{o.text(h,a.left+2,Se,{maxWidth:f-a.left-a.right-4}),Se+=o.getTextDimensions(h,{fontSize:8}).h}),z=be+we;const ke=s.split("\xBF");let ze=[];ke.forEach(h=>{const D=o.splitTextToSize(h,f-a.left-a.right-4);ze=ze.concat(D)});let ee=18;ke.forEach(h=>{const D=o.splitTextToSize(h,f-a.left-a.right-4);for(let O=0;O<D.length;O++){const K=D[O];ee+=o.getTextDimensions(K,{fontSize:8}).h,!K.endsWith(`
`)&&O<D.length-1&&(ee+=o.getTextDimensions(" ",{fontSize:8}).h)}}),z=J(o,z,ee),Le||(z=a.top);const $=z+10;o.setDrawColor(0),o.rect(a.left,$,f-a.left-a.right,ee),o.setFontSize(12),o.text("NO INCLUYE:",a.left+2,$+6),o.setFontSize(8),Se=$+15,ze.forEach(h=>{o.text(h,a.left+2,Se,{maxWidth:f-a.left-a.right-4}),Se+=o.getTextDimensions(h,{fontSize:8}).h}),z=$+ee,o.addPage(),z=a.top,o.setFontSize(10),o.text("LIQUIDACI\xD3N:",a.left,z),z+=5;const dt=z+5,V=2,U=6,te=(f-a.left-a.right)/6;o.setDrawColor(0);let Me=0;o.setFontSize(7);let Ee=0;C.forEach(h=>{const D=dt+Ee*U;me(D);const O=`Valor adul ${h.acomodacion}`;o.text(O,a.left+V,D+U/2,{baseline:"middle"});const K=Math.round(h.precioComisionableAdulto);o.text(K.toString(),a.left+te+V,D+U/2,{baseline:"middle"});const ne=h.adultos;o.text(ne.toString(),a.left+2*te+V,D+U/2,{baseline:"middle"});const fe=Math.round(h.precioComisionableAdulto*h.adultos);if(o.text(fe.toString(),a.left+3*te+V,D+U/2,{baseline:"middle"}),Ee===0){o.setFontSize(6);const pe=d==="Comisi\xF3n"?"BASE COMISI\xD3N":"BASE COMISION";o.text(pe,a.left+4*te+V,D+U/2,{baseline:"middle"}),o.setFontSize(7)}let Ce=fe;if(h.ni\u00F1os>0&&(Ce+=Math.round(h.precioComisionableNino*h.ni\u00F1os)),Me+=Ce,Ee++,h.ni\u00F1os>0){const pe=dt+Ee*U;me(pe);const ue=`Valor child ${h.acomodacion}`;o.text(ue,a.left+V,pe+U/2,{baseline:"middle"});const he=Math.round(h.precioComisionableNino);o.text(he.toString(),a.left+te+V,pe+U/2,{baseline:"middle"});const Dt=h.ni\u00F1os;o.text(Dt.toString(),a.left+2*te+V,pe+U/2,{baseline:"middle"});const qe=Math.round(h.precioComisionableNino*h.ni\u00F1os);o.text(qe.toString(),a.left+3*te+V,pe+U/2,{baseline:"middle"}),Ee++}}),o.text(Me.toString(),a.left+5*te+V,dt+U/2,{baseline:"middle"}),z=dt+Ee*U+10;const Be=["TRANSPORTE NO COMISI","Q","YS","CO","TA","YS TA","TOTAL IMPUESTOS"],Ke=[g.otros,g.combus,g.iva,g.tasa,g.ta,g.ivaTa,g.precioTrans];if(g.suplemento>0&&(Be.push("SUPLEMENTO"),Ke.push(g.suplemento)),g.extra1)if(g.extra1.includes("*")){let h=g.extra1.split("*"),D=h[0],O=h[1];Be.push("Valor Extra","Valor Extra2"),Ke.push(D,O)}else{let h=g.extra1;Be.push("Valor Extra"),Ke.push(h)}Be.forEach((h,D)=>{const O=z+D*U;me(O),o.text(h,a.left+V,O+U/2,{baseline:"middle"});const K=g.totalPasajeros,ne=Ke[D]||0,fe=K!==0?Math.trunc(ne/K):"";o.text(fe.toString(),a.left+te+V,O+U/2,{baseline:"middle"});const Ce=K!==0?Math.trunc(K).toString():"";o.text(Ce,a.left+2*te+V,O+U/2,{baseline:"middle"});const pe=ne!==0?Math.trunc(ne).toString():"";if(o.text(pe,a.left+3*te+V,O+U/2,{baseline:"middle"}),h==="Q"){o.text("COMISION",a.left+4*te+V,O+U/2,{baseline:"middle"});const ue=g.clientePorcentaje||0,he=Math.trunc(ue).toString()+"%";o.text(he,a.left+5*te+V,O+U/2,{baseline:"middle"})}else if(h==="YS"){o.text("Valor Descuento",a.left+4*te+V,O+U/2,{baseline:"middle"});const ue=g.valorDescuento||0,he=Math.trunc(ue).toString();o.text(he,a.left+5*te+V,O+U/2,{baseline:"middle"}),d==="Comisi\xF3n"&&[{label:`IVA(${m.porcentajeIva}%) (-)`,value:g.ivaValor},{label:`RTE FUENTE(${m.rteFuente}%) (+)`,value:g.rteFuente},{label:`RTE ICA(${m.rteIca}%) (+)`,value:g.rteIca},{label:"Total Comisi\xF3n",value:g.totalComision}].forEach((qe,Nt)=>{const Ue=O+(Nt+1)*U;me(Ue),o.text(qe.label,a.left+4*te+V,Ue+U/2,{baseline:"middle"}),o.text(qe.value.toString(),a.left+5*te+V,Ue+U/2,{baseline:"middle"})})}}),z+=Be.length*U,C.forEach(h=>{if(h.adultos>0){const D=z;me(D),o.text(`Valor total Adt ${h.acomodacion}`,a.left+V,D+U/2,{baseline:"middle"});const O=h.precioHabitacionAdulto||0,K=Te(O).format("$0,0");o.text(K,a.left+3*te+V,D+U/2,{baseline:"middle"}),z+=U}if(h.ni\u00F1os>0){const D=z;me(D),o.text(`Valor total Chd ${h.acomodacion}`,a.left+V,D+U/2,{baseline:"middle"});const O=h.precioHabitacionNino||0,K=Te(O).format("$0,0");o.text(K,a.left+3*te+V,D+U/2,{baseline:"middle"}),z+=U}}),o.setFontSize(8),z+=U,me(z),o.text("Valor total",a.left+V,z+U/2,{baseline:"middle"});const Pt=g.precioBrutoTotal||0,vt=Te(Pt).format("$0,0");o.text(vt,a.left+3*te+V,z+U/2,{baseline:"middle"}),o.text("Precio a pagar",a.left+4*te+V,z+U/2-2,{baseline:"middle"}),o.text("a Multidestinos",a.left+4*te+V,z+U/2+2,{baseline:"middle"});const ct=0,St=parseFloat(g.totalPrecioCliente)||0,Tt=ct>0?St+ct:St,je=Te(Tt).format("$0,0");o.text(je,a.left+5*te+V,z+U/2,{baseline:"middle"}),z+=U+10;const ye=a.left;let Fe=z+5;const Ve=190;let Ze=30;o.setFontSize(7),o.setLineWidth(.5),o.setFontSize(6);const Oe=5,et="PARA CONFIRMACIONES SE DEBE ENVIAR DEPOSITO DEL 50% DEL VALOR DEL PLAN Y EL SALDO 30 DIAS ANTES DE LA SALIDA, SI LA FECHA DE VIAJES CERCANA SE DEBE CANCELAR EL 100%. LOS SERVICIOS DEJADOS DE TOMAR NO SON REMBOLSABLES. LA CANCELACI\xD3N CON 18 DIAS ANTES DE VIAJE LA PENALIDAD SERA DEL 100% DEL VALOR DEL PLAN, LOS TIQUETES NO SON REEMBOLSABLE, NI ENDOSABLES, PENALIDAD POR CAMBIO (FECHA, NOMBRE, HORA, RUTAS) 200.000. ESTAS POLITICAS ESTAN PUBLICADAS DE MANERA CLARA Y ESPECIFICA EN NUESTRA PAGINA WWW.MULTIDESTINOSEXPRESS.COM. *TARIFAS SUJETA A CAMBIO Y DISPONIBILIDAD SIN PREVIO AVISO*",ut=o.splitTextToSize(et,Ve-10);Ze=20+ut.length*Oe,Fe+Ze>c-a.bottom&&(o.addPage(),z=a.top),Fe=z,o.rect(ye,z,Ve,Ze),o.text("Deposito y Condiciones de Pago",ye+5,Fe+3),ut.forEach((h,D)=>{o.text(h,ye+5,Fe+10+D*Oe)}),P[0].facturaPara&&(z=Fe+10+ut.length*Oe,o.setFontSize(8),o.text("FACTURA A NOMBRE DE:",ye+5,z),z+=Oe,o.text(P[0].facturaPara,ye+5,z)),z+=Ze+5;const E=[];for(const h of C){const D={pertenece:g.salida,destino:g.destino,nombrePrograma:g.nombrePrograma,hotel:g.hotel,noches:g.noches,tipoHabitacion:h.tipoHabitacion};try{const O=await se.post("https://backmultidestinos.onrender.com/costosHotel/buscar",D);console.log("Respuesta:",O.data),E.push(O.data)}catch(O){console.error("Error al buscar costo hotel:",((re=O.response)==null?void 0:re.data)||O.message)}}console.log("costosHotelResponses",E),o.setFontSize(10),o.text("COSTOS DE HOTEL:",a.left,z),z+=5,o.setFont("helvetica","bold"),o.text(g.hotel,a.left,z),o.setFont("helvetica","normal"),z+=8,E.forEach((h,D)=>{const O=C[D];o.setFontSize(8),o.text(`\u2022 Tipo de habitaci\xF3n: ${O.tipoHabitacion}`,a.left,z),z+=6;const K=O.acomodacion.toLowerCase();let ne="No disponible";h&&h.length>0&&h[0][K]&&(ne=h[0][K],typeof ne=="number"&&(ne=Te(ne).format("$0,0"))),o.text(`  - Acomodaci\xF3n: ${O.acomodacion}`,a.left+10,z),z+=6,o.text(`  - Valor: ${ne}`,a.left+10,z),z+=8});const W=o.output("blob");return o.save(`cotizacion_${y}.pdf`),W}catch(J){console.error("Error al descargar cotizaci\xF3n:",J)}},async descargarLiquidacionCano(y,Z){try{let ie=function(E,W,h,D=10){return W+h>o-D?(E.addPage(),e.top):W},ge=function(E){return E.map(W=>{const h=W.adultos,D=W.ni\u00F1os,O=`1x${h}`;return D>0?`${O} CHD`:O}).join(", ")},U=function(E){for(let W=0;W<=6;W++){const h=e.left+W*V;t.line(h,E,h,E+$)}t.line(e.left,E,s-e.right,E),t.line(e.left,E+$,s-e.right,E+$)};const[re,J,G,oe,L]=await Promise.all([se.get(`https://backmultidestinos.onrender.com/habitacionCotizacion/${y}`),se.get(`https://backmultidestinos.onrender.com/cotizacion/${y}`),se.get(`https://backmultidestinos.onrender.com/ImpuestoCot/${y}`),se.get(`https://backmultidestinos.onrender.com/liquidacion/${Z}`),se.get(`https://backmultidestinos.onrender.com/pasajero/${Z}`)]);if(re.status!==200||J.status!==200){console.error("Error al obtener datos de habitacionCotizacion o cotizacion");return}const i=J.data[0],F=G.data[0];console.log("impuesto",F);const g=re.data;console.log("habitacion",g);const N=oe.data;console.log("liquidacion",N);const C=L.data;console.log("pasajero",C);const P=await se.get(`https://backmultidestinos.onrender.com/cliente/buscar/${i.cliente}`);console.log("clienteResponse",P);const l=P.data[0];console.log("clienteData",l);const T=l.tipoBase,b=await se.get(`https://backmultidestinos.onrender.com/user/${i.CreadorCotizacion}`),m=b.Data;console.log("vendedor",b.data.nombreCompleto);const d={hotel:i.hotel,nombrePrograma:i.nombrePrograma,destino:i.destino},n=await se.post("https://backmultidestinos.onrender.com/hoteles/buscar",d),r=n.data[0].incluye,p=n.data[0].noIncluye,t=new Ot,e={top:10,bottom:10,left:10,right:10},s=t.internal.pageSize.width,o=t.internal.pageSize.height,a=40,f={left:10,right:10,top:5,bottom:5},c=await new Promise((E,W)=>{const h=new Image;h.src="https://i.ibb.co/1sFJ7dT/imgAzul.png",h.onload=()=>E(h),h.onerror=W}),A=c.width/c.height,x=s/4-f.left-f.right,j=Math.min(100,x),v=j/A,u=e.top+(a-v)/2,w=`PBX(601)7621133
CALLE 64 No. 11-37 LOC 301
EMAIL: MULTIDESTINOS_EXPRESS@YAHOO.COM`,S=`Numero de Liquidacion: ${Z}`;t.addImage(c,"PNG",e.left+f.left,u,j,v);const H=s-e.left-e.right-j-f.left-f.right-10;t.setFontSize(10),t.text(t.splitTextToSize(w,H),e.left+j+f.left+f.right,e.top+10);const _=s-e.right-t.getTextWidth(S)-f.right;t.setFontSize(12),t.setFont("Helvetica-Bold",12),t.text(S,_,e.top+10),t.setDrawColor(0),t.rect(e.left,e.top,s-e.left-e.right,a,"S"),t.setFontSize(10);const R=e.top+a+10;t.setFontSize(10),t.text("SOLICITUD DE RESERVA:",e.left,R-4),t.setFontSize(8);const k=["FECHA SOLICITUD:","AGENCIA:","TEL\xC9FONO:","CONTACTO:","NIT:","VENDEDOR:"],Q=[new Date(i.fechaCreacion).toLocaleDateString(),i.cliente.toString(),l.telefono?l.telefono.toString():"N/A",l.nit?l.nit.toString():"N/A",l.nit?l.nit.toString():"N/A",b.data.nombreCompleto?b.data.nombreCompleto.toString():"N/A"],q=6,M=(s-e.left-e.right)/q;let ae=e.left,I=R;for(let E=0;E<k.length;E++){t.text(k[E],ae,I);const W=Q[E]!==void 0?Q[E]:"N/A",h=t.splitTextToSize(W,M-2);t.text(h,ae,I+5),ae+=M,((E+1)%q===0||E===k.length-1)&&(I+=15,ae=e.left)}const de=ge(g),z=["NOCHES:","HOTEL:","PLAN:","DESTINO:","DIRECCION:","ACOMODACI\xD3N:"],De=[i.noches?i.noches.toString():"N/A",i.hotel?i.hotel.toString():"N/A",i.plan?i.plan.toString():"N/A",i.destino?i.destino.toString():"N/A",i.direccion?i.direccion.toString():"N/A",de.toString()];console.log("campso2",De);const xt=6,ot=(s-e.left-e.right)/xt;I+=1;for(let E=0;E<z.length;E++){t.text(z[E],ae,I);const W=De[E]!==void 0?De[E]:"N/A",h=t.splitTextToSize(W,ot-2);t.text(h,ae,I+5),ae+=ot}I+=1,t.setFontSize(10),t.text("PASAJEROS: ",e.left,I+12),I+=20;const $e=["NOMBRE","DOCUMENTO","F. NACIMIENTO","EDAD"],ht=C.map(E=>{const W=new Date(E.fechaNacimiento),h=new Date;let D=h.getFullYear()-W.getFullYear();const O=h.getMonth()-W.getMonth();return(O<0||O===0&&h.getDate()<W.getDate())&&D--,[E.nombre,E.numeroDocumento,W.toLocaleDateString(),D]}),at=(s-e.left-e.right)/$e.length,gt=s-e.left-e.right,nt=10+8*ht.length;t.rect(e.left,I,gt,nt,"S"),t.setFontSize(8),$e.forEach((E,W)=>{t.text(E,e.left+5+W*at,I+5)}),I+=10,ht.forEach((E,W)=>{E.forEach((h,D)=>{t.text(h.toString(),e.left+5+D*at,I+W*8)})}),I+=nt-15,I+=1,t.setFontSize(10),t.text("ITINERARIO: ",e.left,I+12),I+=20;const it=["AEROLINEA","VUELO","FECHA","RUTA","CLASE","HR SALIDA","HR LLEGADA","RECORD"],He=[[i.aerolineaIda||"N/A",i.vueloIda||"N/A",i.fechaInicio?new Date(new Date(i.fechaInicio).getTime()+new Date(i.fechaInicio).getTimezoneOffset()*6e4).toLocaleDateString():"N/A",i.ruta1||"N/A",i.claseIda||"N/A",i.horaSalidaIda||"N/A",i.horaLlegadaIda||"N/A",i.recordIda||"N/A"]];i.aerolineaEscalaIda!=null&&(He.push([i.aerolineaEscalaIda||"N/A",i.vueloEscalaIda||"N/A",i.fechaInicio?new Date(new Date(i.fechaInicio).getTime()+new Date(i.fechaInicio).getTimezoneOffset()*6e4).toLocaleDateString():"N/A","Escala Ida",i.claseEscalaIda||"N/A",i.horaSalidaEscalaIda||"N/A",i.horaLlegadaEscalaIda||"N/A",""]),He.push([i.aerolineaEscalaVuelta||"N/A",i.vueloEscalaVuelta||"N/A",i.fechaFin?new Date(new Date(i.fechaFin).getTime()+new Date(i.fechaFin).getTimezoneOffset()*6e4).toLocaleDateString():"N/A","Escala Vuelta",i.claseEscalaVuelta||"N/A",i.horaSalidaEscalaVuelta||"N/A",i.horaLlegadaEscalaVuelta||"N/A",""])),He.push([i.aerolineaVuelta||"N/A",i.vueloVuelta||"N/A",i.fechaFin?new Date(new Date(i.fechaFin).getTime()+new Date(i.fechaFin).getTimezoneOffset()*6e4).toLocaleDateString():"N/A",i.ruta2||"N/A",i.claseVuelta||"N/A",i.horaSalidaVuelta||"N/A",i.horaLlegadaVuelta||"N/A",i.recordVuelta||"N/A"]);const rt=(s-e.left-e.right)/it.length,mt=s-e.left-e.right,Ne=10+8*He.length;t.rect(e.left,I,mt,Ne,"S"),t.setFontSize(8),it.forEach((E,W)=>{t.text(E,e.left+W*rt,I+5)}),I+=10,He.forEach((E,W)=>{E.forEach((h,D)=>{t.text(h,e.left+D*rt,I+W*8)})}),I+=Ne-8;let ve;const wt="Esta cotizaci\xF3n est\xE1 sujeta a cambio y disponibilidad al momento de reservar (Sin servicio confirmado)",Re=I,Se=30;t.setDrawColor(0),t.rect(e.left,Re,s-e.left-e.right,Se),t.setFontSize(12),t.text("OBSERVACIONES:",e.left+2,Re+6),t.setFontSize(10),t.text(wt,e.left+2,Re+15,{maxWidth:s-e.left-e.right-4}),I=Re+Se;const Ge=I+10;t.setFontSize(8);const Je=`El pago de su plan se realizar\xE1 conforme a las siguientes condiciones:

Planes con inicio dentro de los 30 d\xEDas:  El pago total deber\xE1 efectuarse dentro de un d\xEDa h\xE1bil a partir de la fecha de env\xEDo de este documento.
Planes con inicio posterior a los 30 d\xEDas: El pago se realizar\xE1 en dos cuotas:
  * Primera cuota: 50% del valor total del plan, pagadero dentro de un d\xEDa h\xE1bil a partir de la fecha de env\xEDo de este documento.
  * Segunda cuota: 50% restante del valor total del plan, pagadero 30 d\xEDas antes de la fecha de inicio del plan.`,lt=t.splitTextToSize(Je,s-e.left-e.right-4);let xe=18;lt.forEach(E=>{xe+=t.getTextDimensions(E,{fontSize:8}).h}),I=ie(t,I,xe),t.setDrawColor(0),t.rect(e.left,Ge,s-e.left-e.right,xe),t.setFontSize(12),t.text("PLAZO DE PAGO:",e.left+2,Ge+6),t.setFontSize(8),ve=Ge+15,lt.forEach(E=>{t.text(E,e.left+2,ve,{maxWidth:s-e.left-e.right-4}),ve+=t.getTextDimensions(E,{fontSize:8}).h}),I=Ge+xe;let pt=!1;t.setFontSize(8);const st=r.split("\xBF");let Ie=[];st.forEach(E=>{const W=t.splitTextToSize(E,s-e.left-e.right-4);Ie=Ie.concat(W)});let Le=18;st.forEach(E=>{const W=t.splitTextToSize(E,s-e.left-e.right-4);for(let h=0;h<W.length;h++){const D=W[h];Le+=t.getTextDimensions(D,{fontSize:8}).h,!D.endsWith(`
`)&&h<W.length-1&&(Le+=t.getTextDimensions(" ",{fontSize:8}).h)}}),I=ie(t,I,Le),I===e.top&&(pt=!0);const We=I+10;t.setDrawColor(0),t.rect(e.left,We,s-e.left-e.right,Le),t.setFontSize(12),t.text("INCLUYE:",e.left+2,We+6),t.setFontSize(8),ve=We+15,Ie.forEach(E=>{t.text(E,e.left+2,ve,{maxWidth:s-e.left-e.right-4}),ve+=t.getTextDimensions(E,{fontSize:8}).h}),I=We+Le;const Xe=p.split("\xBF");let we=[];Xe.forEach(E=>{const W=t.splitTextToSize(E,s-e.left-e.right-4);we=we.concat(W)});let be=18;Xe.forEach(E=>{const W=t.splitTextToSize(E,s-e.left-e.right-4);for(let h=0;h<W.length;h++){const D=W[h];be+=t.getTextDimensions(D,{fontSize:8}).h,!D.endsWith(`
`)&&h<W.length-1&&(be+=t.getTextDimensions(" ",{fontSize:8}).h)}}),I=ie(t,I,be),pt||(I=e.top);const ke=I+10;t.setDrawColor(0),t.rect(e.left,ke,s-e.left-e.right,be),t.setFontSize(12),t.text("NO INCLUYE:",e.left+2,ke+6),t.setFontSize(8),ve=ke+15,we.forEach(E=>{t.text(E,e.left+2,ve,{maxWidth:s-e.left-e.right-4}),ve+=t.getTextDimensions(E,{fontSize:8}).h}),I=ke+be,t.addPage(),I=e.top,t.setFontSize(10),t.text("LIQUIDACI\xD3N:",e.left,I),I+=5;const ze=I+5,ee=2,$=6,V=(s-e.left-e.right)/6;t.setDrawColor(0);let Et=0;t.setFontSize(7);let te=0;g.forEach(E=>{const W=ze+te*$;U(W);const h=`Valor adul ${E.acomodacion}`;t.text(h,e.left+ee,W+$/2,{baseline:"middle"});const D=Math.round(E.precioComisionableAdulto);t.text(D.toString(),e.left+V+ee,W+$/2,{baseline:"middle"});const O=E.adultos;t.text(O.toString(),e.left+2*V+ee,W+$/2,{baseline:"middle"});const K=Math.round(E.precioComisionableAdulto*E.adultos);if(t.text(K.toString(),e.left+3*V+ee,W+$/2,{baseline:"middle"}),te===0){t.setFontSize(6);const fe=T==="Comisi\xF3n"?"BASE COMISI\xD3N":"BASE COMISION";t.text(fe,e.left+4*V+ee,W+$/2,{baseline:"middle"}),t.setFontSize(7)}let ne=K;if(E.ni\u00F1os>0&&(ne+=Math.round(E.precioComisionableNino*E.ni\u00F1os)),Et+=ne,te++,E.ni\u00F1os>0){const fe=ze+te*$;U(fe);const Ce=`Valor child ${E.acomodacion}`;t.text(Ce,e.left+ee,fe+$/2,{baseline:"middle"});const pe=Math.round(E.precioComisionableNino);t.text(pe.toString(),e.left+V+ee,fe+$/2,{baseline:"middle"});const ue=E.ni\u00F1os;t.text(ue.toString(),e.left+2*V+ee,fe+$/2,{baseline:"middle"});const he=Math.round(E.precioComisionableNino*E.ni\u00F1os);t.text(he.toString(),e.left+3*V+ee,fe+$/2,{baseline:"middle"}),te++}}),t.text(Et.toString(),e.left+5*V+ee,ze+$/2,{baseline:"middle"}),I=ze+te*$+10;const me=["TRANSPORTE NO COMI","Q","YS","CO","TA","YS TA","defensaCivil","alcaldiaNacional","alcaldiaExtranjero","pqsNaturalesExtranjero","pqsNaturales25a65","pqsNaturales5a24","cormacarenaExtranjero","cormacarena5a11","cormacarena12a65"],Me=[i.otros,i.combus,i.iva,i.tasa,i.ta,i.ivaTa,F.defensaCivil_Total,F.alcaldiaNacional_Total,F.alcaldiaExtranjero_Total,F.pqsNaturalesExtranjero_Total,F.pqsNaturales25a65_Total,F.pqsNaturales5a24_Total,F.cormacarenaExtranjero_Total,F.cormacarena5a11_Total,F.cormacarena12a65_Total,i.precioTrans],Ee=["alcaldiaNacional","alcaldiaExtranjero","pqsNaturalesExtranjero","pqsNaturales25a65","pqsNaturales5a24","cormacarenaExtranjero","cormacarena5a11","cormacarena12a65"],Be={defensaCivil:"Defensa Civil",alcaldiaNacional:"Alcald\xEDa Nacional",alcaldiaExtranjero:"Alcald\xEDa Extranjero",pqsNaturalesExtranjero:"PQS. Naturales Extranjero",pqsNaturales25a65:"PQS. Naturales 25 a 65",pqsNaturales5a24:"PQS. Naturales 5 a 24",cormacarenaExtranjero:"Cormacarena Extranjero",cormacarena5a11:"Cormacarena 5 a 11",cormacarena12a65:"Cormacarena 12 a 65"};if(i.suplemento>0&&(me.push("SUPLEMENTO"),Me.push(i.suplemento)),i.extra1)if(i.extra1.includes("*")){let E=i.extra1.split("*"),W=E[0],h=E[1];me.push("Valor Extra","Valor Extra2"),Me.push(W,h)}else{let E=i.extra1;me.push("Valor Extra"),Me.push(E)}me.forEach((E,W)=>{const h=I+W*$;U(h);const D=Be[E]||E;t.text(D,e.left+ee,h+$/2,{baseline:"middle"});const O=i.totalPasajeros,K=Me[W]||0;let ne="";if(Ee.includes(E)){const ue=`${E}_numeroPersonas`,he=F[ue]||0;ne=he!==0?Math.trunc(K/he):""}else ne=O!==0?Math.trunc(K/O):"";t.text(ne.toString(),e.left+V+ee,h+$/2,{baseline:"middle"});const fe=O!==0?Math.trunc(O).toString():"";let Ce="";if(Ee.includes(E)){const ue=`${E}_numeroPersonas`;Ce=F[ue]||""}else Ce=fe;t.text(Ce,e.left+2*V+ee,h+$/2,{baseline:"middle"});const pe=K!==0?Math.trunc(K).toString():"";if(t.text(pe,e.left+3*V+ee,h+$/2,{baseline:"middle"}),E==="Q"){t.text("Porcentaje",e.left+4*V+ee,h+$/2,{baseline:"middle"});const ue=i.clientePorcentaje||0,he=Math.trunc(ue).toString()+"%";t.text(he,e.left+5*V+ee,h+$/2,{baseline:"middle"})}else if(E==="YS"){t.text("Valor Descuento",e.left+4*V+ee,h+$/2,{baseline:"middle"});const ue=i.valorDescuento||0,he=Math.trunc(ue).toString();t.text(he,e.left+5*V+ee,h+$/2,{baseline:"middle"}),T==="Comisi\xF3n"&&[{label:`IVA(${l.porcentajeIva}%) (-)`,value:i.ivaValor},{label:`RTE FUENTE(${l.rteFuente}%) (+)`,value:i.rteFuente},{label:`RTE ICA(${l.rteIca}%) (+)`,value:i.rteIca},{label:"Total Comisi\xF3n",value:i.totalComision}].forEach((qe,Nt)=>{const Ue=h+(Nt+1)*$;U(Ue),t.text(qe.label,e.left+4*V+ee,Ue+$/2,{baseline:"middle"}),t.text(qe.value.toString(),e.left+5*V+ee,Ue+$/2,{baseline:"middle"})})}}),I+=me.length*$,g.forEach(E=>{if(E.adultos>0){const W=I;U(W),t.text(`Valor total Adt ${E.acomodacion}`,e.left+ee,W+$/2,{baseline:"middle"});const h=E.precioHabitacionAdulto||0,D=Te(h).format("$0,0");t.text(D,e.left+3*V+ee,W+$/2,{baseline:"middle"}),I+=$}if(E.ni\u00F1os>0){const W=I;U(W),t.text(`Valor total Chd ${E.acomodacion}`,e.left+ee,W+$/2,{baseline:"middle"});const h=E.precioHabitacionNino||0,D=Te(h).format("$0,0");t.text(D,e.left+3*V+ee,W+$/2,{baseline:"middle"}),I+=$}}),t.setFontSize(8),I+=$,U(I),t.text("Valor total",e.left+ee,I+$/2,{baseline:"middle"});const Ke=i.precioBrutoTotal||0,Pt=Te(Ke).format("$0,0");t.text(Pt,e.left+3*V+ee,I+$/2,{baseline:"middle"}),t.text("Precio a pagar",e.left+4*V+ee,I+$/2-2,{baseline:"middle"}),t.text("a Multidestinos",e.left+4*V+ee,I+$/2+2,{baseline:"middle"});const vt=parseFloat(i.suplemento)||0,ct=parseFloat(i.totalPrecioCliente)||0,St=vt>0?ct+vt:ct,Tt=Te(St).format("$0,0");t.text(Tt,e.left+5*V+ee,I+$/2,{baseline:"middle"}),I+=$+10;const je=e.left;let ye=I+5;const Fe=190;let Ve=30;t.setFontSize(7),t.setLineWidth(.5);const Ze="PARA CONFIRMACIONES SE DEBE ENVIAR DEPOSITO DEL 50% DEL VALOR DEL PLAN Y EL SALDO 30 DIAS ANTES DE LA SALIDA, SI LA FECHA DE VIAJES CERCANA SE DEBE CANCELAR EL 100%. LOS SERVICIOS DEJADOS DE TOMAR NO SON REMBOLSABLES. LA CANCELACI\xD3N CON 18 DIAS ANTES DE VIAJE LA PENALIDAD SERA DEL 100% DEL VALOR DEL PLAN, LOS TIQUETES NO SON REEMBOLSABLE, NI ENDOSABLES, PENALIDAD POR CAMBIO (FECHA, NOMBRE, HORA, RUTAS) 200.000. ESTAS POLITICAS ESTAN PUBLICADAS DE MANERA CLARA Y ESPECIFICA EN NUESTRA PAGINA WWW.MULTIDESTINOSEXPRESS.COM. *TARIFAS SUJETA A CAMBIO Y DISPONIBILIDAD SIN PREVIO AVISO*",Oe=t.splitTextToSize(Ze,Fe-10);ye+Ve>o-e.bottom&&(t.addPage(),I=e.top,ye=I+5),t.text("Deposito y Condiciones de Pago",je+5,ye+3),t.setFontSize(6);const et=5;Ve=20+Oe.length*et,t.rect(je,ye,Fe,Ve),Oe.forEach((E,W)=>{t.text(E,je+5,ye+10+W*et)}),N[0].facturaPara&&(I=ye+10+Oe.length*et,t.setFontSize(8),t.text("FACTURA A NOMBRE DE:",je+5,I),I+=et,t.text(N[0].facturaPara,je+5,I)),I+=Ve+5;const ut=t.output("blob");return t.save(`cotizacion_${y}.pdf`),ut}catch(ie){console.error("Error al descargar cotizaci\xF3n:",ie)}},exportToPDF(){if(!this.filteredRows.length){this.$q.notify({type:"warning",message:"No hay datos para exportar"});return}const y=new Ot("l","mm","a4"),Z=y.internal.pageSize.getWidth();y.setFontSize(18),y.text("Lista de Liquidaciones",Z/2,20,{align:"center"}),y.setFontSize(11),y.text(`Generado el ${new Date().toLocaleDateString()}`,Z/2,28,{align:"center"});const ie=this.columns.map(J=>J.label),re=this.filteredRows.map(J=>this.columns.map(G=>{const oe=typeof G.field=="function"?G.field(J):J[G.field];return oe!=null?String(oe):""}));y.autoTable({head:[ie],body:re,startY:35,theme:"grid",styles:{fontSize:10,cellPadding:3},headStyles:{fillColor:[41,128,185],textColor:[255,255,255],halign:"center"},alternateRowStyles:{fillColor:[245,245,245]}}),y.save("Lista-Liquidaciones.pdf")},actualizarTabla(){this.loading=!0,setTimeout(()=>{this.loading=!1,this.$q.notify({type:"positive",message:"Tabla recargada correctamente"})},1e3)}},async mounted(){try{const y=await se.get("https://backmultidestinos.onrender.com/liquidacion");this.rows=y.data}catch(y){console.error("Error al obtener las liquidaciones:",y)}}},vo={class:"q-pb-lg"},So={class:"bg-primary rounded-borders q-pa-md text-white shadow-2"},yo={class:"row items-center"},bo={class:"col-auto"},Co=X("div",{class:"col q-pl-md"},[X("h4",{class:"q-ma-none text-weight-bold"},"Sistema de Liquidaciones"),X("p",{class:"q-ma-none q-mt-xs opacity-8"},"Gesti\xF3n de liquidaciones y facturas")],-1),Ao={class:"col-auto"},xo={class:"row q-col-gutter-md"},wo={class:"col-12 col-md-4"},Eo={class:"row items-center no-wrap"},Po=X("div",{class:"text-h6"},"Filtros",-1),To={class:"flex items-center"},Do={class:"row q-col-gutter-sm"},No={class:"col-6"},Io={class:"row items-center no-wrap"},Lo=X("div",{class:"text-h6"},"Resumen",-1),zo={class:"row q-col-gutter-sm"},Fo={class:"col-6"},Oo=X("div",{class:"text-subtitle2 text-grey-8"},"Liquidaciones",-1),_o={class:"text-h5 text-primary"},Ho={class:"col-6"},Ro=X("div",{class:"text-subtitle2 text-grey-8"},"Pendientes",-1),Wo={class:"text-h5 text-orange"},ko={class:"col-12 col-md-8"},Mo={class:"row items-center no-wrap"},Bo=X("div",{class:"text-h6"},"Lista de Liquidaciones",-1),jo={class:"row items-center justify-between full-width q-pa-sm"},Vo={class:"text-body2"},qo={class:"full-width row flex-center q-py-lg"},Uo=X("div",{class:"text-h6 text-grey-7"}," No se encontraron liquidaciones ",-1),Yo=X("div",{class:"text-caption text-grey-7 q-mt-sm"}," Intenta modificar los filtros de b\xFAsqueda ",-1),Qo={class:"row items-center no-wrap"},$o=X("div",{class:"text-h6"},"Opciones de Facturaci\xF3n",-1),Go=X("div",{class:"text-subtitle2 q-mb-sm"},"Informaci\xF3n de facturaci\xF3n",-1),Jo={class:"row items-center"},Xo=X("div",{class:"text-caption"}," El documento se generar\xE1 en formato PDF ",-1);function Ko(y,Z,ie,re,J,G){const oe=Gt("q-toast");return Ye(),tt(fo,{padding:"",class:"liquidaciones-page bg-grey-1"},{default:Y(()=>[X("div",vo,[X("div",So,[X("div",yo,[X("div",bo,[B(Jt,{color:"white","text-color":"primary",size:"56px"},{default:Y(()=>[B(ce,{name:"monetization_on",size:"32px"})]),_:1})]),Co,X("div",Ao,[B(Ae,{round:"",flat:"",icon:"refresh",size:"md",onClick:G.actualizarTabla},{default:Y(()=>[B(bt,null,{default:Y(()=>[_e("Actualizar datos")]),_:1})]),_:1},8,["onClick"])])])])]),X("div",xo,[X("div",wo,[B(yt,{class:"filtros-card shadow-2"},{default:Y(()=>[B(Pe,{class:"bg-primary text-white"},{default:Y(()=>[X("div",Eo,[B(ce,{name:"filter_list",size:"md",class:"q-mr-sm"}),Po,B(Lt),B(Ae,{flat:"",round:"",icon:"help_outline",size:"sm"},{default:Y(()=>[B(bt,null,{default:Y(()=>[_e("Ayuda con los filtros")]),_:1})]),_:1})])]),_:1}),B(Pe,{class:"q-pa-md"},{default:Y(()=>[B(At,{modelValue:J.filterId,"onUpdate:modelValue":Z[1]||(Z[1]=L=>J.filterId=L),label:"ID de Cotizaci\xF3n",filled:"",dense:"",clearable:"",class:"q-mb-md",debounce:300,placeholder:"Buscar por ID..."},{prepend:Y(()=>[B(ce,{name:"search",color:"primary"})]),append:Y(()=>[J.filterId?(Ye(),tt(ce,{key:0,name:"close",onClick:Z[0]||(Z[0]=L=>J.filterId=""),class:"cursor-pointer",color:"grey-6"})):It("",!0)]),_:1},8,["modelValue"]),B(Rt,{modelValue:J.filterStatus,"onUpdate:modelValue":Z[2]||(Z[2]=L=>J.filterStatus=L),options:[{label:"Todos los estados",value:null},...J.statusOptions],label:"Estado",filled:"",dense:"",clearable:"","emit-value":"","map-options":"",class:"q-mb-md"},{prepend:Y(()=>[B(ce,{name:"label",color:"primary"})]),selected:Y(()=>[X("div",To,[J.filterStatus?(Ye(),tt(ce,{key:0,name:J.filterStatus?"circle":"label",color:G.chipColor(J.filterStatus),size:"xs",class:"q-mr-xs"},null,8,["name","color"])):It("",!0),X("span",null,Qe(J.filterStatus||"Todos los estados"),1)])]),_:1},8,["modelValue","options"]),B(Xt,{class:"q-my-md"}),X("div",Do,[X("div",No,[B(Ae,{color:"primary",label:"Aplicar",icon:"check",class:"full-width",unelevated:"",onClick:y.applyFilter},null,8,["onClick"])])])]),_:1})]),_:1}),B(yt,{class:"q-mt-md shadow-1"},{default:Y(()=>[B(Pe,{class:"bg-secondary text-white"},{default:Y(()=>[X("div",Io,[B(ce,{name:"insights",size:"md",class:"q-mr-sm"}),Lo])]),_:1}),B(Pe,{class:"q-pa-md"},{default:Y(()=>[X("div",zo,[X("div",Fo,[Oo,X("div",_o,Qe(G.filteredRows.length),1)]),X("div",Ho,[Ro,X("div",Wo,Qe(G.countPendientes),1)])])]),_:1})]),_:1})]),X("div",ko,[B(yt,{class:"shadow-2"},{default:Y(()=>[B(Pe,{class:"bg-primary text-white"},{default:Y(()=>[X("div",Mo,[B(ce,{name:"receipt_long",size:"md",class:"q-mr-sm"}),Bo,B(Lt),B(At,{modelValue:J.globalFilter,"onUpdate:modelValue":Z[4]||(Z[4]=L=>J.globalFilter=L),dense:"",filled:"",placeholder:"Buscar...",class:"search-input",style:{width:"200px"},dark:""},{prepend:Y(()=>[B(ce,{name:"search"})]),append:Y(()=>[J.globalFilter?(Ye(),tt(ce,{key:0,name:"clear",onClick:Z[3]||(Z[3]=L=>J.globalFilter=""),class:"cursor-pointer"})):It("",!0)]),_:1},8,["modelValue"]),B(Ae,{flat:"",round:"",icon:"download",class:"q-ml-sm",onClick:G.exportToPDF},{default:Y(()=>[B(bt,null,{default:Y(()=>[_e("Exportar tabla")]),_:1})]),_:1},8,["onClick"])])]),_:1}),B(Pe,{class:"q-pa-none"},{default:Y(()=>[B(ro,{rows:G.filteredRows,columns:J.columns,"row-key":"id",pagination:y.pagination,"onUpdate:pagination":Z[5]||(Z[5]=L=>y.pagination=L),loading:J.loading,filter:J.globalFilter,"binary-state-sort":"",flat:"",bordered:"",separator:"cell",class:"liquidaciones-table"},{loading:Y(()=>[B(io,{showing:"",color:"primary"},{default:Y(()=>[B(Kt,{size:"50px",color:"primary"})]),_:1})]),header:Y(L=>[B(so,{props:L},{default:Y(()=>[(Ye(!0),Zt(to,null,eo(L.cols,i=>(Ye(),tt(lo,{key:i.name,props:L,class:"bg-grey-2"},{default:Y(()=>[_e(Qe(i.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"body-cell-tieneImpuestos":Y(L=>[B(zt,{props:L},{default:Y(()=>[B(co,{color:L.row.impuestosLiq==="1"?"positive":"grey",class:"text-white"},{default:Y(()=>[_e(Qe(L.row.impuestosLiq==="1"?"S\xED":"No"),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-status":Y(L=>[B(zt,{props:L},{default:Y(()=>[B(no,{color:G.chipColor(L.row.status),"text-color":"white",size:"sm",class:"shadow-1"},{default:Y(()=>[B(ce,{name:"circle",size:"xs",class:"q-mr-xs"}),_e(" "+Qe(L.row.status),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-acciones":Y(L=>[B(zt,{props:L,class:"text-center"},{default:Y(()=>[B(Ae,{onClick:i=>G.mostrarDialogoFactura(L.row),color:"primary",label:"Descargar",icon:"download",size:"sm",unelevated:"",class:"q-px-sm"},null,8,["onClick"]),B(Ae,{flat:"",round:"",color:"grey-7",icon:"more_vert",size:"sm",class:"q-ml-xs"})]),_:2},1032,["props"])]),bottom:Y(L=>[X("div",jo,[X("div",null,[X("span",Vo,"Total: "+Qe(G.filteredRows.length)+" liquidaciones",1)]),X("div",null,[B(go,{modelValue:L.pagination.page,"onUpdate:modelValue":i=>L.pagination.page=i,max:Math.ceil(L.pagination.rowsNumber/L.pagination.rowsPerPage),"max-pages":6,"boundary-links":"","direction-links":"","icon-first":"first_page","icon-last":"last_page","icon-prev":"chevron_left","icon-next":"chevron_right",color:"primary",size:"sm"},null,8,["modelValue","onUpdate:modelValue","max"])])])]),"no-data":Y(()=>[X("div",qo,[B(ce,{name:"search_off",size:"lg",color:"grey-7",class:"q-mb-md"}),Uo,Yo])]),_:1},8,["rows","columns","pagination","loading","filter"])]),_:1})]),_:1})])]),B(ao,{modelValue:J.mostrarDialogo,"onUpdate:modelValue":Z[8]||(Z[8]=L=>J.mostrarDialogo=L),persistent:""},{default:Y(()=>[B(yt,{style:{"min-width":"400px"},class:"rounded-borders"},{default:Y(()=>[B(Pe,{class:"bg-primary text-white"},{default:Y(()=>[X("div",Qo,[B(ce,{name:"description",size:"md",class:"q-mr-sm"}),$o,B(Lt),Ht((Ye(),tt(Ae,{flat:"",round:"",icon:"close"},{default:Y(()=>[B(bt,null,{default:Y(()=>[_e("Cerrar")]),_:1})]),_:1})),[[Wt]])])]),_:1}),B(Pe,{class:"q-pa-md q-pt-lg"},{default:Y(()=>[Go,B(At,{modelValue:J.nombreFactura,"onUpdate:modelValue":Z[6]||(Z[6]=L=>J.nombreFactura=L),label:"Nombre para la factura",filled:"",class:"q-mb-sm",ref:"nombreInput","bottom-slots":""},{prepend:Y(()=>[B(ce,{name:"person",color:"primary"})]),hint:Y(()=>[_e("Ingrese el nombre como aparecer\xE1 en la factura")]),_:1},8,["modelValue"]),B(Rt,{modelValue:y.tipoDocumento,"onUpdate:modelValue":Z[7]||(Z[7]=L=>y.tipoDocumento=L),options:["Factura","Recibo","Comprobante"],label:"Tipo de documento",filled:"",class:"q-mt-md"},{prepend:Y(()=>[B(ce,{name:"receipt",color:"primary"})]),_:1},8,["modelValue"])]),_:1}),B(Pe,{class:"bg-grey-2 text-grey-8 q-pa-sm"},{default:Y(()=>[X("div",Jo,[B(ce,{name:"info",size:"sm",class:"q-mr-xs"}),Xo])]),_:1}),B(oo,{align:"right",class:"q-py-md q-px-md"},{default:Y(()=>[Ht(B(Ae,{flat:"",label:"Cancelar",color:"grey-7",icon:"close"},null,512),[[Wt]]),B(Ae,{label:"Descargar",color:"primary",onClick:G.procesarDescarga,icon:"download",loading:y.descargando,unelevated:""},null,8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),B(oe,{position:"bottom-right",timeout:"2500",color:"positive",class:"shadow-3"})]),_:1})}var ya=ho(po,[["render",Ko]]);export{ya as default};
